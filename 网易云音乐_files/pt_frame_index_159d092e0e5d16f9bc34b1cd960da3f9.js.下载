(function(){var c5h=NEJ.P,bb6V=NEJ.O,fv8n=NEJ.R,a5f=c5h("nej.e"),h5m=c5h("nej.v"),P6J=c5h("nej.ut"),EY6S;if(!!P6J.biK3x)return;P6J.biK3x=NEJ.C();EY6S=P6J.biK3x.M6G(P6J.cP7I);EY6S.cA6u=function(){this.li9Z={onchange:this.gu8m.f5k(this),ondragend:this.gu8m.eK7D(this,!0)};this.cE7x()};EY6S.bo6i=function(e5j){this.bp6j(e5j);this.li9Z.view=a5f.A5F(e5j.track);this.li9Z.body=a5f.A5F(e5j.slide);this.li9Z.mbar=this.li9Z.view;this.xI4M(e5j.range);this.bZ6T([[this.li9Z.view,"mousedown",this.csx0x.f5k(this)]]);this.jh9Y=P6J.xo4s.B5G(this.li9Z)};EY6S.bC6w=function(){this.bI6C();this.jh9Y.V6P();delete this.jh9Y;delete this.iq8i;delete this.li9Z.view;delete this.li9Z.body;delete this.li9Z.mbar};EY6S.gu8m=function(d5i,go8g){var bCH8z=d5i.left/this.iq8i.x[1],bCG8y=d5i.top/this.iq8i.y[1],bCF8x=this.iq8i.x,bCE8w=this.iq8i.y;this.z5E("onchange",{stopped:!!go8g,x:{rate:bCH8z,value:bCH8z*(bCF8x[1]-bCF8x[0])},y:{rate:bCG8y,value:bCG8y*(bCE8w[1]-bCE8w[0])}})};EY6S.csx0x=function(d5i){var bn6h=a5f.ir9i(this.li9Z.view),bCD8v={x:h5m.jX9O(d5i),y:h5m.mJ0x(d5i)},dx7q={x:Math.floor(this.li9Z.body.offsetWidth/2),y:Math.floor(this.li9Z.body.offsetHeight/2)};this.jh9Y.gZ8R({top:bCD8v.y-bn6h.y-dx7q.y,left:bCD8v.x-bn6h.x-dx7q.x})};EY6S.xI4M=function(do7h){var sD1x;if(!!this.iq8i){var oy0x=this.jh9Y.blr4v();sD1x={x:oy0x.left/this.iq8i.x[1],y:oy0x.top/this.iq8i.y[1]}}do7h=do7h||bb6V;var czI1x=(do7h.x||fv8n)[1]||this.li9Z.view.clientWidth-this.li9Z.body.offsetWidth,cxa1x=(do7h.y||fv8n)[1]||this.li9Z.view.clientHeight-this.li9Z.body.offsetHeight;this.iq8i={x:do7h.x||[0,czI1x],y:do7h.y||[0,cxa1x]};if(!!sD1x)this.gZ8R(sD1x);return this};EY6S.gZ8R=function(sD1x){sD1x=sD1x||bb6V;this.jh9Y.gZ8R({top:this.iq8i.y[1]*(sD1x.y||0),left:this.iq8i.x[1]*(sD1x.x||0)})}})();
(function(){var P6J=NEJ.P("nej.ut"),bCC8u;if(!!P6J.KI8A)return;P6J.KI8A=NEJ.C();bCC8u=P6J.KI8A.M6G(P6J.biK3x);bCC8u.cA6u=function(){this.cE7x();this.li9Z.direction=2}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),P6J=c5h("nej.p"),bH6B=c5h("nej.ui"),ci6c=c5h("nej.ut"),y5D=c5h("nm.w"),b5g,L5Q;y5D.Ad4h=NEJ.C();b5g=y5D.Ad4h.M6G(bH6B.er7k);L5Q=y5D.Ad4h.ct6n;b5g.cA6u=function(){this.cE7x()};b5g.bo6i=function(e5j){this.bp6j(e5j);this.o5t=a5f.A5F(e5j.content);this.mI0x=a5f.A5F(e5j.slide);this.jH9y=a5f.A5F(e5j.track);this.bCZ8R=e5j.speed;this.bAJ8B=this.o5t.scrollHeight-this.o5t.clientHeight;a5f.bc6W(this.mI0x,"height",(this.o5t.clientHeight/this.o5t.scrollHeight*parseInt(a5f.dl7e(this.jH9y,"height"))||0)+"px");if(this.o5t.scrollHeight<=this.o5t.clientHeight)a5f.bc6W(this.mI0x,"display","none");else a5f.bc6W(this.mI0x,"display","block");this.vK3x=ci6c.KI8A.B5G({slide:this.mI0x,track:this.jH9y,onchange:this.bAD8v.f5k(this)});if(P6J.dB7u.browser!="firefox")this.bZ6T([[this.o5t,"mousewheel",this.Jd7W.f5k(this)]]);else{this.o5t.addEventListener("DOMMouseScroll",this.Jd7W.f5k(this),false)}};b5g.bC6w=function(){this.bI6C();this.vK3x.V6P();delete this.o5t;delete this.mI0x;delete this.jH9y;delete this.iq8i;delete this.bCZ8R};b5g.bAD8v=function(d5i){this.o5t.scrollTop=parseInt(this.bAJ8B*d5i.y.rate)};b5g.Jd7W=function(d5i){h5m.co6i(d5i);this.bAJ8B=this.o5t.scrollHeight-this.o5t.clientHeight;var dx7q=0,Lk8c,cj6d,gs8k;cj6d=parseInt(this.jH9y.clientHeight)-parseInt(a5f.dl7e(this.mI0x,"height"));dx7q=d5i.wheelDelta?d5i.wheelDelta/120:-d5i.detail/3;Lk8c=parseInt(a5f.dl7e(this.mI0x,"top"))-dx7q*this.bCZ8R;if(Lk8c<0)Lk8c=0;if(Lk8c>cj6d)Lk8c=cj6d;a5f.bc6W(this.mI0x,"top",Lk8c+"px");gs8k=parseInt(a5f.dl7e(this.mI0x,"top"));this.vK3x.z5E("onchange",{y:{rate:gs8k/cj6d}})};b5g.rh1x=function(){this.bAJ8B=this.o5t.scrollHeight-this.o5t.clientHeight;this.vK3x.gZ8R({x:0,y:0});a5f.bc6W(this.mI0x,"height",this.o5t.clientHeight/this.o5t.scrollHeight*parseInt(this.jH9y.clientHeight)+"px");this.vK3x.xI4M({x:[],y:[0,this.jH9y.clientHeight-parseInt(a5f.dl7e(this.mI0x,"height"))]});if(this.o5t.scrollHeight<=this.o5t.clientHeight)a5f.bc6W(this.mI0x,"display","none");else a5f.bc6W(this.mI0x,"display","block")};b5g.gZ8R=function(dO7H){this.vK3x.gZ8R(dO7H)};b5g.Ll8d=function(bAw8o){var cjP8H=parseInt(a5f.dl7e(this.mI0x,"height"));var ckc8U=parseInt(a5f.dl7e(this.jH9y,"height"));var yv4z=ckc8U-cjP8H;var gs8k=parseInt(yv4z*bAw8o)+"px";a5f.bc6W(this.mI0x,"top",gs8k)};b5g.bDd8V=function(){if(this.o5t.scrollHeight<=this.o5t.clientHeight)return;var bAw8o=this.o5t.scrollTop/(this.o5t.scrollHeight-this.o5t.clientHeight);this.Ll8d(bAw8o)};b5g.cSg6a=function(){if(this.vK3x)this.vK3x.xI4M()}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),v5A=c5h("nej.j"),bb6V=c5h("nej.o"),j5o=c5h("nej.u"),h5m=c5h("nej.v"),bH6B=c5h("nej.ui"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),b5g,L5Q;n5s.bIV0x=NEJ.C();b5g=n5s.bIV0x.M6G(n5s.ee7X,!0);b5g.cA6u=function(){this.cE7x()};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.Kp8h=k5p[0];this.bts6m=k5p[1];this.bkb4f=k5p[2];h5m.s5x(k5p[3],"click",this.btt6n.f5k(this))};b5g.cd6X=function(){this.cc6W="ntp-alert"};b5g.bo6i=function(e5j){e5j.parent=e5j.parent||document.body;this.bp6j(e5j);a5f.bc6W(this.Kp8h,"display","");if(e5j.type=="noicon"){a5f.bc6W(this.Kp8h,"display","none")}else if(e5j.type=="success"){a5f.fo8g(this.Kp8h,"u-icn-88","u-icn-89")}else{a5f.fo8g(this.Kp8h,"u-icn-89","u-icn-88")}this.bts6m.innerHTML=e5j.mesg||"";if(e5j.mesg2){a5f.x5C(this.bkb4f,"f-hide");this.bkb4f.innerHTML=e5j.mesg2||""}else{a5f.w5B(this.bkb4f,"f-hide")}};b5g.bC6w=function(){this.bI6C()};b5g.btt6n=function(d5i){this.z5E("onnotice");this.br6l()};n5s.dX7Q=function(e5j){if(this.Ak4o){this.Ak4o.V6P();delete this.Ak4o}this.Ak4o=n5s.bIV0x.B5G(e5j);this.Ak4o.I5N()}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,h5m=c5h("nej.v"),j5o=c5h("nej.u"),H5M=c5h("nej.ut"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),J5O="RADIO_LATEST_MAP",b5g,L5Q;p5u.fu8m({"radio_crt-list":{url:"/api/djradio/get/byuser",format:function(Q6K,e5j){var k5p=Q6K.djRadios;return{total:k5p.length||0,list:k5p}}},"radio_sub-list":{url:"/api/djradio/get/subed",format:function(Q6K,e5j){var k5p=Q6K.djRadios;e5j.data.time=Q6K.time;return{total:Q6K.count||0,list:k5p}}},"radio_sub-add":{url:"/api/djradio/subscribe/v1",filter:function(e5j){e5j.data={radioId:e5j.id};if(e5j.ext&&e5j.ext.data&&e5j.ext.data.token){e5j.data.token=e5j.ext.data.token}},format:function(Q6K,e5j){if(this.bDG9x("firstSub")){n5s.dX7Q({title:"订阅成功",type:"noicon",mesg:"可以在“我的音乐-我的电台”收到节目更新"})}else{n5s.Z6T.I5N({tip:"订阅成功"})}var dI7B=this.eS8K(e5j.id)||e5j.ext.data;dI7B.subCount+=1;dI7B.subed=true;return dI7B},finaly:function(d5i,e5j){h5m.z5E(p5u.pr1x,"listchange",d5i);h5m.z5E(p5u.pr1x,"itemchange",{attr:"subCount",data:d5i.data})},onmessage:function(cf6Z){if(cf6Z==315){n5s.Z6T.I5N({tip:"根据对方设置，你没有该操作权限",type:2})}else if(cf6Z==250){n5s.Z6T.I5N({tip:"操作失败，账号存在异常",type:2})}}},"radio_sub-del":{url:"/api/djradio/unsub",filter:function(e5j){e5j.data={id:e5j.id}},format:function(Q6K,e5j){n5s.Z6T.I5N({tip:"取消订阅成功"});var dI7B=this.eS8K(e5j.id)||e5j.ext.data;dI7B.subCount-=1;dI7B.subed=false;return dI7B},finaly:function(d5i,e5j){h5m.z5E(p5u.pr1x,"listchange",d5i);h5m.z5E(p5u.pr1x,"itemchange",{attr:"subCount",data:d5i.data})}}});p5u.pr1x=NEJ.C();b5g=p5u.pr1x.M6G(p5u.hT8L);b5g.civ7o=function(df7Y,bB6v){var bA6u=this.Jm7f(J5O,{});bA6u[df7Y.radio.id]={id:df7Y.id,name:df7Y.name,time:bB6v||0};this.zd4h(J5O,bA6u)};b5g.cil7e=function(E5J){return this.Jm7f(J5O,{})[E5J]};b5g.bDF9w=function(dI7B){var cC7v={key:"radio_sub",ext:{}};if(j5o.mA0x(dI7B)){cC7v.id=dI7B.id;cC7v.ext.data=dI7B}else{cC7v.id=dI7B}return cC7v};b5g.nK0x=function(dI7B){if(l5q.gQ8I())this.jJ9A(this.bDF9w(dI7B))};b5g.bDE9v=function(dI7B){l5q.hk8c({btnok:"确定",btncc:"取消",message:"确定取消订阅？",action:function(C5H){if(C5H=="ok"){this.OV9M(this.bDF9w(dI7B))}}.f5k(this)})};b5g.bDG9x=function(){var tS2x="RADIO_UPGRADE_TIP";return function(u5z){var i5n=this.Jm7f(tS2x,{});if(i5n[u5z]){return false}else{i5n[u5z]=true;this.zd4h(tS2x,i5n);return true}}}();H5M.fP8H.B5G({element:p5u.pr1x,event:["listchange","itemchange"]})})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,h5m=c5h("nej.v"),H5M=c5h("nej.ut"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),b5g;var QUEUE_KEY="track-queue";var PlayMode={SINGLE_CYCLE:2,LIST_LOOP:4,RANDOM:5};y5D.uK3x=NEJ.C();b5g=y5D.uK3x.M6G(H5M.cP7I);b5g.bo6i=function(e5j){this.bp6j(e5j);this.by6s=y5D.gj8b.fR8J();this.kd9U=[];this.Ax5C=[];this.nZ0x=l5q.bxO7H();this.fD8v=0;this.bZ6T([[y5D.gj8b,"playaction",this.ys4w.f5k(this)]]);this.kG9x=p5u.ie8W.B5G();this.yK4O=p5u.pr1x.B5G();this.cdK6E()};b5g.bC6w=function(){this.bI6C();delete this.kd9U;delete this.Ax5C;delete this.nZ0x};b5g.bfo3x=function(){v5A.xH4L(QUEUE_KEY,this.kd9U)};b5g.cel6f=function(){var us3x=[PlayMode.SINGLE_CYCLE,PlayMode.LIST_LOOP,PlayMode.RANDOM];return function(){var eV8N,r5w=j5o.dt7m(us3x,this.nZ0x.mode);eV8N=r5w<0?PlayMode.LIST_LOOP:us3x[(r5w+1)%3];this.nZ0x.mode=eV8N;if(this.Ql9c()){this.bxd7W()}l5q.It7m(this.nZ0x);return this.nZ0x.mode}}();b5g.ceZ6T=function(){return this.nZ0x.mode};b5g.oC0x=l5q.Hn6h(function(){this.ya4e(this.bEC9t(+1),"ui")},800);b5g.AD5I=l5q.Hn6h(function(){this.ya4e(this.bEC9t(-1),"ui")},800);b5g.ta2x=function(){return this.kd9U[this.fD8v]};b5g.cfh6b=function(ji9Z,tI2x,gt8l){if(!ji9Z||!ji9Z.length)return;var bA6u={},qO1x=ji9Z[0];if(!tI2x){j5o.bf6Z(this.kd9U,function(bj6d){bA6u[bj6d.id]=bj6d});j5o.bf6Z(ji9Z,function(bj6d){if(bA6u[bj6d.id]){if(qO1x.id==bj6d.id){qO1x=bA6u[bj6d.id]}}else{this.kd9U.push(bj6d)}},this)}else{this.kd9U=ji9Z}if(this.Ql9c()){this.bxd7W()}if(gt8l){this.ya4e(j5o.dt7m(this.kd9U,qO1x));this.by6s.ex7q()}this.bfo3x();h5m.z5E(y5D.uK3x,"queuechange",{cmd:gt8l?"play":"addto"})};b5g.mC0x=function(oc0x){var r5w=j5o.dt7m(this.kd9U,function(bj6d){return bj6d.id==oc0x});if(r5w!=-1){var cft6n=r5w==this.fD8v&&this.kd9U.length>1,cfv6p=r5w==this.kd9U.length-1,bj6d=this.kd9U[r5w];this.kd9U.splice(r5w,1);if(this.Ql9c()){this.Ax5C.splice(j5o.dt7m(this.Ax5C,bj6d),1)}if(cft6n){if(cfv6p){this.ya4e(r5w-1)}else{this.ya4e(r5w)}}else if(r5w<this.fD8v){this.fD8v--}this.bfo3x();h5m.z5E(y5D.uK3x,"queuechange",{cmd:"delete"})}};b5g.qK1x=function(){this.kd9U=[];this.Ax5C=[];this.nZ0x.index=this.fD8v=0;l5q.It7m(this.nZ0x);this.bfo3x();h5m.z5E(y5D.uK3x,"queuechange",{cmd:"clear"})};b5g.ta2x=function(){return this.kd9U[this.fD8v]};b5g.bED9u=function(){return this.kd9U};b5g.lS0x=function(){return this.kd9U.length};b5g.bwZ7S=function(E5J){var r5w=j5o.dt7m(this.kd9U,function(bj6d){return E5J==bj6d.id});if(r5w>=0){return this.kd9U[r5w]}};b5g.cfN7G=function(E5J){var r5w=j5o.dt7m(this.kd9U,function(bj6d){return E5J==bj6d.id});if(r5w>=0){this.ya4e(r5w);this.by6s.ex7q()}};b5g.cdK6E=function(){this.kd9U=v5A.ue3x(QUEUE_KEY)||[];this.fD8v=this.nZ0x.index||0;if(this.kd9U.length&&this.Ql9c()){this.bxd7W()}this.by6s.biY3x(this.ta2x(),true)};b5g.bEC9t=function(dx7q){if(this.Ql9c()){var hz8r=this.ta2x(),r5w=inRange(j5o.dt7m(this.Ax5C,hz8r)+dx7q,this.Ax5C.length);return j5o.dt7m(this.kd9U,this.Ax5C[r5w])}else{return inRange(this.fD8v+dx7q,this.kd9U.length)}function inRange(r5w,bt6n){return r5w<0?bt6n-1:r5w>=bt6n?0:r5w}};b5g.bxd7W=function(){var k5p=this.kd9U.slice(0);this.Ax5C=[];while(k5p.length){var r5w=j5o.Fv6p(0,k5p.length-1);this.Ax5C.push(k5p[r5w]);k5p.splice(r5w,1)}};b5g.ya4e=function(r5w,u5z){if(!this.kd9U.length)return;var jz9q,nQ0x=this.ta2x(),bEE9v=this.by6s.biQ3x();this.fD8v=r5w;this.nZ0x.index=this.fD8v;jz9q=this.kd9U[this.fD8v];l5q.It7m(this.nZ0x);h5m.z5E(y5D.uK3x,"playchange",{old:nQ0x,"new":jz9q,type:u5z});this.by6s.biY3x(this.ta2x());if(nQ0x&&bEE9v>3){this.kG9x.btV6P(nQ0x.id,bEE9v,nQ0x.source,u5z||"interrupt")}if(jz9q&&jz9q.program)this.yK4O.civ7o(jz9q.program,0)};b5g.Ql9c=function(){return this.nZ0x.mode==PlayMode.RANDOM};b5g.ys4w=function(d5i){if(d5i.action=="ended"){if(this.nZ0x.mode==PlayMode.SINGLE_CYCLE){this.ya4e(this.fD8v,"playend")}else{this.oC0x()}}};H5M.fP8H.B5G({element:y5D.uK3x,event:["queuechange","playchange"]})})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ds7l=c5h("nej.p"),v5A=c5h("nej.j"),bd6X=c5h("nej.ui"),H5M=c5h("nej.ut"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),dM7F=c5h("nm.u"),y5D=c5h("nm.w"),N6H=c5h("nm.m.f"),b5g,L5Q;N6H.bEF9w=NEJ.C();b5g=N6H.bEF9w.M6G(bd6X.er7k);b5g.cA6u=function(){this.cE7x();this.hg8Y=y5D.uK3x.fR8J();h5m.s5x(y5D.uK3x,"queuechange",this.yi4m.f5k(this));h5m.s5x(y5D.uK3x,"playchange",this.hK8C.f5k(this))};b5g.cd6X=function(){this.cc6W="m-player-panel"};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.bfh3x=k5p[0];this.le9V=k5p[1];this.Qs9j=k5p[2];this.bO6I=k5p[3];this.Qu9l=k5p[4];this.jq9h=y5D.Ad4h.B5G({track:this.Qu9l,slide:a5f.dg7Z(this.Qu9l)[0],content:this.bO6I,speed:4});this.cg6a={nask:k5p[5],nmenu:k5p[6],nlist:k5p[7],nscroll:k5p[8]};h5m.s5x(this.o5t,"click",this.bN6H.f5k(this));h5m.s5x(this.Qs9j,"load",this.qP1x.f5k(this))};b5g.bo6i=function(e5j){this.bp6j(e5j);this.oK0x=y5D.bEI9z.B5G(this.cg6a);this.hK8C({"new":this.hg8Y.ta2x()});this.jq9h.rh1x();var k5p=a5f.D5I(this.bO6I,"z-sel");if(k5p.length){var bn6h=a5f.ir9i(k5p[0],this.bO6I);this.bO6I.scrollTop=this.bO6I.scrollTop+(bn6h.y-(this.bO6I.scrollTop+112));this.jq9h.bDd8V()}};b5g.bC6w=function(){this.z5E("onclose");if(this.oK0x){this.oK0x.V6P();delete this.oK0x}this.bI6C()};b5g.yi4m=function(d5i){a5f.dw7p(this.bO6I,"m-player-queue",{queue:this.hg8Y.bED9u(),current:this.hg8Y.ta2x()},{dur2time:l5q.lY0x,getArtistName:l5q.sX2x});this.bfh3x.innerText=this.hg8Y.lS0x();if(d5i&&d5i.cmd=="delete")return;var k5p=a5f.D5I(this.bO6I,"z-sel");if(k5p.length){var bn6h=a5f.ir9i(k5p[0],this.bO6I);this.bO6I.scrollTop=Math.max(Math.min(bn6h.y,this.bO6I.scrollTop),bn6h.y-224);this.jq9h.bDd8V()}};b5g.bN6H=function(d5i){var g5l,E5J,bEJ9A;g5l=h5m.ba6U(d5i,"a:href");if(g5l&&g5l.tagName.toLocaleLowerCase()=="a"&&/^http/.test(g5l.href)){return}h5m.tO2x(d5i);g5l=h5m.ba6U(d5i,"d:action");E5J=a5f.t5y(g5l,"id");switch(a5f.t5y(g5l,"action")){case"likeall":var kY9P=this.hg8Y.bED9u();if(kY9P&&kY9P.length){var k5p=[];j5o.bf6Z(kY9P,function(q5v){if(!q5v.program)k5p.push(q5v)});window.subscribe(k5p,!1);this.V6P()}break;case"delete":this.hg8Y.mC0x(E5J);h5m.bg6a(d5i);break;case"like":var bj6d=this.hg8Y.bwZ7S(E5J);window.subscribe(bj6d,false);h5m.bg6a(d5i);this.V6P();break;case"share":bj6d=this.hg8Y.bwZ7S(E5J);!bj6d.program?l5q.ly9p({rid:bj6d.id,type:18,purl:bj6d.album.picUrl,name:bj6d.name,author:l5q.BR5W(bj6d.artists)}):l5q.ly9p({rid:bj6d.program.id,type:17,purl:bj6d.program.coverUrl,name:bj6d.program.name,author:(bj6d.program.radio||[]).name});h5m.bg6a(d5i);this.V6P();break;case"download":bj6d=this.hg8Y.bwZ7S(E5J);if(bj6d.program){l5q.OA9r({type:17,id:bj6d.program.id})}else{bEJ9A=l5q.rc1x(bj6d);if(bEJ9A==1e3){l5q.iR9I("因版权方要求，该歌曲不支持下载")}else{l5q.OA9r({type:18,id:bj6d.id})}}this.V6P();break;case"play":this.hg8Y.cfN7G(E5J);break;case"clear":this.hg8Y.qK1x();break;case"close":this.V6P();break}};b5g.hK8C=function(d5i){var JI7B=d5i["new"];if(JI7B){this.oK0x&&this.oK0x.cgo7h(JI7B);if(JI7B.program){this.Qs9j.src=JI7B.program.blurCoverUrl;this.le9V.innerText=JI7B.program.name}else{var bwP7I,NK9B;j5o.bf6Z(["pic_str","pic","picId_str","picId","picStr"],function(J5O){var q5v=(JI7B.album||{})[J5O];if(j5o.fT8L(q5v)){bwP7I=bwP7I||q5v}else{NK9B=NK9B||q5v}});this.Qs9j.src="//music.163.com/api/img/blur/"+(bwP7I||NK9B);this.le9V.innerText=JI7B.name}}this.yi4m()};b5g.qP1x=function(d5i){var cj6d=this.Qs9j.clientHeight,cgq7j=this.bO6I.parentNode.clientHeight;a5f.bc6W(this.Qs9j,"top",(cgq7j-cj6d)/2+"px")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,P6J=c5h("nej.ut"),b5g;if(!!P6J.bAa8S)return;P6J.bAa8S=NEJ.C();b5g=P6J.bAa8S.M6G(P6J.cP7I);b5g.bo6i=function(e5j){this.bp6j(e5j);this.bcH2x=e5j.to||bb6V;this.Tw0x=e5j.from||{};this.cxi1x=Math.max(0,parseInt(e5j.delay)||0)};b5g.bC6w=function(){this.bI6C();this.bg6a();if(!!this.Ty0x){window.clearTimeout(this.Ty0x);delete this.Ty0x}delete this.bcH2x;delete this.Tw0x};b5g.bJZ0x=function(bB6v){if(!this.Tw0x)return;if((""+bB6v).indexOf(".")>=0)bB6v=+(new Date);if(this.bJX0x(bB6v)){this.bg6a();return}this.dJ7C=requestAnimationFrame(this.bJZ0x.f5k(this))};b5g.bJX0x=bs6m;b5g.ex7q=function(){var cwZ1x=function(){this.Ty0x=window.clearTimeout(this.Ty0x);this.Tw0x.time=+(new Date);this.dJ7C=requestAnimationFrame(this.bJZ0x.f5k(this))};return function(){this.Ty0x=window.setTimeout(cwZ1x.f5k(this),this.cxi1x);return this}}();b5g.bg6a=function(){this.dJ7C=cancelRequestAnimationFrame(this.dJ7C);this.z5E("onstop");return this}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,j5o=c5h("nej.u"),P6J=c5h("nej.ut"),b5g,L5Q;if(!!P6J.HN7G)return;P6J.HN7G=NEJ.C();b5g=P6J.HN7G.M6G(P6J.bAa8S);L5Q=P6J.HN7G.ct6n;b5g.bo6i=function(e5j){this.bp6j(e5j);this.bcD2x=e5j.duration||200;this.cwX1x=1/(200*this.bcD2x);this.cwW1x(e5j.timing);this.cwV1x()};b5g.bC6w=function(){this.bI6C();delete this.NN9E;delete this.bAv8n};b5g.cwW1x=function(){var gW8O=/^cubic\-bezier\((.*?)\)$/i,kK9B=/\s*,\s*/i,bJT0x={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var cwr1x=function(C5H,r5w,k5p){k5p[r5w]=parseFloat(C5H)};return function(bcA2x){bcA2x=(bcA2x||"").toLowerCase();this.NN9E=bJT0x[bcA2x];if(gW8O.test(bcA2x)){this.NN9E=RegExp.$1.split(kK9B);j5o.bf6Z(this.NN9E,cwr1x)}if(!!this.NN9E)return;this.NN9E=bJT0x.ease}}();b5g.cwV1x=function(){var NP9G=this.NN9E,bAB8t=3*NP9G[0],bJR0x=3*(NP9G[2]-NP9G[0])-bAB8t,cwp1x=1-bAB8t-bJR0x,bAH8z=3*NP9G[1],bJQ0x=3*(NP9G[3]-NP9G[1])-bAH8z,cwl1x=1-bAH8z-bJQ0x;this.bAv8n={ax:cwp1x,ay:cwl1x,bx:bJR0x,by:bJQ0x,cx:bAB8t,cy:bAH8z}};b5g.cwf1x=function(){var bJP0x=function(bB6v,qr1x){return((qr1x.ax*bB6v+qr1x.bx)*bB6v+qr1x.cx)*bB6v};var cvZ0x=function(bB6v,qr1x){return((qr1x.ay*bB6v+qr1x.by)*bB6v+qr1x.cy)*bB6v};var cvT0x=function(bB6v,qr1x){return(3*qr1x.ax*bB6v+2*qr1x.bx)*bB6v+qr1x.cx};var cvJ0x=function(bB6v,bJL0x,qr1x){var t0,t1,t2,x2,d2,i;for(t2=bB6v,i=0;i<8;i++){x2=bJP0x(t2,qr1x)-bB6v;if(Math.abs(x2)<bJL0x)return t2;d2=cvT0x(t2,qr1x);if(Math.abs(d2)<1e-6)break;t2=t2-x2/d2}t0=0;t1=1;t2=bB6v;if(t2<t0)return t0;if(t2>t1)return t1;while(t0<t1){x2=bJP0x(t2,qr1x);if(Math.abs(x2-bB6v)<bJL0x)return t2;if(bB6v>x2)t0=t2;else t1=t2;t2=(t1-t0)*.5+t0}return t2};return function(dx7q){return cvZ0x(cvJ0x(dx7q/this.bcD2x,this.cwX1x,this.bAv8n),this.bAv8n)}}();b5g.bJX0x=function(bB6v){var dx7q=bB6v-this.Tw0x.time,Ae4i=this.cwf1x(dx7q),bn6h=j5o.LD8v(this.Tw0x.offset*(1-Ae4i)+this.bcH2x.offset*Ae4i,2),nP0x=!1;if(dx7q>=this.bcD2x){bn6h=this.bcH2x.offset;nP0x=!0}this.z5E("onupdate",{offset:bn6h});return nP0x};b5g.bg6a=function(){this.z5E("onupdate",{offset:this.bcH2x.offset});L5Q.bg6a.apply(this,arguments);return this}})();
(function(){var c5h=NEJ.P,P6J=c5h("nej.ut"),b5g;if(!!P6J.He6Y)return;P6J.He6Y=NEJ.C();b5g=P6J.He6Y.M6G(P6J.HN7G);b5g.bo6i=function(e5j){e5j=NEJ.X({},e5j);e5j.timing="easein";this.bp6j(e5j)}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),P6J=c5h("nej.ut"),zi4m;P6J.Hd6X=NEJ.C();zi4m=P6J.Hd6X.M6G(P6J.cP7I);zi4m.bo6i=function(e5j){this.bp6j(e5j);this.cJr4v=!!e5j.reset;this.RC9t=parseInt(e5j.delta)||0;this.jH9y=a5f.A5F(e5j.track);this.bCB8t=a5f.A5F(e5j.progress);this.bZ6T([[e5j.thumb,"mousedown",this.cFf3x.f5k(this)],[document,"mousemove",this.bCA8s.f5k(this)],[document,"mouseup",this.bCo8g.f5k(this)],[this.jH9y,"mousedown",this.bCy8q.f5k(this)]]);var fy8q=e5j.value;if(fy8q==null){fy8q=this.bCB8t.offsetWidth/this.jH9y.offsetWidth}this.gZ8R(fy8q)};zi4m.bC6w=function(){if(!!this.cJr4v)this.XX1x(0);this.bI6C()};zi4m.cFf3x=function(d5i){if(!!this.ij8b)return;h5m.bg6a(d5i);this.ij8b=h5m.jX9O(d5i);this.bOP1x=this.jH9y.offsetWidth};zi4m.bCA8s=function(d5i){if(!this.ij8b)return;var bn6h=h5m.jX9O(d5i),dx7q=bn6h-this.ij8b;this.ij8b=bn6h;this.XX1x(this.HO7H+dx7q/this.bOP1x);this.z5E("onslidechange",{ratio:this.HO7H})};zi4m.bCo8g=function(d5i){if(!this.ij8b)return;this.bCA8s(d5i);delete this.ij8b;delete this.bOP1x;this.z5E("onslidestop",{ratio:this.HO7H})};zi4m.bCy8q=function(d5i){var cLq4u=a5f.ir9i(this.jH9y).x,cHm3x=h5m.jX9O(d5i);this.XX1x((cHm3x-cLq4u+this.RC9t)/this.jH9y.offsetWidth);this.z5E("onslidestop",{ratio:this.HO7H})};zi4m.XX1x=function(fy8q){this.HO7H=Math.max(0,Math.min(1,fy8q));a5f.bc6W(this.bCB8t,"width",this.HO7H*100+"%")};zi4m.gZ8R=function(fy8q){if(!!this.ij8b)return;this.XX1x(fy8q)};zi4m.blr4v=function(fy8q){return this.HO7H}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),gJ8B=c5h("nm.ut");gJ8B.cgu7n=function(){var MG8y=function(bv6p,cm6g,ps1x,pt1x,zU4Y){if(ps1x<pt1x){var JK7D=Math.floor((ps1x+pt1x)/2);MG8y(bv6p,cm6g,ps1x,JK7D,zU4Y);MG8y(bv6p,cm6g,JK7D+1,pt1x,zU4Y);chi7b(bv6p,cm6g,ps1x,JK7D,pt1x,zU4Y)}};var chi7b=function(bv6p,cm6g,ps1x,JK7D,pt1x,zU4Y){var i=ps1x,j=JK7D+1,k=ps1x;while(i<=JK7D&&j<=pt1x){if(zU4Y(bv6p[i],bv6p[j])<=0){cm6g[k++]=bv6p[i++]}else{cm6g[k++]=bv6p[j++]}}while(i<=JK7D){cm6g[k++]=bv6p[i++]}while(j<=pt1x){cm6g[k++]=bv6p[j++]}for(i=ps1x;i<=pt1x;i++){bv6p[i]=cm6g[i]}};var chr7k=function(ho8g,bwK7D){return ho8g<bwK7D};return function(bv6p,zU4Y){if(!bv6p||bv6p.length==0)return bv6p;zU4Y=zU4Y||chr7k;MG8y(bv6p,new Array(bv6p.length),0,bv6p.length-1,zU4Y);return bv6p}}();gJ8B.bwH7A=function(){var gW8O=/\r\n|\r|\n/,kK9B=/\[(.*?)\]/gi,bAb8T={ar:"artist",ti:"track",al:"album",offset:"offset"},bEN9E=-1;var bzZ8R=function(m5r,hQ8I){var bv6p=[];hQ8I=hQ8I.replace(kK9B,function($1,$2){var bB6v=bzT8L.call(this,m5r,$2);if(bB6v!=null){bEN9E=bB6v;bv6p.push({time:bB6v,tag:$2});m5r.scrollable=!0}return""}.f5k(this)).trim();if(!bv6p.length){if(!hQ8I||hQ8I.length==0)return;bv6p.push({time:bEN9E}||{time:-1})}j5o.bf6Z(bv6p,function(q5v){q5v.lyric=hQ8I});var yo4s=m5r.lines;yo4s.push.apply(yo4s,bv6p)};var bzT8L=function(m5r,bB6v){var bv6p=bB6v.split(":"),ws3x=bv6p.shift(),J5O=bAb8T[ws3x];if(!!J5O){m5r[J5O]=bv6p.join(":");return null}ws3x=parseInt(ws3x);if(isNaN(ws3x)){return null}else{var bn6h=parseInt(m5r.offset)||0;return ws3x*60+parseFloat(bv6p.join("."))+bn6h/1e3}};var bzM7F=function(bzL7E,kt9k){return bzL7E.time-kt9k.time};return function(E5J,bq6k){var m5r={id:E5J,lines:[],scrollable:!1,source:bq6k};j5o.bf6Z((bq6k||"").trim().split(gW8O),bzZ8R.f5k(null,m5r));if(m5r.scrollable){gJ8B.cgu7n(m5r.lines,bzM7F);var r5w;for(var i=0;i<m5r.lines.length;i++){if(!!m5r.lines[i].lyric){r5w=i;break}}m5r.lines.splice(0,r5w)}return m5r}}();gJ8B.bEO9F=function(ww3x,beX3x){var bwE7x=gJ8B.bwH7A(0,ww3x),bwD7w=gJ8B.bwH7A(0,beX3x);if(bwE7x.scrollable&&bwD7w.scrollable){j5o.bf6Z(bwE7x.lines,function(q5v){var beW3x=getTranslate(q5v.time);if(beW3x){q5v.lyric=q5v.lyric+"<br>"+beW3x.lyric}})}return bwE7x;function getTranslate(bB6v){var r5w=j5o.dt7m(bwD7w.lines,function(q5v){return q5v.time==bB6v});if(r5w!=-1){return bwD7w.lines[r5w]}}}})();
(function(){var P6J=NEJ.P("nej.ut"),bJH0x;if(!!P6J.uU3x)return;P6J.uU3x=NEJ.C();bJH0x=P6J.uU3x.M6G(P6J.HN7G);bJH0x.bo6i=function(e5j){e5j=NEJ.X({},e5j);e5j.timing="linear";this.bp6j(e5j)}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),v5A=c5h("nej.j"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),p5u=c5h("nm.d");var bET9K=function(i5n){if(i5n.errorType==6||i5n.errorType==7||i5n.errorType==8){if(!l5q.gQ8I())return;l5q.jy9p({txt:"m-report-point",title:"提示",onaction:bEU9L.f5k(this,i5n)})}else{bEU9L(i5n)}};var cix7q=function(d5i){var g5l=h5m.ba6U(d5i,"d:action");if(a5f.t5y(g5l,"action")=="feedLyric"){h5m.bg6a(d5i);var cf6Z=a5f.t5y(g5l,"code"),i5n={songId:a5f.t5y(g5l,"id"),errorType:cf6Z};bET9K(i5n)}};var bEU9L=function(i5n,d5i){if(!d5i||d5i.action=="ok"){v5A.be6Y("/api/v1/feedback/lyric",{type:"json",method:"post",data:j5o.cr6l(i5n),onload:function(d5i){if(d5i.code==200){n5s.Z6T.I5N({tip:"提交成功"});if(j5o.gU8M(i5n.onok)){i5n.onok()}}else if(d5i.code==-2){l5q.hk8c({title:"提示",message:"您的积分不足",btnok:"赚积分",action:function(U6O){if(U6O=="ok"){location.dispatch2("/store/gain/index")}}})}else{n5s.Z6T.I5N({type:2,tip:"提交失败"})}}})}};l5q.bEV9M=function(g5l){var g5l=g5l||document.body,eT8L=cix7q.f5k(this);h5m.s5x(g5l,"click",eT8L);return{destroy:function(){h5m.oq0x(g5l,"click",eT8L)}}};l5q.cRF6z=function(i5n){bET9K(i5n)}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),P6J=c5h("nej.p"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),dM7F=c5h("nm.ut"),y5D=c5h("nm.w"),b5g,L5Q;var bwB7u={};y5D.bEI9z=NEJ.C();b5g=y5D.bEI9z.M6G(H5M.cP7I);b5g.bo6i=function(e5j){this.bp6j(e5j);this.bO6I=e5j.nlist;this.QK9B=e5j.nmenu;this.bEY9P=e5j.nask;this.wg3x={track:e5j.nscroll,slide:a5f.dg7Z(e5j.nscroll)[0],content:this.bO6I,speed:4};this.bwz7s=this.Jd7W.f5k(this);this.bZ6T([[e5j.nask,"click",this.cje7X.f5k(this)],[this.wg3x.slide,"mousedown",this.bhu3x.f5k(this)],[document,"mouseup",this.bht3x.f5k(this)],[y5D.gj8b,"playaction",this.ys4w.f5k(this)]]);if(P6J.dB7u.browser!="firefox"){this.bZ6T([[this.bO6I,"mousewheel",this.bwz7s]])}else{this.bO6I.addEventListener("DOMMouseScroll",this.bwz7s,false)}this.jq9h=y5D.Ad4h.B5G(this.wg3x);this.bww7p=l5q.bEV9M(this.bO6I);this.by6s=y5D.gj8b.fR8J()};b5g.bC6w=function(){this.bI6C();delete this.Ci5n;delete this.ub2x;delete this.beQ3x;if(this.bww7p){this.bww7p.destroy();delete this.bww7p}if(P6J.dB7u.browser=="firefox"){this.bO6I.removeEventListener("DOMMouseScroll",this.bwz7s)}a5f.bc6W(this.QK9B,"display","none")};b5g.cje7X=function(){if(a5f.dl7e(this.QK9B,"display")=="none"){a5f.bc6W(this.QK9B,"display","block")}else{a5f.bc6W(this.QK9B,"display","none")}};b5g.bwr7k=function(){var ii8a=0;return function(QQ9H){clearTimeout(ii8a);this.beQ3x=true;if(this.ub2x){this.ub2x.V6P();delete this.ub2x}if(!QQ9H){ii8a=setTimeout(function(){delete this.beQ3x}.f5k(this),3e3)}}}();b5g.Jd7W=function(){this.bwr7k()};b5g.bhu3x=function(){this.bwr7k(true)};b5g.ys4w=function(d5i){if(d5i.action=="timeupdate"){this.bFd9U(d5i.data.time,true)}};b5g.bFd9U=function(bB6v,cjS8K){if(!(this.Ci5n&&this.Ci5n.scrollable)||this.beQ3x)return;var i=this.Ci5n.lines.length-1,ii,dx7q,r5w=-1,bFe9V=0,gq8i=0;for(;i>=0;i--){ii=this.Ci5n.lines[i];dx7q=ii.time-bB6v;if(dx7q<0&&(i>0||dx7q<=-2)){r5w=i;break}}for(var j=0,jj;j<this.bwq7j.length;j++){jj=this.bwq7j[j];if(j<r5w){bFe9V+=jj.clientHeight}if(r5w==j){a5f.w5B(jj,"z-sel")}else{a5f.x5C(jj,"z-sel")}}if(r5w<0||a5f.ir9i(this.bwq7j[r5w],this.bO6I).y<96){gq8i=0}else{gq8i=bFe9V-96}if(Math.abs(gq8i-this.bO6I.scrollTop)<=4||this.ub2x)return;if(cjS8K){var cC7v={from:{offset:this.bO6I.scrollTop},to:{offset:gq8i},duration:500,onupdate:function(d5i){this.bO6I.scrollTop=d5i.offset;this.jq9h.Ll8d(this.bO6I.scrollTop/(this.bO6I.scrollHeight-this.bO6I.clientHeight))}.f5k(this),onstop:function(){if(this.ub2x){this.ub2x.V6P();delete this.ub2x}}.f5k(this)};this.ub2x=H5M.uU3x.B5G(cC7v);this.ub2x.ex7q()}else{this.bO6I.scrollTop=gq8i;this.jq9h.Ll8d(this.bO6I.scrollTop/(this.bO6I.scrollHeight-this.bO6I.clientHeight))}};b5g.cgo7h=function(bj6d){this.beP3x=bj6d;delete this.Ci5n;if(bj6d&&!bj6d.program){var X6R="/api/song/lyric",bw6q={id:bj6d.id,lv:-1,tv:-1};if(bwB7u[bj6d.id]){this.bwo7h(bwB7u[bj6d.id])}else{v5A.be6Y(X6R,{sync:false,type:"json",query:bw6q,method:"get",onload:this.bwo7h.eK7D(this,bj6d.id),onerror:this.bwo7h.f5k(this)})}a5f.x5C(this.bEY9P,"f-hide")}else{a5f.w5B(this.bEY9P,"f-hide");this.bhe3x({})}};b5g.bwo7h=function(d5i,E5J){if(d5i.code==200){if(E5J){bwB7u[E5J]=d5i}var ww3x=d5i.lrc||{},beW3x=d5i.tlyric||{};if(!ww3x.lyric){this.bhe3x(d5i)}else{this.Ci5n=dM7F.bEO9F(ww3x.lyric,beW3x.lyric);d5i.scrollable=this.Ci5n.scrollable;a5f.dw7p(this.bO6I,"m-lyric-line",{id:this.beP3x.id,lines:this.Ci5n.lines,scrollable:this.Ci5n.scrollable});this.bwq7j=a5f.D5I(this.bO6I,"j-flag")}d5i.songId=this.beP3x.id;a5f.dw7p(this.QK9B,"m-player-lyric-ask",d5i)}else{}if(this.ub2x){this.ub2x.V6P();delete this.ub2x}this.jq9h.rh1x();this.bFd9U(this.by6s.biQ3x()||0,false)};b5g.bht3x=function(){if(this.beQ3x){this.bwr7k()}};b5g.bhe3x=function(i5n){if(this.beP3x.program){this.bO6I.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">电台节目，无歌词</span></div>'}else if(i5n.nolyric){this.bO6I.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">纯音乐，无歌词</span></div>'}else{this.bO6I.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">暂时没有歌词</span><a data-action="feedLyric" data-code="6"'+"data-id="+this.beP3x.id+' href="#" class="f-tdu">求歌词</a></div>'}this.jq9h&&this.jq9h.rh1x()}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ds7l=c5h("nej.p"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),dM7F=c5h("nm.u"),y5D=c5h("nm.w"),N6H=c5h("nm.m.f"),dL7E=c5h("player"),b5g,L5Q;N6H.QS9J=NEJ.C();b5g=N6H.QS9J.M6G(H5M.cP7I);b5g.cA6u=function(){this.cE7x();this.Cr5w=a5f.A5F("g_player");this.lN0x=this.Cr5w.parentNode;var k5p=a5f.D5I(this.Cr5w,"j-flag");this.hE8w=k5p[0];this.lM9D=k5p[1];this.le9V=k5p[2];this.MN8F=k5p[3];this.rm1x=k5p[4];this.hM8E=k5p[5];k5p=a5f.dg7Z(k5p[6]);this.Eq6k=k5p[0];this.wC3x=k5p[1];this.bFi9Z=k5p[2];this.bfh3x=k5p[3];this.bwj7c=k5p[4];this.bwi7b=a5f.dg7Z(this.bfh3x)[0];this.zl4p=l5q.bxO7H();this.beJ3x(3e3);this.Rf9W();this.cmw8o();this.cmI8A();this.bFk9b();this.bwd7W();dL7E.setLike=this.bFm9d.f5k(this);h5m.s5x(this.lN0x,"click",this.bN6H.f5k(this));h5m.s5x(y5D.gj8b,"playaction",this.ys4w.f5k(this));h5m.s5x(y5D.uK3x,"queuechange",this.yi4m.f5k(this));h5m.s5x(y5D.uK3x,"playchange",this.hK8C.f5k(this));h5m.s5x(this.lN0x,ds7l.dB7u.browser=="ie"?"mouseleave":"mouseout",this.bFn9e.f5k(this,!1));h5m.s5x(this.lN0x,ds7l.dB7u.browser=="ie"?"mouseenter":"mouseover",this.bFn9e.f5k(this,!0));h5m.s5x(document,"keyup",this.bFo9f.f5k(this));h5m.s5x(window,"iframeclick",this.uw3x.f5k(this));h5m.s5x(document,"click",this.uw3x.f5k(this));h5m.s5x(this.Eq6k,"click",h5m.bg6a.f5k(h5m));dL7E.hotkeys=this.bFo9f.f5k(this);this.bFp9g=j5o.oV0x()};b5g.bwd7W=function(){var MQ8I=a5f.A5F("g-topbar"),cL7E=this.Cr5w.offsetWidth,coE9v=this.lN0x.offsetWidth;if(!MQ8I)return;a5f.bc6W(this.Cr5w,"marginLeft",-(coE9v-MQ8I.offsetWidth+this.Cr5w.offsetWidth)/2+"px")};b5g.bFk9b=function(){if(this.zl4p.lock){a5f.x5C(this.lN0x,"m-playbar-unlock");a5f.w5B(this.lN0x,"m-playbar-lock");window.g_bottomBarHeight=47}else{a5f.w5B(this.lN0x,"m-playbar-unlock");a5f.x5C(this.lN0x,"m-playbar-lock");window.g_bottomBarHeight=0}};b5g.Rf9W=function(){var k5p=a5f.dg7Z(this.MN8F);this.Rh9Y=k5p[0];this.beD2x=a5f.dg7Z(k5p[1])[0];this.MT8L=H5M.Hd6X.B5G({track:this.MN8F,thumb:this.beD2x,progress:k5p[1],onslidestop:function(d5i){this.bFs9j=false;this.by6s.pD1x(this.by6s.bkI4M()*d5i.ratio)}.f5k(this),onslidechange:function(d5i){this.bFs9j=true;this.bvR7K({time:d5i.ratio*this.by6s.bkI4M(),duration:this.by6s.bkI4M()})}.f5k(this)})};b5g.cmI8A=function(){var k5p=a5f.D5I(this.Eq6k,"j-t"),fy8q=k5p[1],zh4l=this.zl4p.volume;if(zh4l==null){zh4l=.8}this.yC4G=H5M.KI8A.B5G({track:k5p[0],slide:k5p[2],onchange:function(d5i){var C5H=1-d5i.y.rate,cj6d=93*C5H;a5f.bc6W(fy8q,"height",cj6d+"px");cj6d>0?a5f.x5C(this.wC3x,"icn-volno"):a5f.w5B(this.wC3x,"icn-volno");this.by6s.nh0x(C5H);this.zl4p.volume=C5H;l5q.It7m(this.zl4p)}.f5k(this)});this.yC4G.gZ8R({x:0,y:1-zh4l})};b5g.cmw8o=function(){var bw6q=j5o.gR8J(location.hash.slice(1))||{},u5z=bw6q["__media"]||"auto";if(this.zl4p.useFlash){this.zl4p.useFlash=false;l5q.It7m(this.zl4p)}this.by6s=y5D.gj8b.fR8J({media:u5z});this.hg8Y=y5D.uK3x.fR8J();dL7E.addTo=function(ji9Z,tI2x,gt8l){this.hg8Y.cfh6b(JSON.parse(JSON.stringify(ji9Z)),tI2x,gt8l)}.f5k(this);dL7E.tipPlay=this.bvQ7J.f5k(this);dL7E.getPlaying=function(){return{track:this.hg8Y.ta2x(),playing:this.by6s.uq3x()}}.f5k(this);dL7E.pause=this.by6s.fJ8B.f5k(this.by6s);var hz8r=this.hg8Y.ta2x();if(hz8r){this.bFu9l(hz8r)}this.bFv9m(this.hg8Y.ceZ6T());this.bFw9n();this.cqe9V()};b5g.yi4m=function(){var ii8a=0;return function(d5i){if(d5i.cmd=="play"||d5i.cmd=="addto"){this.bvQ7J(d5i.cmd=="play"?"已开始播放":"已添加到播放列表")}this.bFw9n()}}();b5g.hK8C=function(d5i){var bj6d=d5i["new"];this.bFu9l(bj6d);if(this.by6s.uq3x()){document.title=decodeURIComponent("%E2%96%B6%20")+bj6d.name}h5m.z5E(window,"playchange",{trackId:bj6d.id,track:bj6d})};b5g.bN6H=function(d5i){var g5l=h5m.ba6U(d5i,"d:action"),U6O=a5f.t5y(g5l,"action"),oM0x=h5m.ba6U(d5i,"a:href");if(oM0x&&oM0x.tagName.toLocaleLowerCase()=="a"&&/^http/.test(oM0x.href)){this.V6P();return}else{h5m.bg6a(d5i)}switch(U6O){case"lock":this.zl4p.lock=!a5f.bE6y(this.lN0x,"m-playbar-lock");l5q.It7m(this.zl4p);this.bFk9b();break;case"prev":this.hg8Y.AD5I();break;case"next":this.hg8Y.oC0x();break;case"play":this.by6s.ex7q();break;case"pause":this.by6s.fJ8B();break;case"like":var bj6d=this.hg8Y.ta2x();if(bj6d){window.subscribe(bj6d,bj6d.program)}!bj6d.program&&this.tT2x&&this.tT2x.V6P();break;case"share":var bj6d=this.hg8Y.ta2x();if(bj6d.program&&bj6d.program.auditStatus==1){l5q.iR9I("由于版权问题，该节目暂时无法分享。")}else{if(bj6d){!bj6d.program?l5q.ly9p({rid:bj6d.id,type:18,purl:bj6d.album.picUrl,name:bj6d.name,author:l5q.BR5W(bj6d.artists)}):l5q.ly9p({rid:bj6d.program.id,type:17,purl:bj6d.program.coverUrl,name:bj6d.program.name,author:(bj6d.program.radio||[]).name})}this.tT2x&&this.tT2x.V6P()}break;case"mode":this.bFv9m(this.hg8Y.cel6f(),true);break;case"volume":h5m.bg6a(d5i);if(this.Eq6k.style.visibility!="hidden"){a5f.bc6W(this.Eq6k,"visibility","hidden")}else{a5f.bc6W(this.Eq6k,"visibility","visible")}break;case"panel":h5m.bg6a(d5i);if(!this.tT2x){this.tT2x=N6H.bEF9w.B5G({parent:this.lN0x,onclose:function(){delete this.tT2x;this.beJ3x()}.f5k(this)})}else{if(this.tT2x){this.tT2x.V6P();delete this.tT2x}}break}};b5g.bvR7K=function(d5i){this.rm1x.innerHTML=l5q.fu8m("<em>{0}</em> / {1}",l5q.lY0x(d5i.time),l5q.lY0x(d5i.duration))};b5g.bFv9m=function(eV8N,cT7M){var bA6u={2:{icn:"icn-one",title:"单曲循环"},4:{icn:"icn-loop",title:"循环"},5:{icn:"icn-shuffle",title:"随机"}},bm6g=bA6u[eV8N];a5f.fo8g(this.bFi9Z,"icn-one icn-loop icn-shuffle",bm6g.icn);this.bwj7c.innerText=this.bFi9Z.title=bm6g.title;clearTimeout(this.cqk9b);if(cT7M){a5f.bc6W(this.bwj7c,"display","");this.cqk9b=setTimeout(function(){a5f.bc6W(this.bwj7c,"display","none")}.f5k(this),2e3)}};b5g.bFm9d=function(df7Y){var hz8r=this.hg8Y.ta2x();if(hz8r&&hz8r.program&&hz8r.program.id==df7Y.id){hz8r.program.liked=df7Y.liked;this.hM8E.title="赞";if(df7Y.liked){a5f.fo8g(this.hM8E,"icn-zan","icn-yizan")}else{a5f.fo8g(this.hM8E,"icn-yizan","icn-zan")}this.hg8Y.bfo3x()}};b5g.bFu9l=function(bj6d){var bx6r;a5f.bc6W(this.Rh9Y,"width",0);this.bvR7K(0);this.MT8L.gZ8R(0);var windowParent=window.parent?window.parent:window;var GDegradeConfig={degrade:false};try{GDegradeConfig=windowParent["GDegradeConfig"]}catch(e){}if(bj6d){bx6r=this.cqn9e(bj6d);if(bj6d.program){if(GDegradeConfig.degrade){a5f.fo8g(this.hM8E,"icn-add icn-zan icn-yizan","f-hide")}else{a5f.fo8g(this.hM8E,"icn-add","icn-zan");this.hM8E.title="赞";v5A.kU9L(this.rn1x);this.rn1x=v5A.be6Y("/api/dj/program/detail",{type:"json",query:{id:bj6d.program.id},onload:function(d5i){if(d5i.code==200){this.bFm9d(d5i.program)}}.f5k(this)})}}else{a5f.fo8g(this.hM8E,"icn-zan icn-yizan f-hide","icn-add");this.hM8E.title="收藏"}this.lM9D.innerHTML=l5q.fu8m('<img src="{0}?param=34y34"><a href="{1}" hidefocus="true" class="mask"></a>',bx6r.cover,bx6r.titleUrl);a5f.dw7p(this.le9V,"m-player-playinfo",bx6r);this.cqq9h(bj6d)}};b5g.bFw9n=function(){var k5p=a5f.dg7Z(this.bfh3x);k5p[1].innerText=this.hg8Y.lS0x()};b5g.cqn9e=function(bj6d){var m5r={duration:bj6d.duration,cover:"http://s4.music.126.net/style/web2/img/default_album.jpg",source:bj6d.source};if(bj6d.program){m5r.type="program";m5r.name=j5o.dQ7J(bj6d.program.name);m5r.cover=bj6d.program.coverUrl;m5r.titleUrl="/program?id="+bj6d.program.id;m5r.artistHtml=l5q.fu8m('<a hidefocus="true" href="/radio?id={0}" title="{1}">{1}</a>',bj6d.program.radio.id,j5o.dQ7J(bj6d.program.radio.name))}else{m5r.type="song";m5r.name=bj6d.name;m5r.mvid=bj6d.mvid;if(!bj6d.album){bj6d.album={}}if(bj6d.album.pic&&bj6d.album.picUrl){m5r.cover=bj6d.album.picUrl}m5r.titleUrl="/song?id="+bj6d.id;m5r.artistHtml=l5q.sX2x(bj6d.artists)}return m5r};b5g.cqq9h=function(bj6d){try{var mediaSession=window.navigator.mediaSession;var MediaMetadata=window.MediaMetadata;var cqu9l=(bj6d.artists||[]).map(function(ia8S){return(ia8S||{}).name}).join(" / ");var cqD9u=bj6d.program?((bj6d.program||{}).radio||{}).name:(bj6d.album||{}).name;var oZ0x=bj6d.program?((bj6d.program||{}).radio||{}).picUrl:(bj6d.album||{}).picUrl;mediaSession.metadata=new MediaMetadata({title:bj6d.name,artist:cqu9l,album:cqD9u,artwork:[{src:oZ0x+"?param=200y200",sizes:"200x200",type:"image/jpeg"}]})}catch(e){}};b5g.ys4w=function(d5i){var i5n=d5i.data;switch(d5i.action){case"play":a5f.w5B(this.hE8w,"pas");a5f.t5y(this.hE8w,"action","pause");v5A.gN8F("playerid",this.bFp9g);var bj6d=this.hg8Y.ta2x();if(bj6d){document.title=decodeURIComponent("%E2%96%B6%20")+bj6d.name}h5m.z5E(window,"playstatechange",d5i);break;case"pause":a5f.x5C(this.hE8w,"pas");a5f.t5y(this.hE8w,"action","play");document.title=this.cqQ9H()||"网易云音乐";break;case"timeupdate":if(this.bFs9j)return;var hI8A=v5A.gN8F("playerid");if(hI8A&&hI8A!==this.bFp9g){this.by6s.fJ8B()}this.MT8L.gZ8R(i5n.time/i5n.duration);this.bvR7K(i5n);break;case"progress":a5f.bc6W(this.Rh9Y,"width",i5n.loaded*100/i5n.total+"%");break;case"error":this.bvQ7J("播放失败");a5f.x5C(this.beD2x,"z-load");break;case"playing":a5f.x5C(this.beD2x,"z-load");break;case"waiting":a5f.w5B(this.beD2x,"z-load");break}};b5g.bvQ7J=function(){var ii8a=0;return function(dW7P){if(dW7P){this.bwi7b.innerText=dW7P;a5f.bc6W(this.bwi7b,"display","");clearTimeout(ii8a);ii8a=setTimeout(function(){a5f.bc6W(this.bwi7b,"display","none")}.f5k(this),2e3);this.rr1x(true);this.beJ3x(2e3)}}}();b5g.bFn9e=function(NQ9H,d5i){if(!this.tT2x){if(NQ9H){if(!l5q.Pa9R(this.lN0x,d5i.relatedTarget||d5i.fromElement)){this.rr1x(true)}}else{if(!l5q.Pa9R(this.lN0x,d5i.relatedTarget||d5i.toElement)){this.beJ3x()}}}};b5g.beJ3x=function(uH3x){clearTimeout(this.bFy9p);this.bFy9p=setTimeout(function(){if(!this.zl4p.lock){this.rr1x(false)}}.f5k(this),uH3x||500)};b5g.rr1x=function(){var Bs5x,beu2x=true;return function(mW0x){clearTimeout(this.bFy9p);if(Bs5x||mW0x==beu2x)return;beu2x=mW0x;Bs5x=H5M.He6Y.B5G({to:{offset:mW0x?-53:-7},from:{offset:mW0x?-7:-53},onstop:function(){Bs5x.V6P();Bs5x=null},onupdate:function(d5i){a5f.bc6W(this.lN0x,"top",d5i.offset+"px")}.f5k(this),duration:mW0x?100:350});Bs5x.ex7q()}}();b5g.bFo9f=function(d5i){if(d5i.keyCode==80&&!l5q.bWh4l()){this.by6s.uq3x()?this.by6s.fJ8B():this.by6s.ex7q()}else if(d5i.ctrlKey){switch(d5i.keyCode){case 37:this.hg8Y.AD5I();break;case 39:this.hg8Y.oC0x();break}}};b5g.cqe9V=function(){try{var mediaSession=window.navigator.mediaSession;mediaSession.setActionHandler("previoustrack",this.hg8Y.AD5I.bind(this.hg8Y));mediaSession.setActionHandler("nexttrack",this.hg8Y.oC0x.bind(this.hg8Y))}catch(e){}};b5g.uw3x=function(){a5f.bc6W(this.Eq6k,"visibility","hidden");this.tT2x&&this.tT2x.V6P()};b5g.cqQ9H=function(){var eP7I=a5f.A5F("g_iframe");if(eP7I){return eP7I.contentWindow.document.title}else{return""}};b5g.I5N=function(){window.g_bottomBarShow=true;a5f.bc6W(this.lN0x,"visibility","visible")};b5g.br6l=function(){window.g_bottomBarShow=false;this.by6s.fJ8B();a5f.bc6W(this.lN0x,"visibility","hidden")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),bd6X=c5h("nej.ui"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),b5g;y5D.PQ9H=NEJ.C();b5g=y5D.PQ9H.M6G(bd6X.er7k);b5g.bo6i=function(e5j){this.bp6j(e5j);if(e5j.txt){this.o5t.innerHTML=a5f.il8d(e5j.txt)}else if(e5j.html){this.o5t.innerHTML=e5j.html}this.DB5G=e5j.captchaId;var k5p=a5f.D5I(this.o5t,"j-flag");this.eZ8R=k5p[0];this.ek7d=k5p[1];this.bZ6T([[this.ek7d,"click",this.btj6d.f5k(this)],[this.eZ8R,"keypress",this.cIa3x.f5k(this)]]);this.ek7d.src="/captcha?id="+this.DB5G};b5g.bC6w=function(){this.bI6C()};b5g.btj6d=function(){v5A.be6Y("/api/image/captcha/verify/hf",{type:"json",query:{id:this.DB5G,captcha:0},onload:function(m5r){if(m5r.code==200){this.DB5G=m5r.captchaId;this.ek7d.src="/captcha?id="+this.DB5G}}.f5k(this)})};b5g.cIa3x=function(d5i){if(d5i.keyCode==13)this.z5E("onaction",d5i)};b5g.IP7I=function(){var m5r={},cf6Z=this.eZ8R.value;if(!cf6Z){m5r.message="请输入验证码"}else{v5A.be6Y("/api/image/captcha/verify/hf",{type:"json",sync:true,query:{id:this.DB5G,captcha:cf6Z},onload:cbVerify.f5k(this),onerror:cbVerify.f5k(this)})}return m5r;function cbVerify(d5i){if(d5i.code==200){if(d5i.result){m5r.success=true}else{m5r.message="验证码错误";if(d5i.captchaId){this.DB5G=d5i.captchaId;this.ek7d.src="/captcha?id="+this.DB5G}}}else{m5r.message="验证出错"}}};b5g.gn8f=function(){return this.eZ8R.value};b5g.JG7z=function(){return this.DB5G};b5g.w5B=function(jp9g){a5f.w5B(this.eZ8R,jp9g)};b5g.x5C=function(jp9g){a5f.x5C(this.eZ8R,jp9g)}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,h5m=c5h("nej.v"),a5f=c5h("nej.e"),v5A=c5h("nej.j"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),bH6B=c5h("nej.ui"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),b5g,L5Q;n5s.bto6i=NEJ.C();b5g=n5s.bto6i.M6G(n5s.ee7X);L5Q=n5s.bto6i.ct6n;b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.eZ8R=k5p[0];this.dY7R=k5p[1];h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.cd6X=function(){this.cc6W="m-captcha-layer"};b5g.bo6i=function(e5j){e5j.clazz="m-layer-captcha";e5j.parent=e5j.parent||document.body;e5j.title="输入验证码";e5j.draggable=!0;e5j.destroyable=true;e5j.mask=true;this.bp6j(e5j);this.da7T=y5D.PQ9H.B5G({parent:this.eZ8R,html:'<input class="u-txt txt f-fl j-flag"/><img class="captcha f-fl j-flag" src=""/>',captchaId:e5j.captchaId})};b5g.bC6w=function(){this.z5E("ondestroy");this.bI6C();if(this.da7T){this.da7T.V6P();delete this.da7T}};b5g.bN6H=function(d5i){var g5l=h5m.ba6U(d5i,"d:action");switch(a5f.t5y(g5l,"action")){case"ok":var bx6r=this.da7T.IP7I();if(!bx6r.success){this.dY7R.innerHTML='<i class="u-icn u-icn-25"></i>'+bx6r.message;a5f.x5C(this.dY7R,"f-hide")}else{a5f.w5B(this.dY7R,"f-hide");this.br6l()}break;case"cc":this.br6l();break}};l5q.bLM0x=function(e5j){n5s.bto6i.B5G(e5j).I5N()}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),v5A=c5h("nej.j"),bb6V=c5h("nej.o"),j5o=c5h("nej.u"),h5m=c5h("nej.v"),bH6B=c5h("nej.ui"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),b5g,L5Q;n5s.rj1x=NEJ.C();b5g=n5s.rj1x.M6G(n5s.ee7X,!0);b5g.cA6u=function(){this.cE7x()};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.bts6m=k5p[0];h5m.s5x(k5p[1],"click",this.btt6n.f5k(this))};b5g.cd6X=function(){this.cc6W="m-layer-tip"};b5g.bo6i=function(e5j){e5j.parent=e5j.parent||document.body;this.bp6j(e5j);this.bts6m.innerHTML=e5j.mesg||""};b5g.bC6w=function(){this.bI6C()};b5g.btt6n=function(d5i){this.z5E("onnotice");this.br6l()};n5s.nV0x=function(e5j){if(this.Ak4o){this.Ak4o.V6P();delete this.Ak4o}this.Ak4o=n5s.rj1x.B5G(e5j);this.Ak4o.I5N()}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,h5m=c5h("nej.v"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),a5f=c5h("nej.e"),j5o=c5h("nej.u"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),lq9h=c5h("nm.ctl"),b5g;if(lq9h.btv6p)return;lq9h.btv6p=NEJ.C();b5g=lq9h.btv6p.M6G(H5M.cP7I);var cHS3x=location.host=="music.163.com";if(cHS3x){var bV6P={host:"s2.music.126.net",scaptcha_server:"captcha.aq.163.com/v1_5",scaptcha_product_key:"nj2vr7swvutssrtbj16kzfentkikkvbf",captchaId:"73a18dc827b24b18ad0783701a75277d"}}else{var bV6P={host:location.host,scaptcha_server:"captcha.aq.163.com/v1_5",scaptcha_product_key:"nj2vr7swvutssrtbj16kzfentkikkvbf",captchaId:"73a18dc827b24b18ad0783701a75277d"}}b5g.bLL0x=function(cHI3x){return location.protocol+"//"+bV6P.host+cHI3x};b5g.cHH3x=function(J5O){return NEJ.Q(bV6P,J5O)};c5h("ctl").env=lq9h.btv6p.fR8J()})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,P6J=c5h("nej.p"),a5f=c5h("nej.e"),h5m=c5h("nej.v"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),b5g;if(y5D.btA6u)return;y5D.btA6u=NEJ.C();b5g=y5D.btA6u.M6G(H5M.cP7I);b5g.cA6u=function(){var time=parseInt(+(new Date)/6e4,10);this.bLK0x=[location.protocol+"//cstaticdun.126.net/load.min.js?t="+time];if(P6J.dB7u&&P6J.dB7u.engine=="trident"&&nej.p.dB7u.release-5<0){this.bLK0x.unshift(ctl.env.bLL0x("/static/web2/3rd/scaptcha/ie6support.js"))}this.cE7x()};b5g.bo6i=function(e5j){this.bp6j(e5j);this.da7T="";this.hB8t=e5j.parent;this.mP0x={captchaId:e5j.captchaId,width:e5j.width};this.Qc9T(0);this.cHt3x()};b5g.bC6w=function(){delete this.btG6A;delete this.mP0x;delete this.hB8t;delete this.da7T;this.bI6C()};b5g.cHt3x=function(){if(this.btG6A>0)return;this.Qc9T(1);this.cHs3x()};b5g.cHs3x=function(){var bLJ0x=this.bLK0x.shift();if(!bLJ0x){this.Qc9T(2);this.hw8o()}else{v5A.cIm3x(bLJ0x,{onloaded:this.cHo3x.f5k(this),onerror:this.Qc9T.f5k(this,3)})}};b5g.cHo3x=function(){if(j5o.gU8M(window.initNECaptcha)){this.Qc9T(2);window.initNECaptcha({captchaId:this.mP0x.captchaId,element:this.hB8t,mode:"float",width:this.mP0x.width,onVerify:this.vo3x.f5k(this)},function(instance){this.fa8S=instance}.f5k(this),function(err){console.log("易盾sdk初始化失败",err)}.f5k(this))}};b5g.Qc9T=function(bLH0x){this.btG6A=bLH0x;this.z5E("onloadstatechange",{loadState:bLH0x})};b5g.vo3x=function(err,data){if(err){return}setTimeout(this.cHl3x.f5k(this,data),0)};b5g.cHl3x=function(d5i){if(d5i.validate){this.da7T=d5i.validate}else{this.da7T=""}this.z5E("onverify",{success:true})};b5g.hw8o=function(){if(this.btG6A==2){if(this.fa8S&&j5o.gU8M(this.fa8S.refresh)){this.da7T="";this.fa8S.refresh()}}};b5g.MA8s=function(){return this.da7T}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),y5D=c5h("nm.w"),b5g,L5Q;n5s.Ip7i=NEJ.C();b5g=n5s.Ip7i.M6G(n5s.ee7X);L5Q=n5s.Ip7i.ct6n;b5g.bo6i=function(e5j){this.bp6j(e5j);this.dy7r=e5j;this.da7T=y5D.btA6u.B5G({parent:this.MB8t,captchaId:ctl.env.cHH3x("captchaId"),width:220,onverify:this.vo3x.f5k(this)})};b5g.bC6w=function(){this.bI6C();if(this.da7T){this.da7T.V6P();delete this.da7T}};b5g.cd6X=function(){this.cc6W="ntp-setnickname"};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"js-flag");this.fi8a=k5p.shift();a5f.gX8P(this.fi8a,"holder");h5m.s5x(this.fi8a,"focus",this.gO8G.f5k(this));h5m.s5x(this.fi8a,"keypress",this.Hr6l.f5k(this));h5m.s5x(this.fi8a,"keyup",this.btX6R.f5k(this));this.MB8t=k5p.shift();this.dY7R=k5p.shift();this.cy6s=k5p.shift();h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.I5N=function(){L5Q.I5N.apply(this,arguments);this.bY6S(false);this.cQ7J(false);this.fi8a.value="";this.da7T.hw8o()};b5g.gO8G=function(){a5f.x5C(this.fi8a,"u-txt-err")};b5g.Hr6l=function(d5i){if(d5i.keyCode==13)this.pd0x()};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"ok":this.pd0x(d5i);break}};b5g.pd0x=function(d5i){h5m.co6i(d5i);if(this.cQ7J())return;if(!(this.st1x=this.bfn3x()))return;var jD9u=this.da7T.MA8s();if(!jD9u.trim())return this.bY6S("请输入验证码","captcha");if(this.dy7r.onok){this.cQ7J(true);this.dy7r.onok({nickname:this.st1x,dragPwd:jD9u})}};b5g.vo3x=function(d5i){if(d5i.success){this.bY6S(false);if(this.fi8a.value.trim()){this.pd0x()}}else{this.bY6S("验证码错误","captcha")}};b5g.bfn3x=function(){var ju9l=this.fi8a.value.trim(),ou0x=ju9l.replace(/[^\x00-\xff]/g,"**");if(!ju9l)return this.bY6S("请输入昵称","nickname");if(ou0x.length<4||ou0x.length>30)return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(!/^[\u4e00-\u9fa5A-Za-z0-9-_]*$/.test(ju9l))return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");return ju9l};b5g.btX6R=function(d5i){var ju9l=this.fi8a.value.trim(),ou0x=ju9l.replace(/[^\x00-\xff]/g,"**");if(this.bue6Y==ju9l)return;this.bue6Y=ju9l;if(d5i.keyCode==13)return;if(/[^\u4e00-\u9fa5\w-]/.test(ju9l))return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(ju9l&&ou0x.length>30)return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");this.bY6S(false)};b5g.bY6S=function(bD6x,jc9T,cHk3x){this.eb7U(this.dY7R,bD6x);a5f.x5C(this.fi8a,"u-txt-err");if(jc9T=="nickname"){a5f.w5B(this.fi8a,"u-txt-err")}else if(jc9T=="captcha"){}if(cHk3x){this.da7T.hw8o()}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,"开启云音乐","设置中...")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),b5g,L5Q;n5s.buh6b=NEJ.C();b5g=n5s.buh6b.M6G(n5s.ee7X);L5Q=n5s.buh6b.ct6n;b5g.cd6X=function(){this.cc6W="ntp-setpassword"};b5g.bW6Q=function(){this.ch6b();var Hj6d=a5f.D5I(this.o5t,"js-tip");this.cB6v=Hj6d[0];this.QF9w=Hj6d[1];this.QE9v=Hj6d[2];this.rp1x=a5f.D5I(this.o5t,"js-mob")[0];this.mX0x=a5f.D5I(this.o5t,"js-code")[0];this.dA7t=a5f.D5I(this.o5t,"js-input")[0];a5f.gX8P(this.dA7t,"holder");h5m.s5x(this.dA7t,"focus",this.gO8G.f5k(this));h5m.s5x(this.dA7t,"keypress",this.Hr6l.f5k(this));h5m.s5x(this.dA7t,"input",this.QD9u.f5k(this));this.dY7R=a5f.D5I(this.o5t,"u-err")[0];this.cy6s=a5f.D5I(this.o5t,"js-primary")[0];this.Co5t=a5f.D5I(this.o5t,"js-btmbar")[0];this.oW0x=a5f.D5I(this.o5t,"pwd-validation")[0];this.Cx5C=a5f.D5I(this.oW0x,"j-err")[0];this.Cy5D=a5f.D5I(this.oW0x,"j-err")[1];this.CA5F=a5f.D5I(this.oW0x,"j-err")[2];h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.bo6i=function(e5j){e5j.countrycode=e5j.countrycode||"86";this.bp6j(e5j);this.dy7r=e5j;this.bY6S(false);this.cQ7J(false);if(e5j.tip){this.cB6v.innerHTML=e5j.tip;a5f.x5C(this.cB6v,"f-hide")}else{a5f.w5B(this.cB6v,"f-hide")}if(e5j.mobile){this.rp1x.innerHTML=l5q.Gl6f(e5j.mobile)||"";this.mX0x.innerHTML=e5j.countrycode;a5f.w5B(this.QE9v,"f-hide");a5f.x5C(this.QF9w,"f-hide")}else{a5f.w5B(this.QF9w,"f-hide");a5f.x5C(this.QE9v,"f-hide")}this.dA7t.value="";a5f.w5B(this.oW0x,"f-hide");e5j.okbutton=e5j.okbutton||"下一步";this.cy6s.innerHTML="<i>"+e5j.okbutton+"</i>";if(e5j.canskip){a5f.x5C(this.Co5t,"f-hide")}else{a5f.w5B(this.Co5t,"f-hide")}};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"ok":this.pd0x(d5i);break;case"skip":this.MH8z(d5i);break}};b5g.gO8G=function(){a5f.x5C(this.oW0x,"f-hide");var eW8O=this.dA7t.value;this.za4e(eW8O)};b5g.Hr6l=function(d5i){if(d5i.keyCode==13)this.pd0x()};b5g.QD9u=function(){var eW8O=this.dA7t.value;this.za4e(eW8O)};b5g.za4e=function(pwd){var spaceReg=/(^\s+)|(\s+$)|\s+/g;var complexReg=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{0,100}$/;var spaceValidate=true;var complexValidate=true;var lengthValidate=true;if(spaceReg.test(pwd)){a5f.w5B(this.Cx5C,"u-err");spaceValidate=false}else{a5f.x5C(this.Cx5C,"u-err");spaceValidate=true}if(pwd&&pwd.length>0){this.bY6S(false)}if(!pwd||!complexReg.test(pwd)){a5f.w5B(this.Cy5D,"u-err");complexValidate=false}else{a5f.x5C(this.Cy5D,"u-err");complexValidate=true}if(!pwd||pwd&&(pwd.length<8||pwd.length>20)){a5f.w5B(this.CA5F,"u-err");lengthValidate=false}else{a5f.x5C(this.CA5F,"u-err");lengthValidate=true}var pwdValidate=spaceValidate&&complexValidate&&lengthValidate;if(!pwdValidate){this.HH7A=false;a5f.w5B(this.dA7t,"u-txt-err");a5f.w5B(this.cy6s,"u-btn2-dis")}else{this.HH7A=true;a5f.x5C(this.dA7t,"u-txt-err");a5f.x5C(this.cy6s,"u-btn2-dis")}return pwdValidate};b5g.MH8z=function(d5i){h5m.co6i(d5i);this.br6l();this.z5E("onskip")};b5g.pd0x=function(d5i){h5m.co6i(d5i);if(this.cQ7J())return;var eW8O=this.dA7t.value;if(!this.za4e(eW8O))return;this.cQ7J(true);v5A.be6Y("/api/w/user/bindingcellphone/v1",{type:"json",method:"post",query:{phone:this.dy7r.mobile,captcha:this.dy7r.captcha,password:j5o.kD9u(eW8O),loginprotect:false},onload:function(i5n){if(i5n.code===200){this.z5E("onok")}else{this.z5E("onerror",i5n)}}.f5k(this),onerror:function(){this.z5E("onerror",{code:500})}})};b5g.blM4Q=function(){var eW8O=this.dA7t.value;if(!eW8O)return this.bY6S("请输入密码","password");if(eW8O.length<6||eW8O.length>16)return this.bY6S("请输入6-16位的密码","password");if(/[^\x00-\xff]/.test(eW8O))return this.bY6S("密码不支持中文字符","password");return eW8O};b5g.bY6S=function(bD6x,jc9T){this.eb7U(this.dY7R,bD6x);a5f.x5C(this.dA7t,"u-txt-err");if(jc9T=="password"){a5f.w5B(this.dA7t,"u-txt-err")}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,this.dy7r.okbutton,"设置中...")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ci6c=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;n5s.zP4T=NEJ.C();b5g=n5s.zP4T.M6G(ci6c.cP7I);b5g.bo6i=function(e5j){this.bp6j(e5j);this.dy7r=e5j;this.tK2x=e5j.user;this.S6M=p5u.mT0x.B5G();this.S6M.s5x("onmobilebind",this.bnX5c.f5k(this));this.S6M.s5x("onmobilebinderror",this.bfv3x.f5k(this));this.S6M.s5x("onactive",this.Qq9h.f5k(this));this.S6M.s5x("onactiveerror",this.bul6f.f5k(this));if(e5j.requiremobile&&!this.cHj3x(this.tK2x)){this.ec7V=n5s.oR0x.I5N({title:"绑定手机号",onok:this.boh5m.f5k(this),canskip:true,onskip:this.bun6h.f5k(this)})}else{this.bun6h()}l5q.jZ9Q()};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.ec7V)this.ec7V.V6P();if(this.nC0x)this.nC0x.V6P()};b5g.boh5m=function(bi6c){this.gm8e=bi6c.mobile;this.bfg3x=bi6c.captcha;this.ME8w()};b5g.ME8w=function(){if(this.ec7V)this.ec7V.br6l();if(this.kq9h)this.kq9h.V6P();this.kq9h=n5s.buh6b.I5N({title:"绑定手机号",mobile:this.gm8e,captcha:this.bfg3x,canskip:false,onok:this.bun6h.f5k(this),onerror:this.bfv3x.f5k(this)})};b5g.bun6h=function(){if(this.kq9h)this.kq9h.V6P();if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){this.bff3x={data:{nickname:"",dragPwd:""}};this.ja9R()}else{if(this.nC0x)this.nC0x.V6P();this.nC0x=n5s.Ip7i.I5N({title:"设置昵称",onok:this.cHh3x.f5k(this)})}};b5g.bnX5c=function(){this.ec7V.br6l();this.ME8w()};b5g.bfv3x=function(bi6c){if(bi6c.code==506){this.ec7V.I5N();this.kq9h.br6l();this.ec7V.cQ7J(false);this.ec7V.bY6S(bi6c.message,"mobile")}else{n5s.Z6T.I5N({tip:bi6c.message||"绑定失败，请稍后重试",type:2})}};b5g.cHh3x=function(bi6c){this.bff3x={data:{nickname:bi6c.nickname,dragPwd:bi6c.dragPwd}};l5q.xs4w(this.ja9R.f5k(this))};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);this.bff3x.data.checkToken=cl6f||randomStr;if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){this.bff3x.data.checkToken=""}this.S6M.bkF4J(this.bff3x)};b5g.Qq9h=function(bi6c){if(this.nC0x){this.nC0x.br6l()}this.tK2x.profile=bi6c.profile;h5m.z5E(window,"login",{user:this.tK2x})};b5g.bul6f=function(bi6c){this.nC0x.cQ7J(false);if(bi6c.code==505)return this.nC0x.bY6S("该昵称已被占用","nickname",true);if(bi6c.code==407)return this.nC0x.bY6S("该昵称包含关键词","nickname",true);if(bi6c.code==250)return this.nC0x.bY6S(bi6c.message||"登录异常","nickname",true);n5s.Z6T.I5N({tip:bi6c.message||"登录失败，请重试",type:2});this.nC0x.br6l()};b5g.cHj3x=function(dz7s){var vG3x=dz7s.bindings||[];return j5o.dt7m(vG3x,function(q5v){return q5v.type==1})>=0}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),b5g,L5Q;n5s.Qx9o=NEJ.C();b5g=n5s.Qx9o.M6G(n5s.ee7X);L5Q=n5s.Qx9o.ct6n;b5g.cd6X=function(){this.cc6W="ntp-reg-mobile"};b5g.bW6Q=function(){this.ch6b();this.rp1x=a5f.D5I(this.o5t,"j-mob")[0];this.dA7t=a5f.D5I(this.o5t,"j-pwd")[0];this.oW0x=a5f.D5I(this.o5t,"pwd-validation")[0];this.oh0x=a5f.D5I(this.o5t,"j-nextstep")[0];this.Cx5C=a5f.D5I(this.oW0x,"j-err")[0];this.Cy5D=a5f.D5I(this.oW0x,"j-err")[1];this.CA5F=a5f.D5I(this.oW0x,"j-err")[2];this.dY7R=a5f.D5I(this.o5t,"j-err")[0];this.cy6s=a5f.D5I(this.o5t,"j-btn")[0];a5f.gX8P(this.dA7t,"holder");h5m.s5x(this.dA7t,"focus",this.zA4E.f5k(this));h5m.s5x(this.dA7t,"keypress",this.zz4D.f5k(this));h5m.s5x(this.dA7t,"input",this.QD9u.f5k(this));h5m.s5x(this.o5t,"click",this.bN6H.f5k(this));this.HH7A=true};b5g.bo6i=function(e5j){this.bp6j(e5j);this.ko9f=y5D.bfi3x.B5G({parent:this.rp1x,phone:e5j.mobile,countrycode:e5j.countrycode,onpressenter:this.buG6A.f5k(this)});this.bY6S(false);this.cQ7J(false);a5f.w5B(this.oW0x,"f-hide");this.dA7t.value=""};b5g.bC6w=function(){this.bI6C();this.ko9f.V6P()};b5g.zA4E=function(){a5f.x5C(this.oW0x,"f-hide");var eW8O=this.dA7t.value;this.za4e(eW8O)};b5g.QD9u=function(){var eW8O=this.dA7t.value;this.za4e(eW8O)};b5g.zz4D=function(d5i){if(d5i.keyCode==13)this.buG6A()};b5g.za4e=function(pwd){var spaceReg=/(^\s+)|(\s+$)|\s+/g;var complexReg=/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{0,100}$/;var spaceValidate=true;var complexValidate=true;var lengthValidate=true;if(spaceReg.test(pwd)){a5f.w5B(this.Cx5C,"u-err");spaceValidate=false}else{a5f.x5C(this.Cx5C,"u-err");spaceValidate=true}if(pwd&&pwd.length>0){this.bY6S(false)}if(!pwd||!complexReg.test(pwd)){a5f.w5B(this.Cy5D,"u-err");complexValidate=false}else{a5f.x5C(this.Cy5D,"u-err");complexValidate=true}if(!pwd||pwd&&(pwd.length<8||pwd.length>20)){a5f.w5B(this.CA5F,"u-err");lengthValidate=false}else{a5f.x5C(this.CA5F,"u-err");lengthValidate=true}var pwdValidate=spaceValidate&&complexValidate&&lengthValidate;if(!pwdValidate){this.HH7A=false;a5f.w5B(this.dA7t,"u-txt-err");a5f.w5B(this.oh0x,"u-btn2-dis")}else{this.HH7A=true;a5f.x5C(this.dA7t,"u-txt-err");a5f.x5C(this.oh0x,"u-btn2-dis")}};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"ok":this.buG6A(d5i);break;case"back":this.bfr3x(d5i);break}};b5g.bfr3x=function(d5i){h5m.co6i(d5i);this.br6l();n5s.pU1x.I5N({title:"登录"})};b5g.buG6A=function(d5i){h5m.co6i(d5i);if(!this.HH7A)return;var gx8p=this.tn2x();if(!gx8p)return;this.cQ7J(true);this.z5E("onok",{mobile:gx8p.mobile,countrycode:gx8p.countrycode,password:gx8p.password})};b5g.tn2x=function(){var fs8k=this.ko9f.MD8v(),ms0x=this.ko9f.Qo9f(),eW8O=this.dA7t.value;if(!fs8k)return this.bY6S("请输入手机号","mobile");if(!eW8O)return this.bY6S("请输入登录密码","password");if(!l5q.Ah4l(fs8k,ms0x))return this.bY6S("请输入正确的手机号","mobile");if(eW8O.length<6||eW8O.length>16)return this.bY6S("请输入6-16位的密码","password");return{mobile:fs8k,password:eW8O,countrycode:ms0x}};b5g.bY6S=function(bD6x,jc9T){this.eb7U(this.dY7R,bD6x);this.ko9f.bfj3x();a5f.x5C(this.dA7t,"u-txt-err");if(jc9T=="mobile"){this.ko9f.bmA4E()}else if(jc9T=="password"){a5f.w5B(this.dA7t,"u-txt-err")}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,"下一步","发送中...")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),b5g,L5Q;n5s.bfa3x=NEJ.C();b5g=n5s.bfa3x.M6G(n5s.ee7X);L5Q=n5s.bfa3x.ct6n;b5g.cd6X=function(){this.cc6W="ntp-reg-setting"};b5g.bW6Q=function(){this.ch6b();this.cB6v=a5f.D5I(this.o5t,"js-tip")[0];this.iJ9A=a5f.D5I(this.o5t,"js-input")[0];a5f.gX8P(this.iJ9A,"holder");h5m.s5x(this.iJ9A,"focus",this.cHd3x.f5k(this));h5m.s5x(this.iJ9A,"keypress",this.cGZ3x.f5k(this));h5m.s5x(this.iJ9A,"keyup",this.btX6R.f5k(this));this.dY7R=a5f.D5I(this.o5t,"u-err")[0];this.cy6s=a5f.D5I(this.o5t,"js-primary")[0];h5m.s5x(this.o5t,"click",this.bN6H.f5k(this));l5q.jZ9Q()};b5g.bo6i=function(e5j){this.bp6j(e5j);this.gm8e=e5j.mobile||"";this.fK8C=e5j.countrycode||"86";this.vv3x=e5j.password||"";this.cGQ3x=e5j.captcha||"";if(e5j.tip){this.cB6v.innerHTML=e5j.tip}this.bY6S(false);this.cQ7J(false);this.iJ9A.value="";this.S6M=p5u.mT0x.B5G({onmobileregist:this.QH9y.f5k(this),onmobileregisterror:this.jl9c.f5k(this)})};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.da7T){this.da7T.V6P();delete this.da7T}};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"ok":this.QI9z(d5i);break}};b5g.cHd3x=function(){a5f.x5C(this.iJ9A,"u-txt-err")};b5g.cGZ3x=function(d5i){if(d5i.keyCode==13)this.QI9z()};b5g.QI9z=function(d5i){h5m.co6i(d5i);if(this.cQ7J())return;var gx8p=this.tn2x();if(!gx8p)return;var i5n={phone:this.gm8e,countrycode:this.fK8C,password:j5o.kD9u(this.vv3x),nickname:gx8p.nickname,captcha:this.cGQ3x};this.cQ7J(true);this.bLD0x=i5n;l5q.xs4w(this.ja9R.f5k(this))};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);this.bLD0x.checkToken=cl6f||randomStr;this.S6M.beK3x({data:this.bLD0x})};b5g.QH9y=function(m5r){this.cQ7J(false);this.br6l();localCache.mk0x("user",m5r);h5m.z5E(window,"login",{user:m5r})};b5g.jl9c=function(bi6c){this.cQ7J(false);if(bi6c.code==415){if(this.da7T){this.da7T.V6P();this.bY6S("注册过于频繁","captcha")}this.da7T=y5D.PQ9H.B5G({captchaId:bi6c.captchaId,txt:"txt-login-captcha",onaction:this.QI9z.f5k(this)});this.dY7R.insertAdjacentElement("beforeBegin",this.da7T.mx0x());return}if(bi6c.code==505)return this.bY6S("该昵称已被占用","nickname");if(bi6c.code==407)return this.bY6S("该昵称包含关键词","nickname");if(bi6c.code==250){this.bY6S(bi6c.message||"注册异常");return}if(bi6c.message){this.bY6S(bi6c.message)}else{n5s.Z6T.I5N({tip:"注册失败，请重试",type:2})}};b5g.tn2x=function(){var ju9l=this.iJ9A.value.trim(),ou0x=ju9l.replace(/[^\x00-\xff]/g,"**"),jD9u="";if(!ju9l)return this.bY6S("请输入昵称","nickname");if(this.da7T){jD9u=this.da7T.gn8f();if(!jD9u)return this.bY6S("请输入验证码","captcha");var bx6r=this.da7T.IP7I();if(!bx6r.success){return this.bY6S(bx6r.message,"captcha")}}if(ou0x.length<4||ou0x.length>30)return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(!/^[\u4e00-\u9fa5A-Za-z0-9-_]*$/.test(ju9l))return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");return{nickname:ju9l,captcha:jD9u}};b5g.btX6R=function(d5i){var ju9l=this.iJ9A.value.trim(),ou0x=ju9l.replace(/[^\x00-\xff]/g,"**");if(this.bue6Y==ju9l)return;this.bue6Y=ju9l;if(d5i.keyCode==13)return;if(/[^\u4e00-\u9fa5\w-]/.test(ju9l))return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(ju9l&&ou0x.length>30)return this.bY6S("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");this.bY6S(false)};b5g.bY6S=function(bD6x,jc9T){this.eb7U(this.dY7R,bD6x);a5f.x5C(this.iJ9A,"u-txt-err");if(this.da7T)this.da7T.x5C("u-txt-err");if(jc9T=="nickname"){a5f.w5B(this.iJ9A,"u-txt-err")}else if(jc9T=="captcha"){if(this.da7T)this.da7T.w5B("u-txt-err")}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,"开启云音乐","设置中...")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ci6c=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};n5s.beV3x=NEJ.C();b5g=n5s.beV3x.M6G(ci6c.cP7I);b5g.bo6i=function(e5j){e5j=e5j||{};this.bp6j(e5j);this.S6M=p5u.mT0x.B5G({onsendcaptcha:this.sq1x.f5k(this),onsendcaptchaerror:this.Hf6Z.f5k(this),onmobilecheck:this.QM9D.f5k(this),onmobilecheckerror:this.QN9E.f5k(this),onmobileregist:this.QH9y.f5k(this),onmobileregisterror:this.beT3x.f5k(this)});this.Ce5j=n5s.Qx9o.I5N({title:"手机号注册",onok:this.ML8D.f5k(this)})};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.Ce5j)this.Ce5j.V6P();if(this.ec7V)this.ec7V.V6P()};b5g.ML8D=function(bi6c){this.gm8e=bi6c.mobile;this.fK8C=bi6c.countrycode;this.vv3x=bi6c.password;this.S6M.BL5Q({data:{ctcode:this.fK8C,cellphone:bi6c.mobile}})};b5g.sq1x=function(){this.Ce5j.br6l();this.ec7V=n5s.oR0x.I5N({title:"手机号注册",mobile:this.gm8e,countrycode:this.fK8C,okbutton:"下一步",onok:this.bvc6W.f5k(this),backbutton:"&lt;&nbsp;&nbsp;返回登录",onback:this.bvd6X.f5k(this)})};b5g.Hf6Z=function(bi6c){this.Ce5j.cQ7J(false);n5s.Z6T.I5N({tip:bi6c.message||"验证码发送失败",type:2})};b5g.bvc6W=function(bi6c){this.gm8e=bi6c.mobile;this.fK8C=bi6c.countrycode;this.da7T=bi6c.captcha;this.S6M.bkA4E({data:{cellphone:bi6c.mobile,captcha:bi6c.captcha,countrycode:bi6c.countrycode}})};b5g.QM9D=function(bi6c){this.ec7V.br6l();switch(bi6c.exist){case MOB_CHECK.NULL:if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){this.ja9R()}else{n5s.bfa3x.I5N({title:"手机号注册",mobile:this.gm8e,countrycode:this.fK8C,password:this.vv3x,captcha:this.da7T})}break;case MOB_CHECK.MAIN:case MOB_CHECK.SNS:case MOB_CHECK.NETEASE:this.Hh6b();break}};b5g.QN9E=function(bi6c){n5s.Z6T.I5N({tip:bi6c.message||"验证码发送失败",type:2})};b5g.QH9y=function(bi6c){localCache.mk0x("user",bi6c);if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){h5m.z5E(window,"login",{user:bi6c})}else{if(!bi6c.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:bi6c,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{l5q.dX7Q({clazz:"m-layer-w2",title:"手机号注册",message:'该手机号已与云音乐帐号 <strong class="s-fc1">'+j5o.dQ7J(bi6c.profile.nickname)+"</strong> 绑定，<br/><br/>以后你可以直接用该手机号+密码登录",btntxt:"知道了",action:h5m.z5E.f5k(h5m,window,"login",{user:bi6c}),onclose:h5m.z5E.f5k(h5m,window,"login",{user:bi6c})})}}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.beT3x=function(bi6c){if(bi6c.code==415){l5q.bLM0x({captchaId:bi6c.captchaId,ondestroy:this.Hh6b.f5k(this)})}else{n5s.Z6T.I5N({tip:bi6c.message||"注册失败，请重试",type:2})}};b5g.bvd6X=function(){this.ec7V.br6l();n5s.pU1x.I5N({title:"登录"})};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);var checkToken=cl6f||randomStr;if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){this.S6M.beK3x({data:{phone:this.gm8e,countrycode:this.fK8C,password:j5o.kD9u(this.vv3x),captcha:this.da7T,nickname:"",checkToken:""}})}else{this.S6M.beK3x({data:{phone:this.gm8e,countrycode:this.fK8C,password:j5o.kD9u(this.vv3x),captcha:this.da7T,checkToken:checkToken}})}};b5g.Hh6b=function(){l5q.xs4w(this.ja9R.f5k(this))}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ci6c=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};n5s.bLC0x=NEJ.C();b5g=n5s.bLC0x.M6G(ci6c.cP7I);b5g.bo6i=function(e5j){e5j=e5j||{};this.bp6j(e5j);this.S6M=p5u.mT0x.B5G({onsendcaptcha:this.sq1x.f5k(this),onsendcaptchaerror:this.Hf6Z.f5k(this),onmobilecheck:this.QM9D.f5k(this),onmobilecheckerror:this.QN9E.f5k(this),onmobileregist:this.QH9y.f5k(this),onmobileregisterror:this.beT3x.f5k(this)});this.Ce5j=n5s.Qx9o.I5N({title:"重设密码",mobile:e5j.mobile||"",countrycode:e5j.countrycode,onok:this.ML8D.f5k(this)})};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.Ce5j)this.Ce5j.V6P();if(this.ec7V)this.ec7V.V6P()};b5g.ML8D=function(bi6c){this.gm8e=bi6c.mobile;this.fK8C=bi6c.countrycode;this.vv3x=bi6c.password;this.S6M.BL5Q({data:{ctcode:bi6c.countrycode,cellphone:bi6c.mobile}})};b5g.sq1x=function(){this.Ce5j.br6l();this.ec7V=n5s.oR0x.I5N({title:"重设密码",mobile:this.gm8e,countrycode:this.fK8C,okbutton:"下一步",onok:this.bvc6W.f5k(this),backbutton:"&lt;&nbsp;&nbsp;返回登录",onback:this.bvd6X.f5k(this),onerror:this.beT3x.f5k(this)})};b5g.Hf6Z=function(bi6c){this.Ce5j.cQ7J(false);n5s.Z6T.I5N({tip:bi6c.message||"验证码发送失败",type:2})};b5g.bvc6W=function(bi6c){this.gm8e=bi6c.mobile;this.fK8C=bi6c.countrycode;this.da7T=bi6c.captcha;this.S6M.bkA4E({data:{cellphone:bi6c.mobile,captcha:bi6c.captcha,countrycode:bi6c.countrycode}})};b5g.QM9D=function(bi6c){this.ec7V.br6l();switch(bi6c.exist){case MOB_CHECK.NULL:n5s.bfa3x.I5N({title:"设置昵称",tip:"该手机号尚未注册，取一个昵称，马上开通",mobile:this.gm8e,countrycode:this.fK8C,password:this.vv3x,captcha:this.da7T});break;case MOB_CHECK.MAIN:case MOB_CHECK.SNS:case MOB_CHECK.NETEASE:l5q.xs4w(this.ja9R.f5k(this));break}};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);var checkToken=cl6f||randomStr;this.S6M.beK3x({data:{phone:this.gm8e,countrycode:this.fK8C,password:j5o.kD9u(this.vv3x),captcha:this.da7T,checkToken:checkToken}})};b5g.QN9E=function(bi6c){n5s.Z6T.I5N({tip:bi6c.message||"验证码发送失败",type:2})};b5g.bvd6X=function(){this.ec7V.br6l();n5s.pU1x.I5N({title:"登录"})};b5g.QH9y=function(m5r){localCache.mk0x("user",m5r);if(!m5r.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:m5r,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{h5m.z5E(window,"login",{user:m5r})}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.beT3x=function(m5r){if(m5r.code==415){l5q.bLM0x({captchaId:m5r.captchaId,ondestroy:function(){l5q.xs4w(this.ja9R.f5k(this))}.f5k(this)})}else{n5s.Z6T.I5N({tip:"重设密码失败，请重试",type:2})}}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),b5g,L5Q;n5s.QT9K=NEJ.C();b5g=n5s.QT9K.M6G(n5s.ee7X);L5Q=n5s.QT9K.ct6n;b5g.cd6X=function(){this.cc6W="ntp-loginverify"};b5g.bW6Q=function(){this.ch6b();this.sK1x=a5f.D5I(this.o5t,"js-flag")[0];this.bLA0x=a5f.D5I(this.o5t,"js-mobile")[0];this.dY7R=a5f.D5I(this.o5t,"u-err")[0];h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.bo6i=function(e5j){this.bp6j(e5j);this.gm8e=e5j.mobile||"";this.fK8C=e5j.countrycode||"86";this.bvk6e=e5j.loginType;this.dy7r=e5j;if(this.bLA0x){this.bLA0x.innerHTML="+"+this.fK8C+" "+this.gm8e}this.S6M=p5u.mT0x.B5G({onsafecaptcha:this.sq1x.f5k(this),onsafecaptchaerror:this.Hf6Z.f5k(this),onloginverify:this.QV9M.f5k(this),onloginverifyerror:this.PV9M.f5k(this),onrelogin:this.vO3x.f5k(this),onreloginerror:this.bvn6h.f5k(this)})};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"ok":this.cGy3x();break;default:break}};b5g.cGy3x=function(){if(!this.gm8e)return;this.S6M.bkZ4d({})};b5g.sq1x=function(){this.br6l();this.ec7V=n5s.oR0x.I5N({title:"网易云音乐",mobile:this.gm8e,countrycode:this.fK8C,okbutton:"完成",noVerifyMobile:true,onverify:this.cGu3x.f5k(this)})};b5g.Hf6Z=function(bi6c){n5s.Z6T.I5N({tip:bi6c.message||"验证码发送失败",type:2})};b5g.cGu3x=function(i5n){var hA8s={captcha:i5n.captcha};this.S6M.bSD3x({data:hA8s})};b5g.QV9M=function(){this.ec7V.br6l();this.z5E("onok");this.S6M.bSC3x({data:{usertype:this.bvk6e}})};b5g.PV9M=function(bi6c){this.z5E("onerror",bi6c);this.ec7V.bY6S(bi6c.message||"验证失败");this.ec7V.cQ7J(false)};b5g.vO3x=function(bi6c){localCache.mk0x("user",bi6c);if(!bi6c.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:bi6c,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{h5m.z5E(window,"login",{user:bi6c})}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.bvn6h=function(bi6c){this.z5E("onerror",bi6c);n5s.Z6T.I5N({tip:bi6c.message||"登录失败",type:2})}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),b5g,L5Q;n5s.GZ6T=NEJ.C();b5g=n5s.GZ6T.M6G(n5s.ee7X);L5Q=n5s.GZ6T.ct6n;b5g.cd6X=function(){this.cc6W="ntp-login-mobile"};b5g.bW6Q=function(){this.ch6b();this.rp1x=a5f.D5I(this.o5t,"j-mob")[0];this.dA7t=a5f.D5I(this.o5t,"j-pwd")[0];this.dY7R=a5f.D5I(this.o5t,"j-err")[0];this.QZ9Q=a5f.D5I(this.o5t,"j-auto")[0];this.cy6s=a5f.D5I(this.o5t,"j-primary")[0];a5f.gX8P(this.dA7t,"holder");h5m.s5x(this.dA7t,"focus",this.zA4E.f5k(this));h5m.s5x(this.dA7t,"keypress",this.zz4D.f5k(this));h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.bo6i=function(e5j){this.bp6j(e5j);this.ko9f=y5D.bfi3x.B5G({parent:this.rp1x,onpressenter:this.hY8Q.f5k(this)});this.S6M=p5u.mT0x.B5G();this.S6M.s5x("onmobilelogin",this.vO3x.f5k(this));this.S6M.s5x("onmobileloginerror",this.jl9c.f5k(this))};b5g.bC6w=function(){this.bI6C();this.ko9f.V6P();this.S6M.V6P();if(this.da7T){this.da7T.V6P();delete this.da7T}if(this.xX4b)this.xX4b.V6P()};b5g.I5N=function(){L5Q.I5N.apply(this,arguments);this.bY6S(false);this.cQ7J(false);this.ko9f.Vu0x();this.dA7t.value="";this.QZ9Q.checked=true;l5q.jZ9Q()};b5g.zA4E=function(){a5f.x5C(this.dA7t,"u-txt-err")};b5g.zz4D=function(d5i){if(d5i.keyCode==13)this.hY8Q()};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"login":this.hY8Q(d5i);break;case"forget":h5m.bg6a(d5i);this.br6l();n5s.bLC0x.B5G({countrycode:this.ko9f.Qo9f(),mobile:this.ko9f.MD8v()});break;case"select":this.bvy6s(d5i);break;case"reg":this.cGt3x(d5i);break}};b5g.hY8Q=function(d5i){h5m.co6i(d5i);if(this.cQ7J())return;var gx8p=this.tn2x();if(!gx8p)return;if(!this.Rd9U())return;if(this.da7T){this.da7T.V6P();delete this.da7T}var i5n={countrycode:gx8p.countrycode,phone:gx8p.mobile,password:j5o.kD9u(gx8p.password),rememberLogin:this.QZ9Q.checked};this.cQ7J(true);this.bY6S(false);this.GI6C=i5n;if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){this.GI6C.checkToken="";this.S6M.bSL3x({data:this.GI6C})}else{l5q.xs4w(this.ja9R.f5k(this))}};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);this.GI6C.checkToken=cl6f||randomStr;this.S6M.bSL3x({data:this.GI6C})};b5g.vO3x=function(m5r){this.cQ7J(false);this.br6l();localCache.mk0x("user",m5r);if(!m5r.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:m5r,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{v5A.be6Y("/api/user/grabed/status/get",{method:"GET",cookie:true,type:"json",onload:function(resp){if(resp.data&&resp.data.grabed){l5q.hk8c({title:"更换手机号",btncc:"知道了",okstyle:"f-hide",message:"您绑定的手机号已被其他账号绑定，为保护账号安全，将强制退出您在网页端的登陆状态，请在云音乐手机端尽快绑定新的手机号。",action:top.logout})}else{h5m.z5E(window,"login",{user:m5r})}},onerror:function(){console.log("[请求出错]:/api/user/grabed/status/get");top.logout()}})}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.jl9c=function(bi6c){this.cQ7J(false);if(bi6c.code==415){if(this.da7T)this.da7T.V6P();this.da7T=y5D.PQ9H.B5G({captchaId:bi6c.captchaId,txt:"txt-login-captcha",onaction:this.hY8Q.f5k(this)});this.dY7R.insertAdjacentElement("beforeBegin",this.da7T.mx0x());return}if(bi6c.code==501){this.bY6S("该手机号尚未注册","mobile");return}if(bi6c.code==10002||bi6c.code==502||bi6c.code==501){this.bY6S("手机号或密码错误");return}if(bi6c.code==250){this.bY6S(bi6c.message||"登录异常");return}if(bi6c.code==702){this.br6l();var dq7j=bi6c.ext;this.bLz0x=n5s.QT9K.I5N({title:"网易云音乐",mobile:dq7j.phone,countrycode:dq7j.countrycode,loginType:dq7j.loginType});return}if(bi6c.message){this.bY6S(bi6c.message)}else{n5s.Z6T.I5N({tip:"登录失败，请重试",type:2})}};b5g.bvy6s=function(d5i){h5m.bg6a(d5i);n5s.pU1x.I5N({title:"登录"})};b5g.cGt3x=function(d5i){h5m.bg6a(d5i);this.br6l();if(this.xX4b)this.xX4b.V6P();this.xX4b=n5s.beV3x.B5G()};b5g.tn2x=function(){var fs8k=this.ko9f.MD8v(),ms0x=this.ko9f.Qo9f(),eW8O=this.dA7t.value;if(!fs8k)return this.bY6S("请输入手机号","mobile");if(!eW8O)return this.bY6S("请输入登录密码","password");if(!l5q.Ah4l(fs8k,ms0x))return this.bY6S("请输入正确的手机号","mobile");return{mobile:fs8k,countrycode:ms0x,password:eW8O}};b5g.Rd9U=function(){if(!this.da7T)return true;var bx6r=this.da7T.IP7I();if(bx6r.success)return true;this.bY6S(bx6r.message,"captcha");return false};b5g.bY6S=function(bD6x,jc9T){this.eb7U(this.dY7R,bD6x);this.ko9f.bfj3x();a5f.x5C(this.dA7t,"u-txt-err");if(this.da7T)this.da7T.x5C("u-txt-err");if(jc9T=="mobile"){this.ko9f.bmA4E()}else if(jc9T=="password"){a5f.w5B(this.dA7t,"u-txt-err")}else if(jc9T=="captcha"){if(this.da7T)this.da7T.w5B("u-txt-err")}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,"登　录","登录中...")}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ds7l=c5h("nej.p"),P6J=c5h("nej.ut"),rl1x,cGp3x;if(!!P6J.GA6u)return;P6J.GA6u=NEJ.C();rl1x=P6J.GA6u.M6G(P6J.cP7I);cGp3x=P6J.GA6u.ct6n;rl1x.bo6i=function(e5j){this.bp6j(e5j);this.o5t=a5f.A5F(e5j.body);this.ev7o=a5f.A5F(e5j.input);this.lo9f=e5j.selected||"js-selected";this.cv6p=0;this.bZ6T([[this.ev7o,"input",this.fc8U.f5k(this)],[this.ev7o,"blur",this.bvJ7C.f5k(this,"blur")],[this.o5t,"mouseover",this.HQ7J.f5k(this)],[this.o5t,"click",this.cz6t.f5k(this)],[document,"keydown",this.cGh3x.f5k(this)],[document,"keypress",this.bvL7E.f5k(this)]]);if(ds7l.dB7u.release=="5.0"){this.bZ6T([[this.ev7o,"keydown",this.bLy0x.f5k(this)],[this.ev7o,"keyup",this.bLy0x.f5k(this)]])}};rl1x.bC6w=function(){this.bI6C();this.bLx0x();delete this.lo9f;delete this.ev7o;delete this.o5t;delete this.bLw0x;delete this.bvP7I};rl1x.cFw3x=function(G5L){return G5L.flag!=null};rl1x.bLx0x=function(){var cFv3x=function(g5l){j5o.bfU3x(g5l,"flag")};return function(){j5o.bf6Z(this.bX6R,cFv3x);delete this.bX6R;delete this.cv6p}}();rl1x.bvU7N=function(r5w){if(this.cv6p===r5w)return;this.cv6p=r5w;a5f.w5B(this.bX6R[this.cv6p],this.lo9f)};rl1x.bLv0x=function(r5w){if(this.cv6p!==r5w)return;a5f.x5C(this.bX6R[this.cv6p],this.lo9f);delete this.cv6p};rl1x.bvJ7C=function(u5z){this.bvY7R=setTimeout(function(){if(!this.bX6R)return;var q5v=this.bX6R[this.cv6p]||this.bX6R[0],C5H=a5f.t5y(q5v,"value")||q5v.innerText;this.ev7o.value=C5H;this.lu9l();this.bvP7I=!0;this.z5E("onselect",C5H,{type:u5z});this.bvP7I=!1}.f5k(this),u5z=="blur"?200:0)};rl1x.fc8U=function(){var C5H=this.ev7o.value.trim();if(!C5H){this.lu9l()}else{if(this.bvP7I)return;this.z5E("onchange",C5H)}};rl1x.HQ7J=function(d5i){var G5L=h5m.ba6U(d5i,this.cFw3x);if(!!G5L){this.bLv0x(this.cv6p);this.bvU7N(G5L.flag)}};rl1x.cz6t=function(){if(this.bvY7R){this.bvY7R=clearTimeout(this.bvY7R)}this.bvJ7C("click")};rl1x.cGh3x=function(d5i){var fh8Z=0,cf6Z=d5i.keyCode;if(cf6Z==38)fh8Z=-1;if(cf6Z==40)fh8Z=1;if(!fh8Z)return;h5m.bg6a(d5i);var r5w=Math.max(0,Math.min(this.cv6p+fh8Z,this.bX6R.length-1));if(r5w===this.cv6p)return;this.bLv0x(this.cv6p);this.bvU7N(r5w)};rl1x.bvL7E=function(d5i){var u5z="enter";if(d5i.keyCode==13)this.bvJ7C(u5z)};rl1x.bLy0x=function(d5i){if(d5i.type=="keydown"){this.bLw0x=this.ev7o.value}else if(this.bLw0x!=this.ev7o.value&&!!this.bX6R){this.fc8U()}};rl1x.lu9l=function(){var cFm3x=function(g5l,r5w){g5l.flag=r5w};return function(k5p){this.bLx0x();if(!k5p||!k5p.length){this.o5t.style.visibility="hidden";return this}this.bX6R=k5p;var r5w=j5o.dt7m(this.bX6R,function(g5l){return a5f.bE6y(g5l,this.lo9f)});this.bvU7N(Math.max(0,r5w));j5o.bf6Z(this.bX6R,cFm3x);this.o5t.style.visibility="visible";return this}}()})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),H5M=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),n5s=c5h("nm.l"),b5g,L5Q;if(n5s.Ev6p)return;n5s.Ev6p=NEJ.C();b5g=n5s.Ev6p.M6G(n5s.ee7X);L5Q=n5s.Ev6p.ct6n;b5g.bo6i=function(e5j){this.bp6j(e5j);this.S6M=p5u.mT0x.B5G();this.S6M.s5x("onlogin",this.vO3x.f5k(this));this.S6M.s5x("onloginerror",this.jl9c.f5k(this))};b5g.bC6w=function(){this.bI6C();if(this.da7T){this.da7T.V6P();delete this.da7T}this.bLu0x()};b5g.cd6X=function(){this.cc6W="ntp-login-netease"};b5g.bW6Q=function(){this.ch6b();var cY7R=a5f.D5I(this.o5t,"js-input");this.iJ9A=cY7R[0];this.dA7t=cY7R[1];a5f.gX8P(this.iJ9A,"holder");a5f.gX8P(this.dA7t,"holder");h5m.s5x(this.iJ9A,"focus",this.bwe7X.f5k(this));h5m.s5x(this.dA7t,"focus",this.zA4E.f5k(this));h5m.s5x(this.dA7t,"keypress",this.zz4D.f5k(this));this.wf3x=a5f.D5I(this.o5t,"js-suggest")[0];this.wk3x=H5M.GA6u.B5G({body:this.wf3x,input:this.iJ9A,onchange:this.FY6S.f5k(this),onselect:this.FW6Q.f5k(this)});this.dY7R=a5f.D5I(this.o5t,"u-err")[0];this.QZ9Q=a5f.D5I(this.o5t,"u-auto")[0];this.cy6s=a5f.D5I(this.o5t,"js-primary")[0];this.cFj3x=a5f.D5I(this.o5t,"js-captcha")[0];this.MB8t=a5f.D5I(this.o5t,"js-scaptcha")[0];h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.I5N=function(){L5Q.I5N.apply(this,arguments);this.bY6S(false);this.cQ7J(false);this.iJ9A.value="";this.dA7t.value="";this.QZ9Q.checked=true;this.bLt0x()};b5g.bLt0x=function(){if(this.rf1x){this.rf1x.hw8o()}l5q.jZ9Q()};b5g.bLu0x=function(){if(this.rf1x){this.rf1x.V6P();delete this.rf1x;this.MB8t.style.marginTop="0";this.MB8t.style.display="none"}};b5g.bwe7X=function(){a5f.x5C(this.iJ9A,"u-txt-err")};b5g.zA4E=function(){a5f.x5C(this.dA7t,"u-txt-err")};b5g.zz4D=function(d5i){if(d5i.keyCode==13)this.hY8Q()};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"login":this.hY8Q(d5i);break;case"suggest":this.bws7l(d5i);break;case"select":this.bvy6s(d5i);break}};b5g.bws7l=function(d5i){var g5l=h5m.ba6U(d5i);if(g5l.href){h5m.co6i(d5i)}};b5g.FY6S=function(C5H){if(!C5H)return this.wk3x.lu9l([]);var lE9v=["163.com","126.com","yeah.net","vip.163.com","vip.126.com","188.com"];var ig8Y=C5H.indexOf("@"),i,jK9B;if(ig8Y<0){for(i=0,jK9B=[];i<lE9v.length;++i){jK9B.push(C5H+"@"+lE9v[i])}}else{var jC9t=C5H.substring(ig8Y+1),bt6n=jC9t.length;for(i=0,jK9B=[];i<lE9v.length;++i){if(lE9v[i].substr(0,bt6n)==jC9t){jK9B.push(C5H.substring(0,ig8Y)+"@"+lE9v[i])}}}this.wf3x.innerHTML=a5f.ca6U("jst-login-suggest",{suggests:jK9B},{escape:j5o.dQ7J});this.wk3x.lu9l(a5f.dg7Z(this.wf3x))};b5g.FW6Q=function(C5H){this.iJ9A.value=C5H;this.dA7t.focus()};b5g.hY8Q=function(d5i){h5m.co6i(d5i);if(this.cQ7J())return;var gx8p=this.tn2x();if(!gx8p)return;if(!this.Rd9U())return;if(this.da7T){this.da7T.V6P();delete this.da7T}var i5n={username:gx8p.username,password:j5o.kD9u(gx8p.password),rememberLogin:this.QZ9Q.checked};var jD9u="";if(this.rf1x){jD9u=this.rf1x.MA8s();if(!jD9u.trim()){this.bY6S("拖动验证码错误");return}i5n.dragPwd=jD9u}this.cQ7J(true);this.bY6S(false);this.GI6C=i5n;l5q.xs4w(this.ja9R.f5k(this))};b5g.ja9R=function(cl6f){var randomStr=Math.random().toString(36).substr(2);this.GI6C.checkToken=cl6f||randomStr;this.S6M.JT7M({data:this.GI6C})};b5g.vO3x=function(m5r){this.cQ7J(false);this.br6l();localCache.mk0x("user",m5r);if(!m5r.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:m5r,requiremobile:true,onsuccess:this.vr3x.f5k(this)})}else{h5m.z5E(window,"login",{user:m5r})}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.jl9c=function(bi6c){this.cQ7J(false);if(bi6c.code==415){if(this.da7T)this.da7T.V6P();this.da7T=y5D.PQ9H.B5G({captchaId:bi6c.captchaId,txt:"txt-login-captcha",onaction:this.hY8Q.f5k(this)});this.cFj3x.appendChild(this.da7T.mx0x());return}if(bi6c.code==10002||bi6c.code==502||bi6c.code==501){this.bY6S("帐号或密码错误");return}if(bi6c.code==250){this.bY6S(bi6c.message||"登录异常");return}if(bi6c.code==702){this.br6l();var dq7j=bi6c.ext;this.bLz0x=n5s.QT9K.I5N({title:"网易云音乐",mobile:dq7j.phone,countrycode:dq7j.countrycode,loginType:dq7j.loginType});return}if(bi6c.message){this.bY6S(bi6c.message)}else{n5s.Z6T.I5N({tip:"登录失败，请重试",type:2})}};b5g.vo3x=function(d5i){if(d5i.success){this.bY6S(false);var lT0x=this.iJ9A.value.trim(),eW8O=this.dA7t.value;if(lT0x&&eW8O){this.hY8Q()}}else{this.bY6S("拖动验证码错误")}};b5g.bvy6s=function(d5i){h5m.bg6a(d5i);n5s.pU1x.I5N({title:"登录"})};b5g.tn2x=function(){var lT0x=this.iJ9A.value.trim(),eW8O=this.dA7t.value;if(!lT0x){this.bY6S("请输入邮箱帐号","username");return null}if(!eW8O){this.bY6S("请输入登录密码","password");return null}this.bY6S(false);return{username:lT0x,password:eW8O}};b5g.bY6S=function(bD6x,jc9T){this.eb7U(this.dY7R,bD6x);a5f.x5C(this.iJ9A,"u-txt-err");a5f.x5C(this.dA7t,"u-txt-err");if(this.da7T)this.da7T.x5C("u-txt-err");if(jc9T=="username"){a5f.w5B(this.iJ9A,"u-txt-err")}else if(jc9T=="password"){a5f.w5B(this.dA7t,"u-txt-err")}else if(jc9T=="captcha"){if(this.da7T)this.da7T.w5B("u-txt-err")}};b5g.cQ7J=function(de7X){return this.ea7T(this.cy6s,de7X,"登　录","登录中...")};b5g.Rd9U=function(){if(!this.da7T)return true;var bx6r=this.da7T.IP7I();if(bx6r.success)return true;this.bY6S(bx6r.message,"captcha");return false}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),j5o=c5h("nej.u"),bd6X=c5h("nej.ui"),h5m=c5h("nej.v"),H5M=c5h("nej.t"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),b5g,L5Q;n5s.bLs0x=NEJ.C();b5g=n5s.bLs0x.M6G(bd6X.Zz1x);var cFd3x=a5f.ey7r(['<div class="mask"></div>','<div class="box">','   <i class="icn u-icn2 {if type=="error"}u-icn2-err{elseif type=="info"}f-hide{else}u-icn2-ok{/if}"></i>','   <span class="txt">${message}</span>',"</div>"].join(""));b5g.bo6i=function(e5j){this.bp6j(e5j);this.o5t.innerHTML=e5j.html};b5g.bC6w=function(){this.z5E("ondestroy");this.bI6C()};b5g.ND9u=function(){var C5H={},ka9R=a5f.ql1x(),pj0x={left:ka9R.scrollLeft,top:ka9R.scrollTop},dx7q={left:ka9R.clientWidth-this.o5t.offsetWidth,top:ka9R.clientHeight-this.o5t.offsetHeight};C5H.top=Math.max(0,pj0x.top+dx7q.top/2);C5H.left=Math.max(0,pj0x.left+dx7q.left/2);this.gZ8R(C5H)};l5q.hr8j=function(){var cN7G,eq7j;return function(e5j){if(cN7G)cN7G.V6P();setTimeout(function(){cN7G=n5s.bLs0x.B5G({destroyable:true,parent:e5j.parent||document.body,clazz:"m-toast "+(e5j.clazz||""),html:e5j.html||a5f.ca6U(cFd3x,e5j),ondestroy:e5j.ondestroy});cN7G.I5N()},0);window.clearTimeout(eq7j);eq7j=window.setTimeout(function(){if(cN7G)cN7G.V6P();cN7G=null},e5j.delay||3e3)}}()})();
var QRCode;(function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data;this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[];var code=this.data.charCodeAt(i);if(code>65536){byteArray[0]=240|(code&1835008)>>>18;byteArray[1]=128|(code&258048)>>>12;byteArray[2]=128|(code&4032)>>>6;byteArray[3]=128|code&63}else if(code>2048){byteArray[0]=224|(code&61440)>>>12;byteArray[1]=128|(code&4032)>>>6;byteArray[2]=128|code&63}else if(code>128){byteArray[0]=192|(code&1984)>>>6;byteArray[1]=128|code&63}else{byteArray[0]=code}this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++){buffer.put(this.parsedData[i],8)}}};function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col)}return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test)}if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)}this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if(0<=r&&r<=6&&(c==0||c==6)||0<=c&&c<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=c&&c<=4){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill()}}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue}this.modules[r][6]=r%2==0}for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue}this.modules[6][c]=c%2==0}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue}for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||r==0&&c==0){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){var data=this.errorCorrectLevel<<3|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<6){this.modules[i][8]=mod}else if(i<8){this.modules[i+1][8]=mod}else{this.modules[this.moduleCount-15+i][8]=mod}}for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<8){this.modules[8][this.moduleCount-i-1]=mod}else if(i<9){this.modules[8][15-i-1+1]=mod}else{this.modules[8][15-i-1]=mod}}this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(data[byteIndex]>>>bitIndex&1)==1}var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark}this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7}}}row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer;for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)}var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount}if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+totalDataCount*8+")")}if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4)}while(buffer.getLengthInBits()%8!=0){buffer.putBit(false)}while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=255&buffer.buffer[i+offset]}offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.get(modIndex):0}}var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount}var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i]}}}for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i]}}}return data};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)}return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)}return data<<12|d},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1}return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern.PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0))}return a},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}else{throw new Error("type:"+type)}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue}for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue}if(r==0&&c==0){continue}if(dark==qrCode.isDark(row+r,col+c)){sameCount++}}}if(sameCount>5){lostPoint+=3+sameCount-5}}}for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3}}}for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40}}}for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40}}}var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++}}}var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")")}return QRMath.LOG_TABLE[n]},gexp:function(n){while(n<0){n+=255}while(n>=256){n-=255}return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i}for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8]}for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i}function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift)}var offset=0;while(offset<num.length&&num[offset]==0){offset++}this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset]}}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)))}}return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0){return this}var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i)}for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio)}return(new QRPolynomial(num,0)).mod(e)}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel)}var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount))}}return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return(this.buffer[bufIndex]>>>7-index%8&1)==1},put:function(num,length){for(var i=0;i<length;i++){this.putBit((num>>>length-i-1&1)==1)}},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0)}if(bit){this.buffer[bufIndex]|=128>>>this.length%8}this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function cFc3x(){return typeof CanvasRenderingContext2D!="undefined"}function bLr0x(){var android=false;var sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=true;var aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);if(aMat&&aMat[1]){android=parseFloat(aMat[1])}}return android}var svgDrawer=function(){var Drawing=function(el,htOption){this.bF6z=el;this.iw9n=htOption};Drawing.prototype.draw=function(oQRCode){var iw9n=this.iw9n;var bF6z=this.bF6z;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(iw9n.width/nCount);var nHeight=Math.floor(iw9n.height/nCount);this.clear();function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs)if(attrs.hasOwnProperty(k))el.setAttribute(k,attrs[k]);return el}var svg=makeSVG("svg",{viewBox:"0 0 "+String(nCount)+" "+String(nCount),width:"100%",height:"100%",fill:iw9n.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");bF6z.appendChild(svg);svg.appendChild(makeSVG("rect",{fill:iw9n.colorLight,width:"100%",height:"100%"}));svg.appendChild(makeSVG("rect",{fill:iw9n.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:String(col),y:String(row)});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");svg.appendChild(child)}}}};Drawing.prototype.clear=function(){while(this.bF6z.hasChildNodes())this.bF6z.removeChild(this.bF6z.lastChild)};return Drawing}();var useSVG=document.documentElement.tagName.toLowerCase()==="svg";var Drawing=useSVG?svgDrawer:!cFc3x()?function(){var Drawing=function(el,htOption){this.bF6z=el;this.iw9n=htOption};Drawing.prototype.draw=function(oQRCode){var iw9n=this.iw9n;var bF6z=this.bF6z;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(iw9n.width/nCount);var nHeight=Math.floor(iw9n.height/nCount);var aHTML=['<table style="border:0;border-collapse:collapse;">'];for(var row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++){aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?iw9n.colorDark:iw9n.colorLight)+';"></td>')}aHTML.push("</tr>")}aHTML.push("</table>");bF6z.innerHTML=aHTML.join("");var elTable=bF6z.childNodes[0];var nLeftMarginTable=(iw9n.width-elTable.offsetWidth)/2;var nTopMarginTable=(iw9n.height-elTable.offsetHeight)/2;if(nLeftMarginTable>0&&nTopMarginTable>0){elTable.style.margin=nTopMarginTable+"px "+nLeftMarginTable+"px"}};Drawing.prototype.clear=function(){this.bF6z.innerHTML=""};return Drawing}():function(){function cEJ3x(){}if(this.RI9z&&this.RI9z<=2.1){var factor=1/window.devicePixelRatio;var drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if("nodeName"in image&&/img/i.test(image.nodeName)){for(var i=arguments.length-1;i>=1;i--){arguments[i]=arguments[i]*factor}}else if(typeof dw=="undefined"){arguments[1]*=factor;arguments[2]*=factor;arguments[3]*=factor;arguments[4]*=factor}drawImage.apply(this,arguments)}}function cEu2x(fSuccess,fFail){var self=this;self.bek2x=fFail;self.bej2x=fSuccess;if(self.RM0x===null){var el=document.createElement("img");var fOnError=function(){self.RM0x=false;if(self.bek2x){self.bek2x.call(self)}};var fOnSuccess=function(){self.RM0x=true;if(self.bej2x){self.bej2x.call(self)}};el.onabort=fOnError;el.onerror=fOnError;el.onload=fOnSuccess;el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}else if(self.RM0x===true&&self.bej2x){self.bej2x.call(self)}else if(self.RM0x===false&&self.bek2x){self.bek2x.call(self)}}var Drawing=function(el,htOption){this.RN0x=false;this.RI9z=bLr0x();this.iw9n=htOption;this.Nd8V=document.createElement("canvas");this.Nd8V.width=htOption.width;this.Nd8V.height=htOption.height;el.appendChild(this.Nd8V);this.bF6z=el;this.Aj4n=this.Nd8V.getContext("2d");this.RN0x=false;this.Nf8X=document.createElement("img");this.Nf8X.alt="Scan me!";this.Nf8X.style.display="none";this.bF6z.appendChild(this.Nf8X);this.RM0x=null};Drawing.prototype.draw=function(oQRCode){var Nf8X=this.Nf8X;var Aj4n=this.Aj4n;var iw9n=this.iw9n;var nCount=oQRCode.getModuleCount();var nWidth=iw9n.width/nCount;var nHeight=iw9n.height/nCount;var nRoundedWidth=Math.round(nWidth);var nRoundedHeight=Math.round(nHeight);Nf8X.style.display="none";this.clear();for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col);var nLeft=col*nWidth;var nTop=row*nHeight;Aj4n.strokeStyle=bIsDark?iw9n.colorDark:iw9n.colorLight;Aj4n.lineWidth=1;Aj4n.fillStyle=bIsDark?iw9n.colorDark:iw9n.colorLight;Aj4n.fillRect(nLeft,nTop,nWidth,nHeight);Aj4n.strokeRect(Math.floor(nLeft)+.5,Math.floor(nTop)+.5,nRoundedWidth,nRoundedHeight);Aj4n.strokeRect(Math.ceil(nLeft)-.5,Math.ceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}}this.RN0x=true};Drawing.prototype.makeImage=function(){if(this.RN0x){cEu2x.call(this,cEJ3x)}};Drawing.prototype.isPainted=function(){return this.RN0x};Drawing.prototype.clear=function(){this.Aj4n.clearRect(0,0,this.Nd8V.width,this.Nd8V.height);this.RN0x=false};Drawing.prototype.round=function(nNumber){if(!nNumber){return nNumber}return Math.floor(nNumber*1e3)/1e3};return Drawing}();function cEq2x(sText,nCorrectLevel){var nType=1;var length=cEp2x(sText);for(var i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3];break}if(length<=nLimit){break}else{nType++}}if(nType>QRCodeLimitLength.length){throw new Error("Too long data")}return nType}function cEp2x(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length!=sText?3:0)}QRCode=function(el,vOption){this.iw9n={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H};if(typeof vOption==="string"){vOption={text:vOption}}if(vOption){for(var i in vOption){this.iw9n[i]=vOption[i]}}if(typeof el=="string"){el=document.getElementById(el)}if(this.iw9n.useSVG){Drawing=svgDrawer}this.RI9z=bLr0x();this.bF6z=el;this.bef2x=null;this.bed2x=new Drawing(this.bF6z,this.iw9n);if(this.iw9n.text){this.makeCode(this.iw9n.text)}};QRCode.prototype.makeCode=function(sText){this.bef2x=new QRCodeModel(cEq2x(sText,this.iw9n.correctLevel),this.iw9n.correctLevel);this.bef2x.addData(sText);this.bef2x.make();this.bF6z.title=sText;this.bed2x.draw(this.bef2x);this.makeImage()};QRCode.prototype.makeImage=function(){if(typeof this.bed2x.makeImage=="function"&&(!this.RI9z||this.RI9z>=3)){this.bed2x.makeImage()}};QRCode.prototype.clear=function(){this.bed2x.clear()};QRCode.CorrectLevel=QRErrorCorrectLevel})();window.QRCode=QRCode;
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;n5s.pU1x=NEJ.C();b5g=n5s.pU1x.M6G(n5s.ee7X);b5g.cA6u=function(){this.cE7x();this.yg4k=this.yg4k.f5k(this)};b5g.cd6X=function(){var data={allow:false};if(window["GDegradeConfig"]&&window["GDegradeConfig"].degradeLogin){data.degrade=true}this.cc6W=a5f.jL9C(a5f.ca6U("ntp-login-nav",data))};b5g.bo6i=function(e5j){e5j.onclose=function(){this.bC6w()}.f5k(this);this.bp6j(e5j);if(!window["GDegradeConfig"]||!window["GDegradeConfig"].degradeLogin){this.bxe7X();this.bxf7Y()}};b5g.bC6w=function(){l5q.xr4v(null,null,"check_qrcode_login");this.bI6C()};b5g.bW6Q=function(){this.ch6b();this.bLf0x=a5f.dg7Z(this.o5t);this.RV0x=this.bLf0x[1];this.RW0x=this.bLf0x[0];if(this.RV0x){var fI8A=a5f.D5I(this.RV0x,"j-flag");this.Kw8o=fI8A.shift();this.cB6v=fI8A.shift();this.bxk7d=fI8A.shift();this.eH7A=fI8A.shift();this.ux3x=fI8A.shift();this.RZ0x=fI8A.shift();this.cDu2x=a5f.D5I(this.RV0x,"other")[0]}h5m.s5x(this.o5t,"click",this.bN6H.f5k(this));l5q.jZ9Q()};b5g.bxf7Y=function(){v5A.be6Y("/api/w/user/login/type/switch",{method:"get",type:"json",onload:function(d5i){if(d5i.code===200&&d5i.data.allow){a5f.x5C(this.cDu2x,"f-hide")}else{if(this.RW0x){a5f.cR7K(this.RW0x,false)}}}.f5k(this),onerror:function(){a5f.cR7K(this.RW0x,false)}})};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action"),u5z=a5f.t5y(G5L,"type");var bxo7h=a5f.A5F("j-official-terms")||{};var Kj8b=!!bxo7h.checked;if(U6O==="login"||U6O==="reg"||U6O==="scan"){if(!Kj8b){h5m.bg6a(d5i);l5q.hr8j({message:"请先勾选同意《服务条款》、《隐私政策》、《儿童隐私政策》",clazz:"z-login-page",delay:1500,type:"info"});return}}switch(U6O){case"login":if(u5z=="mobile"){h5m.bg6a(d5i);n5s.GZ6T.I5N({title:"手机号登录",termsChecked:Kj8b})}else if(u5z=="netease"){n5s.Ev6p.I5N({title:"邮箱登录",termsChecked:Kj8b})}else{h5m.co6i(d5i);this.EZ6T=G5L.href;l5q.xs4w(this.ja9R.f5k(this));this.TQ0x=top.open()}this.br6l();break;case"reg":h5m.bg6a(d5i);if(this.xX4b)this.xX4b.V6P();this.xX4b=n5s.beV3x.B5G();this.br6l();break;case"scan":h5m.bg6a(d5i);this.ut3x();this.yp4t();this.rY1x(0,0);a5f.w5B(this.RW0x,"f-hide");a5f.x5C(this.RV0x,"f-hide");break;case"switch":h5m.bg6a(d5i);this.mB0x=null;a5f.w5B(this.RV0x,"f-hide");a5f.x5C(this.RW0x,"f-hide");l5q.xr4v(null,null,"check_qrcode_login");break}};b5g.ja9R=function(cl6f){this.EZ6T+="&checkToken="+cl6f||"";this.TQ0x.location.href=this.EZ6T};b5g.bxe7X=function(){this.Sg0x=-1;this.Sh0x=-1;this.mB0x=null;this.ut3x();this.yp4t();this.rY1x(0,0);this.bZ6T([[this.o5t,"click",this.cH7A.f5k(this)]])};b5g.cH7A=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(G5L){switch(a5f.t5y(G5L,"action")){case"refresh":this.mB0x=null;this.ut3x();this.yp4t();this.rY1x(0,0);default:break}}};b5g.rY1x=function(r5w,JQ7J){if(this.Sg0x===r5w&&this.Sh0x===JQ7J){return}if(r5w==0){document.body.className="n-login n-login-scan n-login-scan-0";a5f.x5C(this.Kw8o,"f-hide");a5f.x5C(this.eH7A,"f-hide");a5f.w5B(this.ux3x,"f-hide");a5f.w5B(this.RZ0x,"f-hide");if(JQ7J){a5f.x5C(this.cB6v,"f-hide")}else{a5f.w5B(this.cB6v,"f-hide")}}else{document.body.className="n-login n-login-scan n-login-scan-1";a5f.w5B(this.Kw8o,"f-hide");a5f.w5B(this.eH7A,"f-hide");a5f.x5C(this.ux3x,"f-hide");a5f.x5C(this.RZ0x,"f-hide")}this.Sg0x=r5w;this.Sh0x=JQ7J};b5g.bxz7s=function(){this.rY1x(0,1)};b5g.yg4k=function(){v5A.be6Y("/api/login/qrcode/client/login",{type:"json",method:"post",data:j5o.cr6l({key:this.mB0x,type:1}),onload:this.bxA7t.f5k(this),onerror:function(){n5s.Z6T.I5N({type:2,tip:"扫码登录失败，请稍后再试"})}})};b5g.bxA7t=function(m5r){if(!m5r){return}switch(m5r.code){case 803:v5A.be6Y("/api/w/nuser/account/get",{query:"",type:"json",onload:function(m5r){this.br6l();localCache.mk0x("user",m5r);l5q.xr4v(null,null,"check_qrcode_login");if(!m5r.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:m5r,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{v5A.be6Y("/api/user/grabed/status/get",{method:"GET",cookie:true,type:"json",onload:function(resp){if(resp.data&&resp.data.grabed){l5q.hk8c({title:"更换手机号",btncc:"知道了",okstyle:"f-hide",message:"您绑定的手机号已被其他账号绑定，为保护账号安全，将强制退出您在网页端的登陆状态，请在云音乐手机端尽快绑定新的手机号。",action:top.logout})}else{h5m.z5E(window,"login",{user:m5r})}},onerror:function(){console.log("[请求出错]:/api/user/grabed/status/get");top.logout()}})}}.f5k(this),onerror:function(){this.mB0x=null;this.ut3x();this.yp4t();this.rY1x(0,0)}});break;case 802:this.rY1x(1,0);break;case 801:break;case 800:l5q.xr4v(null,null,"check_qrcode_login");this.bxz7s();break;default:break}};b5g.yp4t=function(){v5A.be6Y("/api/login/qrcode/unikey",{type:"json",method:"post",data:j5o.cr6l({type:1}),onload:this.bxB7u.f5k(this),onerror:function(){n5s.Z6T.I5N({type:2,tip:"操作失败，请稍后再试"})}})};b5g.bxB7u=function(m5r){if(m5r&&m5r.code==200){this.mB0x=m5r.unikey;this.ut3x();l5q.xr4v(this.yg4k,1e3,"check_qrcode_login")}else{}};b5g.ut3x=function(){if(this.zE4I){this.zE4I.clear()}if(!this.mB0x){return}var X6R="http://music.163.com/login?codekey="+this.mB0x;if(this.zE4I){this.zE4I.makeCode(X6R)}else{this.zE4I=new QRCode(this.bxk7d,{text:X6R,width:130,height:130,correctLevel:QRCode.CorrectLevel.M})}};n5s.pU1x.I5N=n5s.pU1x.I5N.eN7G(function(d5i){n5s.GZ6T.br6l();n5s.Ev6p.br6l()})})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ci6c=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;n5s.bLe0x=NEJ.C();b5g=n5s.bLe0x.M6G(ci6c.cP7I);var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};var ACCOUNT_TYPE={MOBILE:1,TWEIBO:6};var LOGIN_ACCOUNT=[{type:1,title:"手机",key:"cellphone"},{type:0,title:"网易邮箱帐号",key:"email"},{type:2,title:"新浪微博",key:"name"},{type:10,title:"微信",key:"nickname"},{type:5,title:"QQ",key:"nickname"}];b5g.bo6i=function(e5j){this.bp6j(e5j);this.dy7r=e5j;this.tK2x=e5j.user;this.S6M=p5u.mT0x.B5G();this.S6M.s5x("onmobilecheck",this.QM9D.f5k(this));this.S6M.s5x("onmobilecheckerror",this.QN9E.f5k(this));this.S6M.s5x("onmobilebind",this.Nk8c.f5k(this));this.S6M.s5x("onmobilebinderror",this.Nl8d.f5k(this));this.S6M.s5x("onmobileupdatepwd",this.Nk8c.f5k(this));this.S6M.s5x("onmobileupdatepwderror",this.Nl8d.f5k(this));this.S6M.s5x("onactive",this.Qq9h.f5k(this));this.S6M.s5x("onactiveerror",this.bul6f.f5k(this));var bdJ2x=this.cDr2x(this.tK2x);this.bLd0x=bdJ2x;this.bLc0x=this.cDl2x(this.tK2x);if(e5j.user.account.type==ACCOUNT_TYPE.MOBILE||e5j.user.account.type==ACCOUNT_TYPE.TWEIBO){if(!bdJ2x){this.cDk2x()}else{if(bdJ2x.hasPassword){this.bLa0x()}else{this.bKZ0x({tip:'云音乐将不再支持 <strong class="s-fc1">腾讯微博</strong> 登录方式，<br/>设置登录密码，以后可以使用手机号登录',mobile:bdJ2x.uid})}}}else{this.bLa0x()}};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.ec7V)this.ec7V.V6P();if(this.nC0x)this.nC0x.V6P();if(this.kq9h)this.kq9h.V6P()};b5g.bLa0x=function(){var bA6u={0:"邮箱帐号",1:"手机号",2:"新浪微博",5:"QQ",10:"微信"},dz7s=this.tK2x,bdD2x=this.bLc0x.type==ACCOUNT_TYPE.TWEIBO?this.bLd0x:this.bLc0x;if(!dz7s.profile){if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:dz7s,requiremobile:false,onsuccess:this.vr3x.f5k(this)})}else{l5q.hk8c({title:"提示",message:"云音乐即将不支持腾讯微博登录<br/>建议你后续使用以下绑定的"+(bA6u[bdD2x.type]||"帐号")+"登录<br/><strong>"+(bdD2x.type==ACCOUNT_TYPE.MOBILE?l5q.Gl6f(bdD2x.uid):j5o.dQ7J(bdD2x.uid))+"</strong>",btnok:"查看详情",btncc:"知道了",okstyle:"u-btn2-w1",ccstyle:"u-btn2-w1",action:function(u5z){if(u5z=="ok"){location.hash="/user/binding/#/list"}else{h5m.z5E(window,"login",{user:dz7s})}},onclose:h5m.z5E.f5k(h5m,window,"login",{user:dz7s})})}};b5g.vr3x=function(d5i){h5m.z5E(window,"login",{user:d5i.user})};b5g.cDk2x=function(){this.ec7V=n5s.oR0x.I5N({title:"绑定手机号",tip:'云音乐将不再支持 <strong class="s-fc1">腾讯微博</strong> 登录方式，<br/>请绑定手机号，以免后续无法使用该帐号',onok:this.cDd2x.f5k(this)})};b5g.cDd2x=function(bi6c){this.gm8e=bi6c.mobile;this.fK8C=bi6c.countrycode;this.bfg3x=bi6c.captcha;this.S6M.bkA4E({data:{cellphone:bi6c.mobile,captcha:bi6c.captcha,countrycode:bi6c.countrycode}})};b5g.QM9D=function(bi6c){if(bi6c.nickname){this.ec7V.cQ7J(false);this.ec7V.bY6S("绑定失败，该手机号已与云音乐帐号 "+j5o.dQ7J(bi6c.nickname)+" 绑定","mobile")}else{this.bKZ0x()}};b5g.QN9E=function(){this.ec7V.br6l();n5s.Z6T.I5N({tip:"登录失败，请重试",type:2})};b5g.bKZ0x=function(bV6P){if(this.ec7V)this.ec7V.br6l();bV6P=bV6P||{};this.kq9h=n5s.MI8A.I5N({title:"设置密码",tip:bV6P.tip,mobile:bV6P.mobile,onok:this.cDa2x.f5k(this)})};b5g.cDa2x=function(bi6c){if(this.bLd0x){this.S6M.beL3x({data:{phone:this.gm8e,password:j5o.kD9u(bi6c.password),captcha:this.bfg3x}})}else{this.S6M.bSJ3x({data:{phone:this.gm8e,captcha:this.bfg3x,password:j5o.kD9u(bi6c.password)}})}};b5g.Nk8c=function(bi6c){this.kq9h.br6l();if(this.tK2x.profile||this.tK2x.account.type==ACCOUNT_TYPE.MOBILE){h5m.z5E(window,"login",{user:this.tK2x})}else if(this.tK2x.account.type==ACCOUNT_TYPE.TWEIBO){this.nC0x=n5s.Ip7i.I5N({title:"设置昵称",onok:this.cCN2x.f5k(this)})}};b5g.Nl8d=function(bi6c){this.kq9h.br6l();n5s.Z6T.I5N({tip:bi6c.message||"登录失败，请重试",type:2})};b5g.cCN2x=function(bi6c){this.S6M.bkF4J({data:{dragPwd:bi6c.dragPwd,nickname:bi6c.nickname}})};b5g.Qq9h=function(bi6c){this.nC0x.br6l();this.tK2x.profile=bi6c.profile;h5m.z5E(window,"login",{user:this.tK2x})};b5g.bul6f=function(bi6c){this.nC0x.cQ7J(false);if(bi6c.code==505)return this.nC0x.bY6S("该昵称已被占用","nickname");if(bi6c.code==407)return this.nC0x.bY6S("该昵称包含关键词","nickname");this.nC0x.br6l();n5s.Z6T.I5N({tip:bi6c.message||"登录失败，请重试",type:2})};b5g.cDr2x=function(dz7s){var vG3x=dz7s.bindings||[];var r5w=j5o.dt7m(vG3x,function(q5v){return q5v.type==ACCOUNT_TYPE.MOBILE});var pK1x=r5w>=0?vG3x[r5w]:null;if(!pK1x)return null;var cl6f=JSON.parse(pK1x.tokenJsonStr);pK1x.uid=cl6f.cellphone;pK1x.hasPassword=cl6f.hasPassword;return pK1x};b5g.cDl2x=function(dz7s){var vG3x=dz7s.bindings||[];var r5w=j5o.dt7m(vG3x,function(q5v){return q5v.type==dz7s.account.type});var pK1x=r5w>=0?vG3x[r5w]:null;if(!pK1x)return null;var cl6f=JSON.parse(pK1x.tokenJsonStr);pK1x.uid=cl6f.cellphone||cl6f.email||cl6f.name||cl6f.nickname||"";return pK1x}})();
(function(){var c5h=NEJ.P,H5M=c5h("nej.ut"),h5m=c5h("nej.v"),v5A=c5h("nej.j"),a5f=c5h("nej.e"),j5o=c5h("nej.u"),F5K=c5h("nm.m"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;F5K.Np8h=NEJ.C();b5g=F5K.Np8h.M6G(H5M.cP7I);var LOGIN_ACCOUNT=[{type:1,title:"手机",icon:"mb",key:"cellphone",uidkey:"cellphone"},{type:10,title:"微信",icon:"wx",key:"nickname",uidkey:"unionid"},{type:5,title:"QQ",icon:"qq",key:"nickname",uidkey:"openid"},{type:2,title:"新浪微博",icon:"sn",key:"name",uidkey:"uid"},{type:0,title:"网易邮箱帐号",icon:"urs",key:"email",uidkey:"email"},{type:13,title:"Facebook",icon:"urs",key:"nickname",uidkey:"uid"}];var SHARE_ACCOUNT=[{type:4,title:"人人",icon:"rr",key:"user.name",uidkey:"user.id"},{type:3,title:"豆瓣",icon:"db",key:"douban_user_name",uidkey:"douban_user_id"}];var TWEIBO={type:6,title:"腾讯微博",icon:"tc",key:"nick",uidkey:"openId"};var ALL_ACCOUNT=LOGIN_ACCOUNT.concat(SHARE_ACCOUNT,TWEIBO);b5g.cA6u=function(e5j){this.cE7x(e5j);window.login=this.cCu2x.f5k(this);window.logout=this.bKU0x.f5k(this);window.reg=this.cCh2x.f5k(this);h5m.s5x(window,"login",this.bdx2x.f5k(this));window.g_cbLogin=this.vO3x.f5k(this);window.g_cbBind=this.cBO2x.f5k(this);window.g_cbDeleteBind=this.cBN2x.f5k(this);window.g_cbVerify=this.QV9M.f5k(this);this.byr7k()};b5g.byr7k=function(){var dz7s={account:{},profile:{},bindings:[]};if(typeof GUser!=="undefined"){dz7s.profile.userId=GUser.userId;dz7s.profile.nickname=GUser.nickname;dz7s.profile.avatarUrl=GUser.avatarUrl}if(typeof GBinds!=="undefined"){dz7s.bindings=GBinds}localCache.mk0x("user",dz7s);this.bys7l=p5u.mT0x.B5G();this.bys7l.s5x("onlogout",this.cBM2x.f5k(this));this.bys7l.s5x("onmainaccountreplace",this.vO3x.f5k(this));if(!this.cBF2x(dz7s))this.bKU0x()};b5g.cCu2x=function(u5z){n5s.pU1x.br6l();n5s.GZ6T.br6l();n5s.Ev6p.br6l();if(typeof u5z==="undefined")return n5s.pU1x.I5N({title:"登录"});if(u5z===0)return n5s.GZ6T.I5N({title:"手机号登录"});return n5s.Ev6p.I5N({title:"网易邮箱帐号登录"})};b5g.cCh2x=function(){if(this.xX4b)this.xX4b.V6P();this.xX4b=n5s.beV3x.B5G()};b5g.bdx2x=function(d5i){try{v5A.be6Y("/api/privacy/info/save",{method:"POST",sync:true,cookie:true,type:"json",timeout:5e3,onload:function(){},onerror:function(){console.log("[请求出错]:api/privacy/info/save")}})}catch(e){console.log("[请求出错]:api/privacy/info/save")}if(typeof GUser==="object"&&d5i.user&&d5i.user.profile){var IY7R=d5i.user.profile;GUser.userId=IY7R.userId;GUser.nickname=IY7R.nickname;GUser.avatarUrl=IY7R.avatarUrl;GUser.djStatus=IY7R.djStatus}if(this.bxV7O("loginsuccess")){this.z5E("loginsuccess")}else{location.reload()}};b5g.vO3x=function(m5r){if(m5r&&m5r.code==250){n5s.Z6T.I5N({tip:m5r.message||"登录异常",type:2});return}if(m5r.code==702){this.bLz0x=n5s.QT9K.I5N({title:"网易云音乐",mobile:m5r.phone,countrycode:m5r.countrycode,loginType:m5r.loginType});return}if(!m5r||m5r.code!=200)return;var kx9o=JSON.stringify(m5r);localCache.mk0x("user",JSON.parse(kx9o));if(m5r.loginType==6){if(this.bKR0x)this.bKR0x.V6P();this.bKR0x=n5s.bLe0x.B5G({user:m5r,onsuccess:this.bdx2x.f5k(this)})}else{if(m5r.profile){this.bdx2x({user:m5r})}else{if(this.lp9g)this.lp9g.V6P();this.lp9g=n5s.zP4T.B5G({user:m5r,requiremobile:this.cBr2x(m5r),onsuccess:this.bdx2x.f5k(this)})}}};b5g.cBO2x=function(bi6c){var d5i=bi6c.code==200?"snsbind":"snsbinderror",eP7I=a5f.A5F("g_iframe");if(bi6c.code==200){var dz7s=localCache.A5F("user")||{},pK1x=NEJ.X(bi6c,{refreshTime:+(new Date)/1e3|0,tokenJsonStr:JSON.stringify({expires_in:bi6c.expires_in})}),r5w=-1;dz7s.bindings=dz7s.bindings||[];j5o.bf6Z(dz7s.bindings,function(cBq2x,zu4y){if(cBq2x.type==bi6c.type)r5w=zu4y});if(r5w>=0){dz7s.bindings[r5w]=pK1x}else{dz7s.bindings.push(pK1x)}v5A.be6Y("/api/point/sns",{type:"json",method:"get",query:{snsType:bi6c.type},onload:function(i5n){var bR6L=bi6c.point||i5n.point;if(bR6L>0){n5s.dX7Q({title:"绑定成功",type:"success",mesg:'绑定成功 获得<em class="s-fc6">'+bR6L+"积分</em>"})}else{n5s.Z6T.I5N({tip:"绑定成功"})}}.f5k(this)})}else{var r5w=j5o.dt7m(ALL_ACCOUNT,function(q5v){return q5v.type==bi6c.type});var es7l=r5w>=0?ALL_ACCOUNT[r5w].title:"";if(bi6c.message){n5s.dX7Q({title:"绑定"+es7l,type:"fail",mesg:"绑定失败",mesg2:bi6c.message})}else{n5s.Z6T.I5N({tip:"绑定失败，请重试",type:2})}}try{var bM6G=eP7I.contentWindow;bM6G.nej.v.z5E(bM6G,d5i,{result:bi6c})}catch(e){}h5m.z5E(window,d5i,{result:bi6c})};b5g.cBN2x=function(bi6c){var d5i=bi6c.code==200?"snsunbind":"snsunbinderror",eP7I=a5f.A5F("g_iframe");if(bi6c.code==200){n5s.Z6T.I5N({tip:"已解除绑定"})}else if(bi6c.message){n5s.dX7Q({title:"解除绑定",type:"fail",mesg:"解绑失败",mesg2:bi6c.message})}else{n5s.Z6T.I5N({tip:"解绑失败，请重试",type:2})}try{var bM6G=eP7I.contentWindow;bM6G.nej.v.z5E(bM6G,d5i,{result:bi6c})}catch(e){}h5m.z5E(window,d5i,{result:bi6c})};b5g.QV9M=function(bi6c){console.log(bi6c,"rsp");var d5i=bi6c.code==200?"snsverify":"snsverifyerror",eP7I=a5f.A5F("g_iframe");if(bi6c.code==200){}else{if(bi6c.message){n5s.dX7Q({title:"验证失败",type:"fail",mesg:"验证失败",mesg2:bi6c.message})}else{n5s.Z6T.I5N({tip:"验证失败，请重试",type:2})}}try{var bM6G=eP7I.contentWindow;bM6G.nej.v.z5E(bM6G,d5i,{result:bi6c})}catch(e){}h5m.z5E(window,d5i,{result:bi6c})};b5g.bKU0x=function(){var d5i={};this.z5E("beforedologout",d5i);if(d5i.stopped){return}v5A.gN8F("MUSIC_U",{expires:-1});this.bys7l.cqd9U();window.GUser={};this.z5E("logoutbefore")};b5g.cBM2x=function(m5r){localCache.cR7K("user");localCache.cR7K("host-plist");if(typeof GUser==="object"){GUser.userId=0;GUser.nickname="";GUser.avatarUrl=""}if(this.bxV7O("logoutsuccess")){this.z5E("logoutsuccess")}else{location.reload()}};b5g.cBF2x=function(dz7s){var byD7w=false;if(!dz7s.bindings||dz7s.bindings.length==0)return true;j5o.bf6Z(dz7s.bindings,function(q5v){if(q5v.type==0||q5v.type==2||q5v.type==5||q5v.type==10||q5v.type==13){byD7w=true}else if(q5v.type==1){var cl6f=JSON.parse(q5v.tokenJsonStr||"{}");if(cl6f.hasPassword){byD7w=true}}});return byD7w};b5g.cBr2x=function(i5n){return i5n&&i5n.loginType!=13};H5M.fP8H.B5G({element:window,event:["login","snsbind","snsbinderror","snsunbind","snsunbinderror","snsverify","snsverifyerror"]});F5K.Np8h.fR8J()})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),bd6X=c5h("nej.ui"),H5M=c5h("nej.ut"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),b5g;y5D.Rx9o=NEJ.C();b5g=y5D.Rx9o.M6G(bd6X.er7k);b5g.bW6Q=function(){this.ch6b();var k5p=a5f.dg7Z(this.o5t);this.JE7x=k5p[0];this.cy6s=k5p[1];this.bO6I=k5p[2]};b5g.cd6X=function(){this.cc6W="g-select"};b5g.bo6i=function(e5j){this.bp6j(e5j);this.bZ6T([[this.cy6s,"click",this.rr1x.f5k(this)],[this.bO6I,"click",this.ll9c.f5k(this)],[document,"click",this.pP1x.f5k(this)]]);this.bvI7B=e5j.filter||this.crU9L;this.lu9l(e5j.list)};b5g.bC6w=function(){this.bI6C();delete this.bX6R;delete this.xG4K;delete this.bvI7B};b5g.lu9l=function(k5p,kM9D){if(!k5p){this.JE7x.innerText="－请选择－";return}this.bX6R=k5p;a5f.dw7p(this.bO6I,"g-select-item",{options:k5p},{filter:this.bvI7B});this.jA9r(kM9D||k5p[0])};b5g.ml0x=function(){return this.bX6R};b5g.gn8f=function(){return this.xG4K};b5g.jA9r=function(C5H){if(this.xG4K!=C5H){this.xG4K=C5H;this.JE7x.innerText=this.bvI7B(C5H);this.z5E("onchange",C5H)}};b5g.rr1x=function(d5i){h5m.bg6a(d5i);if(a5f.bE6y(this.bO6I,"f-hide")){if(!this.bX6R||!this.bX6R.length)return;a5f.x5C(this.bO6I,"f-hide")}else{a5f.w5B(this.bO6I,"f-hide")}};b5g.pP1x=function(){a5f.w5B(this.bO6I,"f-hide")};b5g.ll9c=function(d5i){var g5l=h5m.ba6U(d5i,"d:index"),r5w=a5f.t5y(g5l,"index");if(g5l){this.jA9r(this.bX6R[r5w])}};b5g.crU9L=function(dO7H){return dO7H.name}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ds7l=c5h("nej.p"),bd6X=c5h("nej.ui"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),gJ8B=c5h("nm.ut"),b5g,L5Q;y5D.Db5g=NEJ.C();b5g=y5D.Db5g.M6G(bd6X.er7k);L5Q=y5D.Db5g.ct6n;b5g.bo6i=function(e5j){this.bp6j(e5j);this.eJ7C=e5j.type||1;if(a5f.il8d("program-data")){this.fX8P=JSON.parse(a5f.il8d("program-data"))}this.el7e=e5j.resource||{};this.tD2x=a5f.oP0x(a5f.ca6U("m-wgt-input-"+this.eJ7C,{placeholder:e5j.placeholder||""}));this.bIQ0x=e5j.type==2?true:false;var k5p=a5f.D5I(this.tD2x,"j-flag");this.gC8u=k5p[0];this.bjP4T=a5f.D5I(this.tD2x,"btns")[0];this.mt0x=k5p[3];this.cqt9k=k5p[4];a5f.gX8P(this.gC8u,"holder");if(a5f.bE6y(this.gC8u.parentNode,"holder-parent")){a5f.bc6W(this.gC8u.parentNode,"display","block")}this.gC8u.value=e5j.input||"";this.o5t.appendChild(this.tD2x);this.qk1x={start:0,end:0};if(!e5j.nomention){this.hS8K=y5D.TH0x.B5G({parent:document.body,target:this.gC8u})}else{a5f.bc6W(k5p[2],"display","none")}this.bkv4z=e5j.numLimit||140;this.gz8r();this.cqa9R();this.bZ6T([[this.mt0x,"click",this.uZ3x.f5k(this)],[k5p[2],"click",this.bjT4X.f5k(this)],[k5p[1],"click",this.bjU4Y.f5k(this)],[this.gC8u,"focus",this.lc9T.f5k(this)],[this.gC8u,"blur",this.ox0x.f5k(this)],[this.gC8u,"input",this.fc8U.f5k(this)],[this.gC8u,"keyup",this.wD3x.f5k(this)],[this.gC8u,"click",this.mE0x.f5k(this)]]);if(!j5o.gU8M(e5j.onbeforesubmit))this.s5x("onbeforesubmit",this.cpH9y.f5k(this));if(!j5o.gU8M(e5j.onloading))this.s5x("onloading",this.cpy9p.f5k(this));v5A.be6Y("/api/gorilla/switch/emojy/status?platform=web&product=cloudmusic",{type:"json",method:"get",onload:function(res){var status=res.data[0].status;if(status===5){a5f.w5B(k5p[1],"f-hide")}else{a5f.x5C(k5p[1],"f-hide")}}.f5k(this)})};b5g.bC6w=function(){this.gC8u.value="";if(this.hN8F){this.hN8F.V6P();delete this.hN8F}if(this.hS8K){this.hS8K.V6P();delete this.hS8K}this.bI6C();a5f.cR7K(this.tD2x)};b5g.cpH9y=function(){var C5H=this.gC8u.value;if(this.mt0x.className.indexOf("dis")>=0)return;if(!this.HZ7S()||!this.CO5T())return;if(l5q.kS9J(C5H)){n5s.Z6T.I5N({type:2,tip:"输入点内容再提交吧"});return}if(j5o.fO8G(C5H)>2*this.bkv4z){n5s.Z6T.I5N({type:2,tip:"输入不能超过"+this.bkv4z+"个字符"});return}return!0};b5g.cpy9p=function(){a5f.w5B(this.mt0x,"u-btn-1-dis");if(this.mt0x.innerText.indexOf("...")<0){this.mt0x.innerText=this.mt0x.innerText+"..."}this.vh3x=!0};b5g.Cg5l=function(){if(!this.vh3x)return;this.vh3x=!1;a5f.x5C(this.mt0x,"u-btn-1-dis");var cK7D=this.mt0x.innerText;this.mt0x.innerText=cK7D.substring(0,cK7D.length-3)};b5g.mE0x=function(){this.qk1x=gJ8B.xl4p(this.gC8u)};b5g.uZ3x=function(ic8U){h5m.bg6a(ic8U);l5q.sd1x(function(){var C5H=this.gC8u.value;if(!this.z5E("onbeforesubmit",{value:C5H}))return;if(this.eJ7C!=4)this.z5E("onloading");gJ8B.bMJ1x(C5H);if(this.hS8K){this.hS8K.Iv7o()}if(this.hN8F){this.hN8F.br6l()}this.z5E("onsubmit",C5H);this.gz8r()}.f5k(this));return false};b5g.qK1x=function(){this.gC8u.value="";this.gz8r()};b5g.gn8f=function(){return this.gC8u.value||""};b5g.nc0x=function(){var jo9f=this.gC8u;var u5z=a5f.t5y(jo9f,"type");this.nu0x=u5z;if(!this.CO5T())return;var bt6n=this.gn8f().length;this.gC8u.focus();gJ8B.bhn3x(this.gC8u,{start:bt6n,end:bt6n});this.mE0x()};b5g.bjT4X=function(d5i){h5m.bg6a(d5i);if(!this.CO5T())return;!!this.hN8F&&this.hN8F.br6l();this.hS8K.TD0x();this.gz8r()};b5g.bjU4Y=function(d5i){h5m.bg6a(d5i);if(!this.CO5T())return;if(!this.hN8F){this.hN8F=n5s.Lj8b.B5G({parent:this.bjP4T,rightwards:this.eJ7C==6});this.hN8F.s5x("onselect",this.AS5X.f5k(this));a5f.bc6W(this.hN8F.mx0x().parentNode,"position","relative")}this.hN8F.I5N();this.z5E("onemotlayershow");if(this.hS8K){this.hS8K.Iv7o()}};b5g.AS5X=function(d5i){var bq6k="["+d5i.text+"]";h5m.z5E(this.gC8u,"focus");this.gC8u.focus();gJ8B.Lt8l(this.gC8u,this.qk1x,bq6k);this.gz8r();h5m.z5E(this.gC8u,"keyup")};b5g.fc8U=function(d5i){ds7l.dB7u.browser=="ie"&&ds7l.dB7u.version<"7.0"?setTimeout(this.gz8r.f5k(this),0):this.gz8r()};b5g.wD3x=function(d5i){this.mE0x();if(this.bIQ0x)this.cpk9b();this.fc8U()};b5g.HZ7S=function(){if(!GUser||!GUser.userId||GUser.userId<0){top.login();return}return true};b5g.lc9T=function(d5i){var g5l=h5m.ba6U(d5i,"d:type");var u5z=a5f.t5y(g5l,"type");this.nu0x=u5z;if(!this.HZ7S()){this.gC8u.blur();return}if(!this.CO5T()){this.gC8u.blur();return}this.z5E("onfocus")};b5g.ox0x=function(){this.z5E("onblur")};b5g.gz8r=function(){var bt6n=this.bkv4z-Math.ceil(j5o.fO8G(this.gC8u.value)/2);this.cqt9k.innerHTML=bt6n>=0?bt6n:'<em class="s-fc6">'+bt6n+"</em>"};b5g.cpk9b=function(){var Jh7a=76;var coZ9Q=function(){if(parseInt(cj6d)>Jh7a){a5f.bc6W(this.gC8u,"height","auto");a5f.bc6W(this.gC8u,"height",Jh7a+"px");a5f.bc6W(this.gC8u,"overflowY","scroll")}else{a5f.bc6W(this.gC8u,"height","auto");a5f.bc6W(this.gC8u,"height",cj6d);a5f.bc6W(this.gC8u,"overflowY","hidden")}}.f5k(this);var un3x=function(string,number){for(var i=0,r="";i<number;i++)r+=string;return r};this.Ox9o.innerHTML=this.gC8u.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return un3x("&nbsp;",space.length-1)+" "})+"&nbsp";var cj6d=this.Ox9o.offsetHeight>this.Oy9p?this.Ox9o.offsetHeight:this.Oy9p;cj6d+="px";var cQT6N=a5f.dl7e(this.gC8u,"height");setTimeout(coZ9Q,10)};b5g.Xf1x=function(){var qJ1x=["overflowX","overflowY","fontSize","fontFamily","lineHeight"];for(var i=0;i<qJ1x.length;i++){a5f.bc6W(this.Ox9o,qJ1x[i],a5f.dl7e(this.gC8u,qJ1x[i]))}var cL7E=this.gC8u.offsetWidth-parseInt(a5f.dl7e(this.gC8u,"paddingLeft"))-parseInt(a5f.dl7e(this.gC8u,"paddingRight"))+"px";a5f.bc6W(this.Ox9o,"width",cL7E)};b5g.cqa9R=function(){if(this.bIQ0x){if(!a5f.D5I(document.body,"shadow-textarea")[0]){var eg7Z='<div style="position:absolute;border: none;left:-10000px;word-wrap: break-word;overflow: hidden;resize:none" class="shadow-textarea"></div>';var g5l=a5f.oP0x(eg7Z);document.body.appendChild(g5l);this.Ox9o=a5f.D5I(document.body,"shadow-textarea")[0]}else{this.Ox9o=a5f.D5I(document.body,"shadow-textarea")[0]}this.Oy9p=parseInt(a5f.dl7e(this.gC8u,"height"));a5f.bc6W(this.gC8u,"overflow","hidden");this.Xf1x()}};b5g.CO5T=function(){var d5i={};if(this.fX8P&&this.fX8P.buyed!=true&&this.fX8P.programFeeType>=10||this.fX8P&&this.fX8P.buyed!=true&&this.fX8P.programFeeType==5&&this.fX8P.radio.radioFeeType==2||this.fX8P&&this.fX8P.buyed!=true&&this.fX8P.radio.feeScope==1&&!(this.fX8P.radio.radioFeeType==0&&this.nu0x==11)){var bsr6l=this.fX8P.radio.id,bsq6k="djradio";l5q.Xy1x({id:bsr6l,radiotype:bsq6k})}else{this.z5E("oncheckvalid",d5i);return!d5i.stopped}}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,j5o=c5h("nej.u"),h5m=c5h("nej.v"),H5M=c5h("nej.ut"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;p5u.fu8m({"message_chat-add":{url:"/api/msg/private/send",filter:function(e5j){this.LY8Q(e5j,0)},format:function(m5r,e5j){this.byc7V(m5r.newMsgs);if(e5j.justSend){return m5r}else{return m5r.newMsgs.reverse()}},finaly:function(d5i,e5j){if(!d5i)return;if(!e5j.justSend){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"unshift",limit:d5i.limit,offset:0})}this.z5E("onafteritemaddd")},onmessage:function(cf6Z){var cT7M="";if(cf6Z==407){cT7M="发送内容中不得包含非法字符"}else if(cf6Z==406||cf6Z==405){cT7M="输入过于频繁，请稍后再试"}else if(cf6Z==408){cT7M="请不要重复发送"}else if(cf6Z==315){cT7M="根据对方设置，你没有该操作权限"}if(!!cT7M)n5s.Z6T.I5N({tip:cT7M,type:2})}},"message_chat-del":{url:"/api/msg/private/delete/single",format:function(Q6K,e5j){return Q6K.code==200},finaly:function(d5i,e5j){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"delete",data:e5j.data});this.z5E("onafteritemdelete")},onmessage:function(cf6Z){}},"message_chat-list":{url:"/api/msg/private/history",filter:function(e5j,bm6g){if(window.location.href.indexOf("noticeaccountflag=true")!==-1){bm6g.url="/api/msg/private/noticeaccount/history"}else{bm6g.url="/api/msg/private/history"}this.LY8Q(e5j);delete e5j.data.offset},format:function(m5r,e5j){var WR1x=m5r.msgs||m5r.data.msgs;this.byc7V(WR1x);if(m5r.more||m5r.data&&m5r.data.hasMore){for(var i=WR1x.length;i<e5j.limit;i++){WR1x.push(null)}}else{return{total:e5j.offset+e5j.limit,list:WR1x}}return WR1x}},"message_chat-pull":{url:"/api/msg/private/new",filter:function(e5j){this.LY8Q(e5j,0)},format:function(m5r){return m5r.msgs}},"message_private-list":{url:"/api/msg/private/users",filter:function(e5j){},format:function(m5r,e5j){var cF7y=m5r.size||0,k5p=m5r.msgs;this.byf7Y(k5p);if(e5j.offset+e5j.limit<cF7y){k5p.length=e5j.limit}return{total:cF7y,list:k5p}}},"message_private-pull":{url:"/api/msg/private/users",filter:function(e5j){e5j.data.time=-1},format:function(m5r,e5j){this.vY3x(e5j.key);this.byf7Y(m5r.msgs);return m5r.msgs}},"message_private-del":{type:"GET",url:"/api/msg/private/delete",filter:function(e5j){var E5J=e5j.id;if(E5J)e5j.data={userId:E5J.split("-")[1]}},format:function(Q6K,e5j){return Q6K},finaly:function(d5i,e5j){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"refresh"})},onmessage:function(cf6Z){}},"message_comment-list":{url:"/api/v1/user/comments/{uid}",filter:function(e5j){this.LY8Q(e5j);e5j.data.beforeTime=e5j.data.time;delete e5j.data.time;delete e5j.data.offset},format:function(m5r,e5j){if(e5j.data.offset==0)this.z5E("onnewcount",m5r.newCount);this.cqj9a(m5r);return{list:m5r.comments}}},"message_comment-del":{url:"/api/user/comments/delete",finaly:function(d5i,e5j){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"refresh"})}},"message_user_comment-reply":{url:"/api/user/comments/reply",format:function(Q6K){this.z5E("onreply");n5s.Z6T.I5N({tip:"回复成功"});return Q6K},onmessage:function(cf6Z,m5r){if(cf6Z==250){n5s.Z6T.I5N({tip:m5r.message||m5r.msg||"评论异常",type:2});return}n5s.Z6T.I5N({tip:"回复失败，请稍后再试",type:2})}},"message_resource_comment-reply":{url:"/api/resource/comments/reply",onmessage:function(cf6Z,m5r){if(cf6Z==250){n5s.Z6T.I5N({tip:m5r.message||m5r.msg||"评论异常",type:2});return}}},"message_notify-list":{url:"/api/msg/notices",filter:function(e5j){this.LY8Q(e5j);delete e5j.data.offset},format:function(m5r,e5j){if(e5j.data.offset==0)this.z5E("onnewcount",m5r.newCount);this.cpL9C(m5r);return{list:m5r.notices}}},"message_notify-del":{url:"TODO",format:function(Q6K,e5j){return e5j.ext},finaly:function(d5i,e5j){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"refresh"})},onmessage:function(cf6Z){l5q.blx4B({txt:"通知删除失败！"})}},"message_at-list":{url:"/api/forwards/get",filter:function(e5j){},format:function(m5r,e5j){j5o.bf6Z(m5r.forwards,function(q5v,r5w){q5v.isNew=r5w<m5r.newCount});m5r.forwards.length=e5j.limit;return{total:m5r.size,list:m5r.forwards}}},"message_at-pull":{url:"/api/forwards/get",filter:function(e5j){this.LY8Q(e5j,0)},format:function(m5r,e5j){return m5r.forwards}},"message_at-del":{url:"TODO",format:function(Q6K,e5j){return e5j.ext},finaly:function(d5i,e5j){h5m.z5E(p5u.nl0x,"listchange",{key:e5j.key,action:"refresh"})},onmessage:function(cf6Z){l5q.blx4B({txt:"@消息删除失败！"})}},"event-like":{url:"/api/resource/like",onload:"oneventlike",filter:function(e5j,bm6g){if(e5j.like){bm6g.url="/api/resource/like";bm6g.onload="oneventlike"}else{bm6g.url="/api/resource/unlike";bm6g.onload="oneventunlike"}},format:function(m5r,e5j){m5r.id=e5j.id;m5r.isInner=!!e5j.isInner;return m5r}}});p5u.nl0x=NEJ.C();b5g=p5u.nl0x.M6G(p5u.hT8L);L5Q=p5u.nl0x.ct6n;b5g.Ab4f=function(e5j,q5v){if(!j5o.ef7Y(q5v)){return L5Q.Ab4f.apply(this,arguments)}j5o.bf6Z(q5v,function(i5n){L5Q.Ab4f.apply(this,[e5j,i5n])},this);return{limit:q5v.length}};b5g.cpK9B=function(q5v){if(!j5o.ef7Y(q5v)){if(q5v.type==1){q5v.json=this.bDM9D(q5v.json,q5v.id)}else if(q5v.type==2){q5v.json=JSON.parse(q5v.json);q5v.json.resource=this.bDM9D(q5v.json.resource)}else if(q5v.type==3){q5v.json=JSON.parse(q5v.json)}return}j5o.bf6Z(q5v,this.cpK9B,this)};b5g.bDM9D=function(tw2x){if(j5o.fT8L(tw2x)){tw2x=JSON.parse(tw2x)}if(!!tw2x.json&&j5o.fT8L(tw2x.json)){tw2x.json=JSON.parse(tw2x.json);if(!!tw2x.json.event&&!!tw2x.json.event.json&&j5o.fT8L(tw2x.json.event.json)){tw2x.json.event.json=JSON.parse(tw2x.json.event.json)}}return tw2x};b5g.byc7V=function(q5v){if(!j5o.ef7Y(q5v)){q5v.msg=JSON.parse(q5v.msg||"{}");return}j5o.bf6Z(q5v,this.byc7V,this)};b5g.byf7Y=function(q5v){if(!j5o.ef7Y(q5v)){q5v.id=q5v.toUser.userId+"-"+q5v.fromUser.userId;q5v.lastMsg=JSON.parse(q5v.lastMsg);return}j5o.bf6Z(q5v,this.byf7Y,this)};b5g.cqj9a=function(i5n){var bA6u={0:"/playlist?id={id}",1:"/dj?id={id}",2:"/event?id={id}&uid={userId}",3:"/album?id={id}",4:"/song?id={id}",5:"/mv?id={id}",6:"/topic?id={id}",62:"/video?id={id}&toast=true"};j5o.bf6Z(i5n.comments,function(q5v,r5w){try{q5v.resourceJson=JSON.parse(q5v.resourceJson)}catch(e){q5v.resourceJson=null}if(q5v.resourceJson){if(q5v.resourceType!==62||q5v.resourceJson.id){q5v.resUrl=l5q.bar2x(bA6u[q5v.resourceType],q5v.resourceJson)}}},this)};b5g.cpL9C=function(){var cor9i=function(bT6N){var Q6K,cS7L="";try{Q6K=JSON.parse(bT6N.json)}catch(e){Q6K={}}switch(bT6N.type){case 12:cS7L="我创建了歌单";cS7L=cS7L+"「"+Q6K.playlist.name+"」by "+Q6K.playlist.creator.nickname;break;case 13:cS7L="我分享了歌单";cS7L=cS7L+"「"+j5o.dQ7J(Q6K.playlist.name)+"」by "+Q6K.playlist.creator.nickname;break;case 14:cS7L="我收藏了歌单";cS7L=cS7L+"「"+j5o.dQ7J(Q6K.playlist.name)+"」by "+Q6K.playlist.creator.nickname;break;case 15:case 16:cS7L="我创建了节目";cS7L=cS7L+"「"+Q6K.program.name+"」by "+Q6K.program.dj.nickname;break;case 17:cS7L="我分享了节目";cS7L=cS7L+"「"+Q6K.program.name+"」by "+Q6K.program.dj.nickname;break;case 18:cS7L="我分享了歌曲";cS7L=cS7L+"「"+Q6K.song.name+"」by ";for(var i=0,l=Q6K.song.artists.length;i<l;i++){cS7L=cS7L+Q6K.song.artists[i].name;if(i<l-1)cS7L=cS7L+"/"}break;case 19:cS7L="我分享了专辑";cS7L=cS7L+"「"+Q6K.album.name+"」by "+Q6K.album.artist.name;break;case 36:cS7L="我分享了歌手";cS7L=cS7L+"「"+Q6K.resource.name+"」";break;case 21:cS7L="我分享了MV";cS7L=cS7L+"「"+Q6K.mv.name+"」by "+Q6K.mv.artistName;break;case 22:cS7L="我的动态:"+(l5q.zf4j(j5o.dQ7J(Q6K.msg),"s-fc3")||"转发");break;case 23:cS7L="我收藏了节目";cS7L=cS7L+"「"+Q6K.program.name+"」by "+Q6K.program.dj.nickname;break;case 24:cS7L="我分享了专栏文章";cS7L=cS7L+"「"+Q6K.topic.mainTitle+"」";break;case 28:cS7L="我分享了电台";cS7L=cS7L+"「"+Q6K.djRadio.name+"」by "+Q6K.djRadio.dj.nickname;break;case 31:cS7L="我分享了评论：";cS7L=cS7L+l5q.zf4j((Q6K.resource||bb6V).content||"");if(Q6K.resource&&Q6K.resource.expressionUrl){cS7L+="[表情图片]"}break;case 35:cS7L="我的动态:"+l5q.zf4j(j5o.dQ7J(Q6K.msg),"s-fc3")+(bT6N.pics&&bT6N.pics.length?"[图片]":"");break;case 39:cS7L="我发布了视频";cS7L=cS7L+"「"+Q6K.video.title+"」";break;case 41:cS7L="我分享了视频";cS7L=cS7L+"「"+Q6K.video.title+"」";break}Q6K.str=cS7L;return Q6K};var cok9b=function(FG6A){var bA6u={A_PL_0:"playlist",R_MV_5:"mv",A_TO_6:"topic",A_DJ_1:"dj",A_EV_2:"event",R_AL_3:"album",R_SO_4:"song",A_DR_14:"radio",R_VI_62:"video"};if(/^(\w_\w{2}_\d+)+_(.+)$/.test(FG6A)){var u5z=bA6u[RegExp.$1],cq6k=RegExp.$2.split("_");return"/"+u5z+"?id="+cq6k[0]+(u5z=="event"?"&uid="+cq6k[1]:"")+"&_hash=comment-box&toast=true"}};var cnU8M=function(eM7F){var eM7F=JSON.parse(eM7F);switch(eM7F.type){case 1:if(!eM7F.track)return;eM7F.msg="赞了你的动态";eM7F.url="/event?toast=true&id="+eM7F.track.id+"&uid="+GUser.userId;eM7F.track=cor9i(eM7F.track);break;case 2:eM7F.msg="收藏了你的歌单";eM7F.url="/playlist?id="+eM7F.playlist.id;eM7F.res=eM7F.playlist;break;case 3:eM7F.msg="分享了你的歌单";eM7F.url="/playlist?id="+eM7F.playlist.id;eM7F.res=eM7F.playlist;break;case 4:eM7F.msg="分享了你的节目";eM7F.url="/dj?id="+eM7F.program.id;eM7F.res=eM7F.program;break;case 5:eM7F.msg="收藏了你的节目";eM7F.url="/dj?id="+eM7F.program.id;eM7F.res=eM7F.program;break;case 6:eM7F.msg="赞了你的评论";eM7F.url=cok9b(eM7F.comment.threadId);eM7F.comment=eM7F.comment;break;case 7:eM7F.msg="赞了你的节目";eM7F.url="/dj?id="+eM7F.program.id;eM7F.res=eM7F.program;break;case 8:eM7F.msg="订阅了你的电台";eM7F.url="/radio?id="+eM7F.djRadio.id;eM7F.res=eM7F.djRadio;break;case 9:eM7F.msg="赞了你的专栏文章";eM7F.url="/topic?id="+eM7F.topic.id;eM7F.topic=eM7F.topic;break;case 10:if(!eM7F.generalNotice)return;eM7F.msg=eM7F.generalNotice.actionDesc;eM7F.url=eM7F.generalNotice.webUrl;if(eM7F.url.indexOf("/video?id=")==0){eM7F.url+="&toast=true"}eM7F.generalContent=eM7F.generalNotice.content;break}return eM7F};return function(i5n){j5o.bf6Z(i5n.notices,function(q5v,r5w){q5v.notice=cnU8M(q5v.notice)},this)}}();b5g.LY8Q=function(e5j,r5w,J5O){var bB6v=-1,k5p=this.hW8O(e5j.key),bn6h=e5j.offset;bn6h=bn6h!=null?bn6h:k5p.length;if(bn6h>0&&k5p.length>0){var cnj8b=0;r5w=r5w!=null?r5w:bn6h-1;while(r5w>=0&&!k5p[r5w]){r5w--;cnj8b++}if(r5w>=0&&k5p[r5w]){bB6v=k5p[r5w][J5O||"time"]}}e5j.data.time=bB6v};b5g.cnd8V=function(e5j){e5j.onload=this.bDJ9A.f5k(this);e5j.onerror=this.bDJ9A.f5k(this);this.ck6e("message_resource_comment-reply",e5j)};b5g.bDJ9A=function(d5i){this.z5E("onreply2",d5i)};b5g.bki4m=function(e5j){this.ck6e("message_user_comment-reply",e5j)};b5g.Kf8X=function(d5i){this.z5E("onreply",d5i)};b5g.bkD4H=function(e5j){e5j.onload=this.Wk1x.f5k(this);this.ck6e("message_chat-add",e5j)};b5g.Wk1x=function(d5i){this.z5E("onsend",d5i)};b5g.pR1x=function(e5j){this.ck6e("event-like",e5j)};H5M.fP8H.B5G({element:p5u.nl0x,event:"listchange"})})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),v5A=c5h("nej.j"),bb6V=c5h("nej.o"),j5o=c5h("nej.u"),h5m=c5h("nej.v"),ds7l=c5h("nej.p"),y5D=c5h("nm.w"),l5q=c5h("nm.x"),bH6B=c5h("nej.ui"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),b5g,L5Q;n5s.vH3x=NEJ.C();b5g=n5s.vH3x.M6G(n5s.ee7X,!0);L5Q=n5s.vH3x.prototype;b5g.cd6X=function(){this.cc6W="m-msg-private-send"};b5g.bW6Q=function(){this.ch6b();var bQ6K=a5f.D5I(this.o5t,"j-flag");this.wg3x={parent:bQ6K[1],err:bQ6K[0]};this.fz8r={parent:bQ6K[2],type:4,nomention:true,numLimit:200,onsubmit:this.Wi1x.f5k(this)};if(ds7l.dB7u.browser=="ie"&&ds7l.dB7u.version<"8.0"){a5f.bc6W(bQ6K[0],"position","relative");a5f.bc6W(bQ6K[0],"zIndex","10")}l5q.jZ9Q()};b5g.bo6i=function(e5j){l5q.sd1x(function(){e5j.parent=document.body;e5j.onclose=function(){this.bC6w()}.f5k(this);e5j.mask=true;this.bp6j(e5j);!!e5j.receiver&&(this.wg3x.receiver=e5j.receiver);this.px1x=y5D.Jo7h.B5G(this.wg3x);this.ev7o=y5D.Db5g.B5G(this.fz8r);this.S6M=p5u.nl0x.B5G({onsend:this.Wk1x.f5k(this),onerror:function(i5n){var m5r=i5n.result||{};if(m5r.code==250){n5s.Z6T.I5N({tip:m5r.message||m5r.msg||"操作异常",type:2})}else{n5s.Z6T.I5N({tip:"发送失败",type:2})}this.ev7o.Cg5l()}.f5k(this)})}.f5k(this),true)};b5g.bC6w=function(){this.bI6C();if(!!this.px1x){this.px1x.V6P();delete this.px1x}if(!!this.ev7o){this.ev7o.V6P();delete this.ev7o}};b5g.Wi1x=function(C5H){if(!!C5H){var Qp9g=this.px1x.PW9N();if(!!Qp9g.length){this.Wg1x={type:"text",msg:C5H,userIds:JSON.stringify(Qp9g)};l5q.lb9S(this.byx7q.f5k(this));this.ev7o.z5E("onloading")}else{l5q.dX7Q({title:"提示",message:"请选择私信发送对象"})}}else{l5q.dX7Q({title:"提示",message:"私信内容不能为空"})}};b5g.byx7q=function(cl6f){this.Wg1x.checkToken=cl6f||"";this.S6M.bkD4H({data:this.Wg1x,justSend:true})};b5g.Wk1x=function(m5r){this.br6l();if(m5r.code==200){n5s.Z6T.I5N({tip:"发送成功"})}}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,h5m=c5h("nej.v"),a5f=c5h("nej.e"),v5A=c5h("nej.j"),j5o=c5h("nej.u"),n5s=c5h("nm.l"),y5D=c5h("nm.w"),bH6B=c5h("nej.ui"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),b5g,L5Q;n5s.bvB7u=NEJ.C();b5g=n5s.bvB7u.M6G(n5s.ee7X);L5Q=n5s.bvB7u.ct6n;b5g.cd6X=function(){this.cc6W="m-question"};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.eZ8R=k5p[1];this.pQ1x=k5p[2];this.px1x=y5D.Rx9o.B5G({filter:this.csj0x,parent:k5p[0]});h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.bo6i=function(e5j){e5j.parent=e5j.parent||document.body;e5j.title="回答安全问题";e5j.draggable=!0;e5j.destroyalbe=!0;e5j.mask=true;this.bp6j(e5j);this.px1x.lu9l(e5j.data||[])};b5g.bC6w=function(){this.bI6C();this.eZ8R.value=""};b5g.ET6N=function(){this.br6l()};b5g.bN6H=function(d5i){var g5l=h5m.ba6U(d5i,"d:action");switch(a5f.t5y(g5l,"action")){case"back":this.z5E("onback");this.br6l();break;case"next":var bFA9r=this.eZ8R.value.trim();if(!bFA9r){this.iM9D("请输入回答");return}var i5n={questionId:this.px1x.gn8f().id,answer:j5o.kD9u(bFA9r)};this.iM9D(null);v5A.be6Y("/store/api/security/validateAnswer",{type:"json",method:"post",data:j5o.cr6l(i5n),onload:this.bFB9s.f5k(this),onerror:this.bFB9s.f5k(this)});break}};b5g.csj0x=function(q5v){return q5v.question};b5g.iM9D=function(cT7M){if(cT7M){this.pQ1x.innerHTML='<i class="u-icn u-icn-25"></i>'+cT7M;a5f.x5C(this.pQ1x,"f-hide")}else{a5f.w5B(this.pQ1x,"f-hide")}};var tv2x=function(d5i){try{top.doMsgToServiceAction(d5i)}catch(e){}};b5g.bFB9s=function(d5i){if(d5i&&d5i.code==200){this.z5E("onnext");this.br6l()}else{var bA6u={"-3":"回答错误，您还有"+d5i.times+"次机会！"};if(d5i.code==-2||d5i.code==-4){l5q.dX7Q({clazz:"m-layer-w2",title:"更换手机号",message:"<p>帐号已被锁定</p>"+'<p class="f-mgt10">回答错误的次数过多，您的帐号已被锁定，将无法进行任何商城交易，<br/>'+'请私信<a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a> 解锁。</p>',btntxt:"知道了",action:tv2x});this.br6l()}else{this.iM9D(bA6u[d5i.code]||"回答出错")}}};l5q.csM0x=function(e5j){var bFD9u=function(d5i){if(d5i&&d5i.code==200){e5j.data=d5i.data;n5s.bvB7u.B5G(e5j).I5N()}else{l5q.dX7Q({clazz:"m-layer-w2",message:'私信 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>',action:tv2x})}};v5A.be6Y("/store/api/security/getQuestion",{type:"json",method:"get",onload:bFD9u,onerror:bFD9u})}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),b5g,L5Q;n5s.bvs6m=NEJ.C();b5g=n5s.bvs6m.M6G(n5s.ee7X);L5Q=n5s.bvs6m.ct6n;b5g.cd6X=function(){this.cc6W="ntp-oldphonecheck"};b5g.bW6Q=function(){this.ch6b();this.dY7R=a5f.D5I(this.o5t,"u-err")[0];this.bFF9w=a5f.D5I(this.o5t,"errTxt")[0];var cY7R=a5f.D5I(this.o5t,"js-txt");this.CY5d=cY7R[0];h5m.s5x(this.CY5d,"focus",this.bmk4o.f5k(this));h5m.s5x(this.CY5d,"keyup",this.bmq4u.f5k(this));h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};var tv2x=function(d5i){try{top.doMsgToServiceAction(d5i)}catch(e){}};b5g.bo6i=function(e5j){e5j=e5j||{};this.bp6j(e5j);this.dy7r=e5j;this.bY6S(false);this.CY5d.value=""};b5g.bC6w=function(){this.bI6C();if(this.dJ7C)this.dJ7C=clearInterval(this.dJ7C)};b5g.bmk4o=function(){a5f.x5C(this.CY5d,"u-txt-err")};b5g.bmq4u=function(d5i){if(/[^\d]/.test(this.CY5d.value))this.CY5d.value=this.CY5d.value.replace(/[^\d]/g,"")};b5g.bN6H=function(d5i){var G5L=h5m.ba6U(d5i,"d:action");if(!G5L)return;var U6O=a5f.t5y(G5L,"action");switch(U6O){case"next":this.ctp0x(d5i);break;case"send":this.IK7D(d5i);break;case"back":this.bfr3x(d5i);break;case"skip":this.MH8z(d5i);break}};b5g.ctp0x=function(d5i){var fs8k=this.Dx5C();console.log(fs8k);if(!fs8k)return;v5A.be6Y("/api/user/oldcellphone/check",{type:"json",method:"get",query:{phone:fs8k},onload:function(d5i){if(d5i&&d5i.code==200&&d5i.data&&d5i.data.cellphoneCheck){this.z5E("onok",{oldPhone:fs8k})}else if(d5i.data&&d5i.data.outOfLimitTimes){this.bC6w();l5q.dX7Q({clazz:"m-layer-w2",message:'<div style="padding:0 20px;">手机号输错次数过多，为了安全，一天内您不能再使用本解绑方式，如有任何疑问请联系 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>。</div>',action:tv2x})}else{this.bY6S("原手机号错误")}}.f5k(this),onerror:function(){l5q.dX7Q({clazz:"m-layer-w2",message:'<div style="padding:0 20px;">您的登录环境异常，请联系 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>。</div>',action:tv2x})}.f5k(this)})};b5g.Dx5C=function(){var fs8k=this.gm8e||this.CY5d.value.trim();if(!fs8k)return this.bY6S("请输入手机号","mobile");return fs8k};b5g.bY6S=function(bD6x){console.log(this.dY7R);if(bD6x){a5f.x5C(this.dY7R,"f-hide");this.bFF9w.innerHTML=bD6x}else{a5f.w5B(this.dY7R,"f-hide");this.bFF9w.innerHTML=""}}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ci6c=c5h("nej.ut"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),n5s=c5h("nm.l"),F5K=c5h("nm.m"),b5g,L5Q;n5s.bee2x=NEJ.C();b5g=n5s.bee2x.M6G(ci6c.cP7I);b5g.bo6i=function(e5j){this.bp6j(e5j);this.dy7r=e5j;this.bFG9x=e5j.mobile;this.fK8C=e5j.countrycode||"86";this.nt0x=e5j.isBindPhone;this.S6M=p5u.mT0x.B5G();this.S6M.s5x("onsendcaptcha",this.sq1x.f5k(this));this.S6M.s5x("onsendcaptchaerror",this.Mw8o.f5k(this));this.S6M.s5x("onchangemobile",this.bFH9y.f5k(this));this.S6M.s5x("onchangemobileerror",this.bvp6j.f5k(this));h5m.s5x(window,"snsverify",this.ctC0x.f5k(this));this.bFI9z()};b5g.bC6w=function(){this.bI6C();this.S6M.V6P();if(this.ec7V)this.ec7V.V6P();if(this.vJ3x)this.vJ3x.V6P()};var tv2x=function(d5i){try{top.doMsgToServiceAction(d5i)}catch(e){}};b5g.bFI9z=function(){if(this.ec7V)this.ec7V.br6l();if(this.vJ3x)this.vJ3x.V6P();this.vJ3x=l5q.jy9p({title:"更换手机号",clazz:"m-layer-find",txt:"txt-mobilestatus",onaction:function(d5i){if(d5i.action=="valid"){this.S6M.BL5Q({data:{ctcode:this.fK8C,cellphone:this.bFG9x,isBindPhone:this.nt0x}})}else{this.cud0x()}}.f5k(this)})};b5g.cud0x=function(){var self=this;v5A.be6Y("/api/user/specialuser",{type:"json",method:"get",onload:function(d5i){if(d5i&&d5i.code==200&&d5i.data){l5q.dX7Q({clazz:"m-layer-w2",message:'请前往移动端app-设置-账号和绑定设置-更改绑定-手机号已停用自行进行换绑。如有后续疑问请联系<a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>',action:tv2x})}else{self.cuj0x()}},onerror:function(){l5q.dX7Q({clazz:"m-layer-w2",message:'请前往移动端app-设置-账号和绑定设置-更改绑定-手机号已停用自行进行换绑。如有后续疑问请联系<a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>',action:tv2x})}})};b5g.cuj0x=function(){v5A.be6Y("/api/user/binding/thirdaccount/intime/get",{type:"json",method:"get",onload:function(d5i){if(d5i&&d5i.code==200&&d5i.data&&d5i.data.length>0){this.cuk0x(d5i.data)}else{l5q.dX7Q({clazz:"m-layer-w2",message:'请前往移动端app-设置-账号和绑定设置-更改绑定-手机号已停用自行进行换绑。如有后续疑问请联系<a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>',action:tv2x})}}.f5k(this),onerror:function(){l5q.dX7Q({clazz:"m-layer-w2",message:'请前往移动端app-设置-账号和绑定设置-更改绑定-手机号已停用自行进行换绑。如有后续疑问请联系<a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a>',action:tv2x})}.f5k(this)})};b5g.cuk0x=function(data){if(this.vJ3x)this.vJ3x.V6P();var hasWx=false,hasQQ=false;for(var i=0;i<data.length;i++){var item=data[i];if(item.type==5){hasQQ=true}else if(item.type==10){hasWx=true}}this.vJ3x=l5q.jy9p({title:"第三方验证",clazz:"m-layer-verify",html:a5f.ca6U("jst-mobilethirdaccount",{hasWx:hasWx,hasQQ:hasQQ}),onaction:function(d5i){this.u5z=parseInt(d5i.action,10);var hA8s={callbackType:"verify",clientType:"web2",forcelogin:true,snsType:this.u5z};F5K.RU0x("/api/sns/authorize?"+j5o.cr6l(hA8s),"_blank",this.u5z,true);if(this.vJ3x)this.vJ3x.V6P()}.f5k(this)})};b5g.ctC0x=function(bi6c){console.log(bi6c,"snsverify");var isMatch=bi6c.result.result;console.log(isMatch,"isMatch");var snsType=this.u5z===5?"QQ":"微信";if(!isMatch){l5q.dX7Q({clazz:"m-layer-w2",message:"当前"+snsType+"账号与绑定账号不匹配，请检查"+snsType+"是否登录"+'<br />或联系 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a> 修改绑定的手机号',action:tv2x});return}v5A.be6Y("/api/user/replace/cellphone/safe/get",{type:"json",method:"get",onload:function(d5i){if(d5i&&d5i.code==200&&d5i.data){this.cut0x()}else{l5q.dX7Q({clazz:"m-layer-w2",message:'您的登录环境异常，请联系 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a> 修改绑定的手机号',action:tv2x})}}.f5k(this),onerror:function(){l5q.dX7Q({clazz:"m-layer-w2",message:'您的登录环境异常，请联系 <a class="s-fc7" href="javascript:;" data-action="kf">@云音乐客服</a> 修改绑定的手机号',action:tv2x})}.f5k(this)})};b5g.cut0x=function(){this.bea2x=n5s.bvs6m.I5N({title:"原手机号验证",onok:this.cuJ0x.f5k(this)})};b5g.sq1x=function(bi6c){this.ec7V=n5s.oR0x.I5N({title:"更换手机号",mobile:this.bFG9x,countrycode:this.fK8C,okbutton:"下一步",onok:this.cuM0x.f5k(this),backbutton:"&lt;&nbsp;&nbsp;上一步",onback:this.bFI9z.f5k(this),isBindPhone:this.nt0x})};b5g.Mw8o=function(d5i){n5s.Z6T.I5N({tip:(d5i||{}).message||"更换失败，请重试",type:2})};b5g.cuM0x=function(bL6F){if(this.bea2x)this.bea2x.V6P();var bL6F=bL6F||{};this.ec7V=n5s.oR0x.I5N({title:"更换手机号",mobileLabel:"新手机号：",okbutton:"完成",onok:this.cuW0x.f5k(this,bL6F.captcha)})};b5g.cuJ0x=function(bL6F){console.log(bL6F,"inputmobile2");if(this.bea2x)this.bea2x.V6P();var bL6F=bL6F||{};this.cve0x=bL6F.oldPhone;this.ec7V=n5s.oR0x.I5N({title:"更换手机号",mobileLabel:"新手机号：",okbutton:"完成",onok:this.cvf0x.f5k(this)})};b5g.cvf0x=function(bi6c){this.bdY2x=bi6c.mobile;this.da7T=bi6c.captcha;this.fK8C=bi6c.countrycode||86;var queryObj={oldPhone:this.cve0x,phone:this.bdY2x,captcha:this.da7T,password:"",countrycode:this.fK8C};v5A.be6Y("/api/user/replacecellphone/v3",{type:"json",method:"post",data:j5o.cr6l(queryObj),onload:function(d5i){if(d5i&&d5i.code===200){this.bFH9y()}else{this.bvp6j(d5i)}}.f5k(this),onerror:function(d5i){this.bvp6j(d5i)}.f5k(this)})};b5g.cuW0x=function(cvl0x,bi6c){this.bdY2x=bi6c.mobile;this.da7T=bi6c.captcha;this.fK8C=bi6c.countrycode||86;this.S6M.cpE9v({data:{phone:this.bdY2x,captcha:this.da7T,countrycode:this.fK8C,oldcaptcha:cvl0x}})};b5g.bFH9y=function(bi6c){this.ec7V.br6l();n5s.Z6T.I5N({tip:"更换成功"});if(this.dy7r.onsuccess)this.dy7r.onsuccess({mobile:this.bdY2x})};b5g.bvp6j=function(bi6c){if(bi6c.code==506){this.ec7V.cQ7J(false);this.ec7V.bY6S(bi6c.message,"mobile")}else{this.ec7V.br6l();n5s.Z6T.I5N({tip:"更换失败，请重试",type:2})}}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),j5o=c5h("nej.u"),l5q=c5h("nm.x"),n5s=c5h("nm.l"),cx6r=c5h("api"),y5D=c5h("nm.w");var bvf6Z=null,bFJ9A=null;var cvC0x=function(fs8k,bFK9B){if(bvf6Z)bvf6Z.V6P();bvf6Z=n5s.bee2x.B5G({title:"更换手机号",mobile:fs8k,onsuccess:function(bi6c){if(bFK9B)bFK9B({cellphone:bi6c.mobile})}})};var cvS0x=function(e5j){v5A.be6Y("/api/sms/captcha/sent",{type:"json",query:{cellphone:e5j.mobile,channel:"new"},onload:function(d5i){if(d5i.code!=200)return n5s.Z6T.I5N({tip:d5i.message||"验证码发送失败",type:2});bFJ9A=n5s.oR0x.I5N({title:e5j.title||"验证手机号",mobile:e5j.mobile,countrycode:e5j.countrycode,okbutton:e5j.ntext||"下一步",onok:function(bi6c){bFJ9A.br6l();if(e5j.onnext)e5j.onnext(bi6c)}})},onerror:function(){n5s.Z6T.I5N({tip:"验证码发送失败",type:2})}})};cx6r.changePhone=cvC0x;cx6r.phoneCode=cvS0x;cx6r.validateQuestion=l5q.csM0x})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),bk6e=c5h("nej.h"),P6J=c5h("nej.p");var jC9t={opacity:1,"z-index":1,background:1,"font-weight":1,filter:1};bk6e.bJG0x=function(iV9M){return jC9t[iV9M]===undefined&&iV9M.indexOf("color")<0};bk6e.bcq2x=function(g5l,nW0x,rA1x){rA1x=rA1x.slice(0,-1);a5f.bc6W(g5l,"transition",rA1x);a5f.fn8f(g5l,nW0x);return this};bk6e.TY0x=function(g5l,W6Q,nP0x){a5f.fn8f(g5l,W6Q);a5f.bc6W(g5l,"transition","none");nP0x.call(null,W6Q);return this}})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,bk6e=c5h("nej.h"),P6J=c5h("nej.p");if(P6J.og0x.trident1)return;bk6e.Hg6a=function(){return!0}})();
(function(){var c5h=NEJ.P,P6J=c5h("nej.ut"),b5g;if(!!P6J.NV9M)return;P6J.NV9M=NEJ.C();b5g=P6J.NV9M.M6G(P6J.HN7G);b5g.bo6i=function(e5j){e5j=NEJ.X({},e5j);e5j.timing="easeout";this.bp6j(e5j)}})();
(function(){var c5h=NEJ.P,P6J=c5h("nej.ut"),b5g;if(!!P6J.bBj8b)return;P6J.bBj8b=NEJ.C();b5g=P6J.bBj8b.M6G(P6J.HN7G);b5g.bo6i=function(e5j){e5j=NEJ.X({},e5j);e5j.timing="easeinout";this.bp6j(e5j)}})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),bk6e=c5h("nej.h"),P6J=c5h("nej.p"),dh7a=c5h("nej.x"),ci6c=c5h("nej.ut");if(P6J.og0x.trident)return;var bJF0x={linear:ci6c.uU3x,"ease-in":ci6c.He6Y,"ease-out":ci6c.NV9M,"ease-in-out":ci6c.bBj8b};bk6e.bcq2x=function(){var cuZ0x=function(nW0x,rA1x){var cS7L="";j5o.eR8J(nW0x,function(C5H,Y6S){cS7L+=rA1x.replace("all",Y6S)});return cS7L};var cuX0x=function(C5H,iV9M){if(iV9M==="filter"){C5H=j5o.LD8v(C5H,0);C5H="alpha(opacity="+C5H+")"}if(iV9M==="z-index")C5H=j5o.LD8v(C5H,0);return C5H};var cuS0x=function(C5H){return bJF0x[C5H.split(" ")[2]]};var cuO0x=function(g5l,C5H,nW0x,nP0x,r5w){var C5H=C5H.split(" "),iV9M=C5H[0],em7f=parseFloat(a5f.dl7e(g5l,iV9M))||0,ol0x=parseFloat(nW0x[iV9M])||0,cux0x=bJF0x[C5H[2]],bBt8l=C5H[1].slice(0,-1)*1e3+C5H[3].slice(0,1)*1e3;if(bBt8l>=g5l.sumTime){g5l.sumTime=bBt8l;g5l.isLastOne=r5w}var Uf0x=nej.p.dB7u.engine==="trident"&&nej.p.dB7u.release-5<0;if(iV9M==="opacity"&&Uf0x){iV9M="filter";var ej7c=a5f.dl7e(g5l,iV9M);em7f=parseFloat(ej7c.split("=")[1])||0;ol0x=ol0x*100}var e5j={from:{offset:em7f},to:{offset:ol0x},duration:bBt8l,onupdate:function(bn6h){var C5H=bn6h.offset;if(!bk6e.bJG0x(iV9M)){C5H=cuX0x(C5H,iV9M);a5f.bc6W(g5l,iV9M,C5H)}else{a5f.bc6W(g5l,iV9M,C5H+"px")}},onstop:function(iV9M){var NY9P=g5l.effects[r5w];if(!NY9P)return;NY9P=cux0x.V6P(NY9P);if(g5l.isLastOne===r5w)nP0x.apply(this)}.f5k(this,r5w)};return e5j};return bk6e.bcq2x.eN7G(function(d5i){d5i.stopped=!0;var k5p=d5i.args;var g5l=k5p[0],nW0x=k5p[1],rA1x=k5p[2],nP0x=k5p[3];g5l.sumTime=0,g5l.isLastOne=0;var bJz0x=[];if(rA1x.indexOf("all")>-1)rA1x=cuZ0x(nW0x,rA1x);var bBx8p=rA1x.slice(0,-1);bBx8p=bBx8p.split(",");g5l.effects=[];j5o.bf6Z(bBx8p,function(C5H,r5w){var e5j=cuO0x(g5l,C5H,nW0x,nP0x,r5w);bJz0x.push({o:e5j,c:cuS0x(C5H)})});j5o.bf6Z(bJz0x,function(q5v,r5w){var NY9P=q5v.c.B5G(q5v.o);g5l.effects[r5w]=NY9P;NY9P.ex7q()});return this})}();bk6e.TY0x=bk6e.TY0x.eN7G(function(d5i){d5i.stopped=!0;var k5p=d5i.args;var g5l=k5p[0];j5o.bf6Z(g5l.effects,function(bb6V){bb6V.bg6a()});g5l.effects=[];return this})})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,bk6e=c5h("nej.h"),a5f=c5h("nej.e"),P6J=c5h("nej.p");if(P6J.og0x.gecko)return;bk6e.bcq2x=function(g5l,nW0x,rA1x){rA1x=rA1x.slice(0,-1);a5f.bc6W(g5l,"transition",rA1x);setTimeout(function(){a5f.fn8f(g5l,nW0x)},33);return this}})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,bk6e=c5h("nej.h"),P6J=c5h("nej.p");if(P6J.og0x.webkit)return})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,bk6e=c5h("nej.h"),P6J=c5h("nej.p");if(P6J.og0x.presto)return})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,j5o=c5h("nej.u"),bk6e=c5h("nej.h"),a5f=c5h("nej.e"),h5m=c5h("nej.v"),P6J=c5h("nej.ut"),xa4e;if(!!P6J.tf2x)return;P6J.tf2x=NEJ.C();xa4e=P6J.tf2x.M6G(P6J.cP7I);xa4e.bo6i=function(e5j){this.bp6j(e5j);this.pi0x=a5f.A5F(e5j.node);this.bJx0x=e5j.styles||[];this.bJw0x=e5j.onstop||bs6m;this.bBH8z=e5j.transition||[];this.Ul0x={};this.bJv0x=this.cub0x();if(!!bk6e.Hg6a&&bk6e.Hg6a()){setTimeout(this.Hg6a.f5k(this),this.bBN8F*1e3)}else{this.bZ6T([[this.pi0x,"transitionend",this.Hg6a.f5k(this)]])}};xa4e.bC6w=function(){if(!!this.NZ9Q){this.NZ9Q=window.clearInterval(this.NZ9Q)}delete this.pi0x;delete this.bJx0x;delete this.bJv0x;delete this.Ul0x;delete this.bBP8H;delete this.bBH8z;delete this.NZ9Q;this.bI6C()};xa4e.Hg6a=function(d5i){if(!!bk6e.Hg6a&&bk6e.Hg6a()){this.bBQ8I=!1;this.bg6a();return}if(!!this.bBQ8I&&this.ctW0x(d5i)){this.bBQ8I=!1;this.bg6a()}};xa4e.ctW0x=function(d5i){var Y6S=d5i.propertyName;if(Y6S===this.bBP8H||Y6S.indexOf(this.bBP8H)>-1)return!0;else return!1};xa4e.cub0x=function(){var ctJ0x=function(cn6h){var k5p=cn6h.split(":"),iV9M=k5p[0],C5H=k5p[1],g5l=this.pi0x;if(C5H.indexOf("=")>-1){var qs1x=parseInt(a5f.dl7e(g5l,iV9M))||0;var ds7l=parseInt(C5H.split("=")[1]);if(C5H.indexOf("+")>-1)C5H=qs1x+ds7l;else C5H=qs1x-ds7l}if(bk6e.bJG0x(iV9M)){if(C5H.toString().indexOf("px")<0)C5H+="px"}this.Ul0x[iV9M]=C5H};var ctB0x=function(r5w){if(!this.bBH8z[r5w])return"";var to2x=this.bBH8z[r5w],H5M=to2x.duration+to2x.delay;if(H5M>=this.bBN8F){this.bBN8F=H5M;this.bBP8H=to2x.property}return to2x.property+" "+to2x.duration+"s "+to2x.timing+" "+to2x.delay+"s,"};return function(){var bJr0x="";this.bBN8F=0;j5o.bf6Z(this.bJx0x,function(cn6h,r5w){ctJ0x.call(this,cn6h);bJr0x+=ctB0x.call(this,r5w)}.f5k(this));return bJr0x}}();xa4e.ctw0x=function(){this.jb9S={};j5o.eR8J(this.Ul0x,function(C5H,iV9M){this.jb9S[iV9M]=a5f.dl7e(this.pi0x,iV9M)}.f5k(this));this.z5E("onplaystate",this.jb9S)};xa4e.wI3x=function(){this.bBQ8I=!0;bk6e.bcq2x(this.pi0x,this.Ul0x,this.bJv0x,this.bJw0x);this.NZ9Q=window.setInterval(this.ctw0x.f5k(this),49);return this};xa4e.bg6a=function(){bk6e.TY0x(this.pi0x,this.Ul0x,this.bJw0x);this.NZ9Q=window.clearInterval(this.NZ9Q);return this};xa4e.cQP6J=function(){};xa4e.cQQ6K=function(){}})();
(function(){var c5h=NEJ.P,bs6m=NEJ.F,j5o=c5h("nej.u"),a5f=c5h("nej.e"),j5o=c5h("nej.u"),P6J=c5h("nej.ut");a5f.bch2x=function(e5j){e5j=e5j||{};e5j.onstop=e5j.onstop||bs6m;e5j.onplaystate=e5j.onplaystate||bs6m;return e5j};a5f.bJj0x=function(){var csO0x=function(g5l,bce2x,Uf0x){var hy8q,fh8Z=true;if(!!Uf0x){j5o.eR8J(bce2x,function(C5H,Y6S){if(Y6S==="opacity"){Y6S="filter";var ej7c=a5f.dl7e(g5l,Y6S);if(ej7c===""){a5f.bc6W(g5l,"filter","alpha(opacity=100)");hy8q=100}else{hy8q=parseFloat(ej7c.split("=")[1])||0}C5H=C5H*100}else{hy8q=a5f.dl7e(g5l,Y6S)}if(parseInt(hy8q)===C5H)fh8Z=false}.f5k(this))}else{j5o.eR8J(bce2x,function(C5H,Y6S){hy8q=a5f.dl7e(g5l,Y6S);if(parseInt(hy8q)===C5H)fh8Z=false}.f5k(this))}return fh8Z};return function(g5l,bce2x){var Uf0x=nej.p.dB7u.engine==="trident"&&nej.p.dB7u.release-5<0;if(!csO0x(g5l,bce2x,Uf0x))return!1;return!0}}();a5f.bJi0x=function(){var csz0x=function(g5l){var bes2x=a5f.dl7e(g5l,"display");if(bes2x==="none")return!1;return!0};return function(g5l,e5j,kM9D){var NH9y=e5j.opacity||kM9D;g5l=a5f.A5F(g5l);if(!csz0x.call(g5l))return!1;if(!!g5l.effect)return!1;if(!a5f.bJj0x(g5l,{opacity:NH9y}))return!1;e5j=a5f.bch2x(e5j);g5l.effect=P6J.tf2x.B5G({node:g5l,transition:[{property:"opacity",timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration||1}],styles:["opacity:"+NH9y],onstop:function(W6Q){g5l.effect=P6J.tf2x.V6P(g5l.effect);e5j.onstop.call(null,W6Q)},onplaystate:e5j.onplaystate.f5k(g5l.effect)});g5l.effect.wI3x();return this}}.f5k(this)();a5f.bcc2x=function(g5l,e5j){return a5f.bJi0x(g5l,e5j,1)};a5f.csu0x=function(g5l,e5j){return a5f.bJi0x(g5l,e5j,0)};a5f.css0x=function(g5l){a5f.bCr8j(g5l);return this};a5f.bCr8j=function(g5l){g5l=a5f.A5F(g5l);if(g5l.effect&&g5l.effect.bg6a()){if(!!g5l.effect)g5l.effect=P6J.tf2x.V6P(g5l.effect)}return this};a5f.bJe0x=function(g5l,oy0x,e5j){g5l=a5f.A5F(g5l);if(!!g5l.effect)return!1;if(!a5f.bJj0x(g5l,oy0x))return!1;e5j=a5f.bch2x(e5j);e5j.duration=e5j.duration||[];var gs8k=oy0x.top||0,ho8g=oy0x.left||0;g5l.effect=P6J.tf2x.B5G({node:g5l,transition:[{property:"top",timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration[0]||1},{property:"left",timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration[1]||1}],styles:["top:"+gs8k,"left:"+ho8g],onstop:function(W6Q){e5j.onstop.call(null,W6Q);g5l.effect=P6J.tf2x.V6P(g5l.effect)},onplaystate:e5j.onplaystate.f5k(g5l.effect)});g5l.effect.wI3x();return this};a5f.bJd0x=function(){return function(g5l,oy0x,e5j){g5l=a5f.A5F(g5l);if(!!g5l.effect)return!1;e5j=a5f.bch2x(e5j);var k5p=oy0x.split(":"),crY9P=k5p[0],bJa0x=[];bJa0x.push(oy0x);g5l.effect=P6J.tf2x.B5G({node:g5l,transition:[{property:crY9P,timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration||1}],styles:bJa0x,onstop:function(W6Q){e5j.onstop.call(null,W6Q);g5l.effect=P6J.tf2x.V6P(g5l.effect)},onplaystate:e5j.onplaystate.f5k(g5l.effect)});g5l.effect.wI3x();return this}}();a5f.cQR6L=function(){var bjg4k=function(g5l,u5z){return u5z=="height"?g5l.clientHeight:g5l.clientWidth};return function(g5l,u5z,e5j){g5l=a5f.A5F(g5l);if(!!g5l.effect)return!1;e5j=a5f.bch2x(e5j);var C5H=e5j.value||false;if(!C5H){a5f.bc6W(g5l,"display","block");var g5l=a5f.A5F(g5l);C5H=bjg4k(g5l,u5z)}var fh8Z=a5f.dl7e(g5l,"visibility");if(fh8Z==="hidden"){g5l.style.height=0;a5f.bc6W(g5l,"visibility","inherit");g5l.effect=P6J.tf2x.B5G({node:g5l,transition:[{property:u5z,timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration||1}],styles:[u5z+":"+C5H],onstop:function(W6Q){e5j.onstop.call(null,W6Q);g5l.effect=P6J.tf2x.V6P(g5l.effect);bca2x=window.clearTimeout(bca2x)},onplaystate:e5j.onplaystate.f5k(g5l.effect)})}else{g5l.style.height=C5H;g5l.effect=P6J.tf2x.B5G({node:g5l,transition:[{property:u5z,timing:e5j.timing||"ease-in",delay:e5j.delay||0,duration:e5j.duration||1}],styles:[u5z+":"+0],onstop:function(W6Q){a5f.bc6W(g5l,"visibility","hidden");a5f.bc6W(g5l,u5z,"auto");e5j.onstop.call(null,W6Q);g5l.effect=P6J.tf2x.V6P(g5l.effect);bca2x=window.clearTimeout(bca2x)},onplaystate:e5j.onplaystate.f5k(g5l.effect)})}var bca2x=window.setTimeout(function(){g5l.effect.wI3x()}.f5k(this),0);return this}}()})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),H5M=c5h("nej.ut"),j5o=c5h("nej.u"),bH6B=c5h("nej.ui"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),y5D=c5h("nm.w"),cx6r=c5h("api"),b5g,L5Q;y5D.HB6v=NEJ.C();b5g=y5D.HB6v.M6G(bH6B.er7k);L5Q=y5D.HB6v.ct6n;b5g.cd6X=function(){this.cc6W="m-image-preview"};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.Qu9l=k5p[0];this.nk0x=k5p[1];this.ek7d=k5p[2];this.Sj0x=k5p[3];this.Sk0x=k5p[4];this.UL0x=k5p[5]};b5g.bo6i=function(e5j){this.bp6j(e5j);this.cwq1x();this.jQ9H=e5j.urls;this.gT8L=this.jQ9H.length;if(this.gT8L==1){a5f.bc6W(this.Sj0x,"display","none");a5f.bc6W(this.Sk0x,"display","none")}this.bZ6T([[this.o5t,"click",this.bN6H.f5k(this)],[document,"keydown",this.cww1x.f5k(this)]]);l5q.bBi8a(this.jQ9H,function(pm1x,eG7z){this.qX1x=eG7z;this.mD0x(e5j.index||0)}.f5k(this))};b5g.bC6w=function(){this.bI6C();a5f.w5B(this.nk0x,"fail-loading");a5f.x5C(this.nk0x,"f-hide");a5f.bc6W(this.Sj0x,"display","");a5f.bc6W(this.Sk0x,"display","");a5f.x5C(this.Sj0x,"z-cntdis");a5f.x5C(this.gH8z,"z-cntdis");a5f.x5C(this.Sk0x,"z-cntdis");a5f.x5C(this.Jc7V,"z-cntdis");this.ek7d.src="";delete this.jQ9H;delete this.gT8L};b5g.bN6H=function(d5i){var g5l=h5m.ba6U(d5i,"action");if(a5f.bE6y(g5l,"z-dis"))return;switch(a5f.t5y(g5l,"action")){case"close":this.V6P();break;case"prev":this.mD0x(this.cv6p-1);break;case"next":this.mD0x(this.cv6p+1);break;case"go":this.mD0x(a5f.t5y(g5l,"index"));break}};b5g.mD0x=function(r5w){if(r5w<=0){a5f.w5B(this.Sj0x,"z-cntdis")}else{a5f.x5C(this.Sj0x,"z-cntdis")}if(r5w>=this.gT8L-1){a5f.w5B(this.Sk0x,"z-cntdis")}else{a5f.x5C(this.Sk0x,"z-cntdis")}if(r5w<0||r5w>=this.jQ9H.length)return;var dj7c=this.jQ9H[r5w];this.UL0x.href=dj7c+"?param=9999y9999";if(this.qX1x&&this.qX1x[r5w]){a5f.w5B(this.nk0x,"f-hide");this.ek7d.src=dj7c}else{this.ek7d.src="";a5f.x5C(this.nk0x,"f-hide");a5f.x5C(this.nk0x,"fail-loading")}this.cv6p=r5w};cx6r.imageView=function(pm1x,r5w){y5D.HB6v.B5G({parent:document.body,urls:pm1x,index:r5w})};b5g.cww1x=function(d5i){h5m.bg6a(d5i);switch(d5i.keyCode){case 37:this.mD0x(this.cv6p-1);break;case 39:this.mD0x(this.cv6p+1);break;case 27:this.V6P();break;case 38:this.Qu9l.scrollTop-=20;break;case 40:this.Qu9l.scrollTop+=20;break}};b5g.cwq1x=function(){var buQ6K=a5f.dp7i("input");this.o5t.appendChild(buQ6K);buQ6K.focus();a5f.cR7K(buQ6K)}})();
(function(){var c5h=NEJ.P,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),ds7l=c5h("nej.p"),v5A=c5h("nej.j"),gJ8B=c5h("nm.ut"),y5D=c5h("nm.w"),n5s=c5h("nm.l"),l5q=c5h("nm.x"),b5g,L5Q;n5s.bjK4O=NEJ.C();b5g=n5s.bjK4O.M6G(n5s.ee7X);L5Q=n5s.bjK4O.ct6n;b5g.cA6u=function(e5j){e5j.title="转发动态";this.cE7x(e5j)};b5g.bo6i=function(e5j){l5q.sd1x(function(){if(e5j.onclose===undefined)e5j.onclose=function(){this.br6l()}.f5k(this);this.bp6j(e5j);this.jr9i=e5j.rid;this.nR0x=e5j.uid;this.crq9h=e5j.text;this.gI8A.value=this.crq9h;this.hS8K=y5D.TH0x.B5G({parent:document.body,target:this.gI8A})}.f5k(this),true);v5A.be6Y("/api/gorilla/switch/emojy/status?platform=web&product=cloudmusic",{type:"json",method:"get",onload:function(res){var status=res.data[0].status;if(status===5){a5f.w5B(this.bjN4R,"f-hide")}else{a5f.x5C(this.bjN4R,"f-hide")}}.f5k(this)})};b5g.cd6X=function(){this.cc6W="m-wgt-forward"};b5g.bW6Q=function(){this.ch6b();var bQ6K=a5f.D5I(this.o5t,"j-flag");this.Dq5v=bQ6K[0];this.gI8A=bQ6K[1];this.bjP4T=bQ6K[2];this.bjN4R=bQ6K[3];this.TI0x=bQ6K[4];this.jW9N=bQ6K[5];this.bIW0x=bQ6K[6];this.crc9T=bQ6K[7];this.Al5q=bQ6K[8];h5m.s5x(this.gI8A,"input",this.fc8U.f5k(this));h5m.s5x(this.gI8A,"keyup",this.bmP4T.f5k(this));h5m.s5x(this.gI8A,"click",this.mE0x.f5k(this));h5m.s5x(this.TI0x,"click",this.bjT4X.f5k(this));h5m.s5x(this.bjN4R,"click",this.bjU4Y.f5k(this));h5m.s5x(this.bIW0x,"click",this.Om9d.f5k(this));h5m.s5x(this.crc9T,"click",this.zx4B.f5k(this));l5q.jZ9Q()};b5g.bC6w=function(){this.bI6C();if(this.hN8F){this.hN8F.V6P();delete this.hN8F}if(this.hS8K){this.hS8K.V6P();delete this.hS8K}};b5g.fc8U=function(d5i){ds7l.dB7u.browser=="ie"&&ds7l.dB7u.version<"7.0"?setTimeout(this.gz8r.f5k(this),0):this.gz8r()};b5g.bmP4T=function(d5i){this.mE0x();this.fc8U()};b5g.gz8r=function(){var bt6n=this.gI8A.value.trim().length;this.jW9N.innerHTML=!bt6n?"140":140-bt6n;bt6n>140?a5f.w5B(this.jW9N,"s-fc6"):a5f.x5C(this.jW9N,"s-fc6");if(!bt6n||bt6n==0)a5f.bc6W(this.Dq5v,"display","block");else a5f.bc6W(this.Dq5v,"display","none")};b5g.bjT4X=function(d5i){h5m.bg6a(d5i);!!this.hN8F&&this.hN8F.br6l();this.hS8K.TD0x();this.gz8r()};b5g.bjU4Y=function(d5i){h5m.bg6a(d5i);if(!this.hN8F){this.hN8F=n5s.Lj8b.B5G({parent:this.bjP4T});this.hN8F.s5x("onselect",this.AS5X.f5k(this))}this.hN8F.I5N()};b5g.AS5X=function(d5i){var bq6k="["+d5i.text+"]";gJ8B.Lt8l(this.gI8A,this.qk1x,bq6k);this.gz8r();h5m.z5E(this.gI8A,"keyup")};b5g.mE0x=function(){this.qk1x=gJ8B.xl4p(this.gI8A)};b5g.Om9d=function(d5i){h5m.bg6a(d5i);if(this.ea7T())return;if(this.gI8A.value.trim().length>140){this.eb7U("字数超过140个字符");return}l5q.lb9S(this.crb9S.f5k(this))};b5g.crb9S=function(cl6f){var bbI2x=this.gI8A.value.trim();var ib8T=window.GUser.userId;var E5J=this.jr9i;var X6R="/api/event/forward";var i5n={forwards:bbI2x,id:this.jr9i,eventUserId:this.nR0x,checkToken:cl6f||""};i5n=j5o.cr6l(i5n);this.ea7T(!0);var gA8s=v5A.be6Y(X6R,{sync:false,type:"json",data:i5n,method:"POST",onload:this.EA6u.f5k(this),onerror:this.dS7L.f5k(this)})};b5g.EA6u=function(m5r){this.ea7T(!1);if(m5r.code!=200){var bD6x="转发失败";switch(m5r.code){case 250:bD6x=m5r.message||m5r.msg||"分享异常";break;case 404:bD6x=m5r.message||"该动态已被删除";break;case 407:bD6x="输入内容包含有关键字";break;case 408:bD6x="转发太快了，过会再分享吧";break;case 315:bD6x="根据对方设置，你没有该操作权限";break}this.eb7U(bD6x);return}gJ8B.bMJ1x(this.gI8A.value);this.br6l();n5s.Z6T.I5N({tip:"转发成功！",autoclose:true});this.z5E("onforward",{id:this.jr9i,eventUserId:this.nR0x})};b5g.dS7L=function(i5n){this.ea7T(!1);this.eb7U(bD6x)};b5g.ea7T=function(de7X){return L5Q.ea7T(this.bIW0x,de7X,"转发","转发中 ...")};b5g.eb7U=function(bD6x){return L5Q.eb7U(this.Al5q,bD6x)};b5g.zx4B=function(d5i){h5m.co6i(d5i);this.br6l()};b5g.nc0x=function(){this.gI8A.focus();if(ds7l.dB7u.browser=="ie"&&parseInt(ds7l.dB7u.version)<10)return;gJ8B.bhn3x(this.gI8A,{start:0,end:0});this.mE0x()};b5g.br6l=function(){L5Q.br6l.call(this);if(this.hN8F){this.hN8F.V6P();delete this.hN8F}if(this.hS8K){this.hS8K.V6P();delete this.hS8K}};b5g.I5N=function(e5j){L5Q.I5N.call(this);this.eb7U();this.ea7T(!1);this.gz8r();this.nc0x();this.qk1x=gJ8B.xl4p(this.gI8A)};l5q.bjY4c=function(e5j){if(!GUser||!GUser.userId||GUser.userId<=0){n5s.pU1x.I5N({title:"登录"});return}if(e5j.title===undefined)e5j.title="转发动态";n5s.bjK4O.I5N(e5j)}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),H5M=c5h("nej.ut"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),gJ8B=c5h("nm.ut"),n5s=c5h("nm.l"),b5g,L5Q;n5s.bfC3x=NEJ.C();b5g=n5s.bfC3x.M6G(n5s.ee7X);L5Q=n5s.bfC3x.ct6n;b5g.cA6u=function(){this.cE7x()};b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");this.eH7A=k5p[0];this.VE0x=k5p[1];this.cB6v=k5p[2];this.bLS0x=k5p[3];this.dY7R=k5p[4];h5m.s5x(this.o5t,"click",this.eL7E.f5k(this));h5m.s5x(this.eH7A,"input",this.fc8U.f5k(this));h5m.s5x(this.eH7A,"keyup",this.wD3x.f5k(this))};b5g.cd6X=function(){this.cc6W="m-sharesingle-layer"};b5g.bo6i=function(e5j){e5j.parent=e5j.parent||document.body;e5j.title=e5j.title||"分享";e5j.draggable=!0;e5j.mask=!0;e5j.clazz="m-layer m-layer-w2";this.bp6j(e5j);this.eH7A.value=e5j.mesg||"";this.bh6b={id:e5j.rid,type:e5j.type,picUrl:e5j.purl,snsType:e5j.snsType,resourceUrl:e5j.rurl};if(!this.bh6b.resourceUrl)delete this.bh6b.resourceUrl;this.Gg6a();this.eb7U(null);this.ea7T(false)};b5g.eL7E=function(d5i){var g5l=h5m.ba6U(d5i,"d:action"),U6O=a5f.t5y(g5l,"action");h5m.co6i(d5i);switch(U6O){case"txt":this.mE0x();break;case"emt":h5m.tO2x(d5i);!!this.hS8K&&this.hS8K.Iv7o();if(!this.hN8F){this.hN8F=n5s.Lj8b.B5G({parent:this.VE0x});this.hN8F.s5x("onselect",this.AS5X.f5k(this))}this.hN8F.I5N();break;case"ok":this.eb7U(null);if(this.pE1x)return;if(this.eH7A.value.trim().length>140){this.eb7U("字数超过140个字符");return}this.ea7T(true);this.bh6b.msg=this.eH7A.value;if(!this.bh6b.resourceUrl){delete this.bh6b.resourceUrl}v5A.be6Y("/api/sns/share/resource",{type:"json",method:"post",data:j5o.cr6l(this.bh6b),onload:this.wm3x.f5k(this),onerror:this.wm3x.f5k(this)});break;case"cc":this.br6l();break}};b5g.AS5X=function(d5i){var bq6k="["+d5i.text+"]";gJ8B.Lt8l(this.eH7A,this.qk1x,bq6k);this.Gg6a()};b5g.fc8U=function(){this.Gg6a();this.mE0x()};b5g.wD3x=function(){this.Gg6a();this.mE0x()};b5g.Gg6a=function(){var bt6n=this.eH7A.value.trim().length;this.cB6v.innerText=140-bt6n;bt6n>140?a5f.fo8g(this.cB6v,"s-fc4","s-fc6"):a5f.fo8g(this.cB6v,"s-fc6","s-fc4")};b5g.mE0x=function(){this.qk1x=gJ8B.xl4p(this.eH7A)};b5g.wm3x=function(d5i){var jF9w={407:"输入内容包含有关键字",404:"分享的资源不存在",408:"分享太快了，过会再分享吧"};if(d5i.code==200){this.z5E("onsuccess",d5i);if(!d5i.stopped){n5s.Z6T.I5N({tip:"分享成功！",autoclose:true})}this.br6l()}else{this.eb7U(jF9w[d5i.code]||"分享失败")}this.ea7T(false)};b5g.eb7U=function(bLR0x){if(bLR0x){this.dY7R.innerHTML='<i class="u-icn u-icn-25"></i>'+bLR0x;a5f.x5C(this.dY7R,"f-hide")}else{a5f.w5B(this.dY7R,"f-hide")}};b5g.ea7T=function(bfA3x){this.pE1x=bfA3x;if(bfA3x){this.bLS0x.innerHTML="<i>分享中...</i>"}else{this.bLS0x.innerHTML="<i>分享</i>"}};b5g.I5N=function(){L5Q.I5N.call(this);var dC7v=this.eH7A.value.length;gJ8B.bhn3x(this.eH7A,{start:dC7v,end:dC7v,text:""});this.mE0x()}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,bs6m=NEJ.F,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),H5M=c5h("nej.ut"),v5A=c5h("nej.j"),l5q=c5h("nm.x"),p5u=c5h("nm.d"),cx6r=c5h("api"),n5s=c5h("nm.l"),b5g,L5Q;n5s.bFN9E=NEJ.C();b5g=n5s.bFN9E.M6G(n5s.ee7X);b5g.bW6Q=function(){this.ch6b();var k5p=a5f.D5I(this.o5t,"j-flag");h5m.s5x(this.o5t,"click",this.bN6H.f5k(this))};b5g.cd6X=function(){this.cc6W="m-simple-share-layer"};b5g.bo6i=function(e5j){e5j.clazz="m-layer-w6";if(!e5j.shareType)e5j.parent=e5j.parent||document.body;e5j.title=e5j.title||"分享";e5j.draggable=!0;e5j.mask=e5j.mask||true;this.bp6j(e5j);this.bh6b={id:e5j.id||0,type:e5j.type||"activity",picUrl:e5j.picUrl,msg:e5j.text,resourceUrl:e5j.resourceUrl,summary:e5j.summary};this.bZ6T([[window,"snsbind",this.We1x.f5k(this)],[window,"snsbinderror",this.br6l.f5k(this)]]);this.wg3x={rid:this.bh6b.id,rurl:this.bh6b.resourceUrl,purl:this.bh6b.picUrl,mesg:this.bh6b.msg,type:this.bh6b.type,onsuccess:e5j.onsuccess};if(e5j.shareType){this.bFO9F(e5j.shareType)}};b5g.bN6H=function(d5i){var g5l=h5m.ba6U(d5i,"d:type"),u5z=a5f.t5y(g5l,"type");this.bFO9F(u5z)};b5g.bFO9F=function(u5z){switch(u5z){case"xlwb":case"rr":case"db":var ym4q={xlwb:2,rr:4,db:3},So0x=ym4q[u5z],vG3x=localCache.baR2x("user.bindings")||[],r5w=j5o.dt7m(vG3x,function(q5v){return q5v.type==So0x&&!q5v.expired});if(r5w>=0){this.BA5F(So0x)}else{var hA8s={snsType:So0x,callbackType:"Binding",clientType:"web2",forcelogin:true,csrf_token:v5A.gN8F("__csrf")};top.window.open("/api/sns/authorize?"+j5o.cr6l(hA8s))}break;case"wx":case"yx":var hA8s={resourceUrl:this.bh6b.resourceUrl,type:u5z};top.open("/share/QRCode?"+j5o.cr6l(hA8s));this.br6l();break;case"qzone":var cq6k={url:this.bh6b.resourceUrl,title:this.bh6b.msg||"",pics:this.bh6b.picUrl,summary:this.bh6b.summary};top.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+j5o.cr6l(cq6k));this.br6l();break;case"lofter":var cq6k={from:"cloudmusic",image:this.bh6b.picUrl,source:"网易云音乐",sourceurl:this.bh6b.resourceUrl,content:this.bh6b.msg};top.open("http://www.lofter.com/sharephoto/?"+j5o.cr6l(cq6k));this.br6l();break}};b5g.We1x=function(d5i){this.BA5F(d5i.result.type)};b5g.BA5F=function(u5z){this.br6l();if(this.AU5Z){this.AU5Z.V6P();delete this.AU5Z}this.wg3x.snsType=u5z;this.AU5Z=n5s.bfC3x.B5G(this.wg3x);this.AU5Z.I5N()};var cN7G=null;cx6r.simpleShare=function(e5j){if(cN7G)cN7G.V6P();cN7G=n5s.bFN9E.B5G(e5j).I5N()}})();
(function(){var c5h=NEJ.P,bb6V=NEJ.O,a5f=c5h("nej.e"),h5m=c5h("nej.v"),j5o=c5h("nej.u"),v5A=c5h("nej.j"),H5M=c5h("nej.ut"),p5u=c5h("nm.d"),l5q=c5h("nm.x"),F5K=c5h("nm.m"),n5s=c5h("nm.l"),N6H=c5h("nm.m.f"),cx6r=c5h("api"),Eg6a=/#(.*?)$/,b5g,L5Q,GQ6K={pubEventWithPics:false,pubEventWithoutResource:false,pubEventWithPictureForbiddenNotice:"等级达到Lv.4，即可添加图片"};N6H.bFP9G=NEJ.C();b5g=N6H.bFP9G.M6G(H5M.dn7g);b5g.bJ6D=function(){this.bU6O();window.onHashChange=this.bdE2x.f5k(this);window.log=this.hD8v.f5k(this);window.share=this.BA5F.f5k(this);window.shareForStore=this.cxf1x.f5k(this);window.subscribe=this.bfK3x.f5k(this);window.onIframeClick=this.cxg1x.f5k(this);h5m.s5x(window,"playchange",this.hK8C.f5k(this));h5m.s5x(window,"playstatechange",this.cxn1x.f5k(this));this.ma0x=F5K.Np8h.fR8J();this.ma0x.s5x("loginsuccess",this.cxp1x.f5k(this));this.ma0x.s5x("logoutbefore",this.buH6B.f5k(this));this.ma0x.s5x("logoutsuccess",this.buD6x.f5k(this));this.byr7k();this.by6s=N6H.QS9J.B5G();this.by6s.z5E("onshow",{});if(window.GUser&&window.GUser.userId){v5A.be6Y("/api/login/token/refresh",{type:"json",method:"post"})}this.bdE2x(l5q.Pj9a());this.FT6N=F5K.Ui0x.B5G();cx6r.refreshUserInfo=this.FT6N.NU9L.f5k(this.FT6N);this.cxN1x();cx6r.cbDonate=this.cxR1x;var referrer=document.referrer;if(referrer.indexOf(location.hostname)===-1){var conf={is_organic:referrer?0:1,url:location.href};if(!conf.is_organic){conf.source=referrer}this.hD8v("activeweb",conf)}};b5g.byr7k=function(){this.kN9E=p5u.ie8W.B5G()};b5g.bdE2x=function(cO7H){var d5i=location.parse(cO7H);this.rN1x(d5i)};b5g.rN1x=function(d5i,u5z){var eP7I=a5f.A5F("g_iframe"),kp9g=d5i.path,bw6q=d5i.query,kc9T=eP7I.contentWindow.location;this.xh4l=eP7I;if(/^\/(mv|video)/.test(kp9g)){if(this.by6s)this.by6s.br6l();this.lR0x=document.title}else{if(this.by6s)this.by6s.I5N();document.title=this.lR0x||l5q.rE1x()}if(bw6q.play=="true"&&/^\/(m\/)?song/.test(kp9g)){if(this.by6s)this.by6s.Xn1x(18,bw6q.id,true)}if(/^\/my\/m\/music\/playlist/.test(kp9g)){var bzu7n=l5q.ZZ1x();if(!bzu7n&&!!bw6q.id)return location.dispatch2("/playlist?id="+bw6q.id)}if(/^\/login\b/.test(kp9g)&&GUser&&GUser.userId){var ed7W=/targetUrl=(.+?)(&|$)/.exec(d5i.href),sy1x=ed7W?decodeURIComponent(ed7W[1]):"/discover",dm7f=/163\.com\/m\/at\//i;cyj1x=/163\.com\/show\/m\//i;cyx1x=/^(https?:\/\/?[\w-.]*(igame|music|iplay)\.163\.com)?([\/\w-.]*)?([\?#].*)?$/g;if(!cyx1x.test(sy1x)){sy1x=""}if(dm7f.test(sy1x)||cyj1x.test(sy1x)){window.location.href=sy1x}else{sy1x=sy1x.replace("/m/","/#/")}sy1x=sy1x.replace(/^\s+|\s+$/g,"");var dm7f=/^https?:\/\//i,Ij7c=/^\/\//,bnv5A=/^\//;if(!dm7f.test(sy1x)&&!Ij7c.test(sy1x)&&!bnv5A.test(sy1x)){sy1x="/discover"}return location.href=encodeURI(sy1x)}if(u5z!==undefined){if(bw6q&&bw6q.targetUrl){var oE0x=location.parse(bw6q.targetUrl);if(oE0x.path.indexOf("/store/")==0||oE0x.path.indexOf("/nmusician/")==0){return location.href=d5i.href}}return GDispatcher.refreshIFrame(d5i.href)}};b5g.cxp1x=function(){var cO7H=Eg6a.test(location.href)?RegExp.$1:"",d5i=location.parse(cO7H),MQ8I=this.FT6N;MQ8I.NU9L();v5A.be6Y("/api/topic/user/info",{type:"json",onload:function(bP6J){top.GUserAcc=NEJ.X(top.GUserAcc||{},{topic:bP6J.status});MQ8I.NU9L()}});v5A.be6Y("/api/reward/user/showicon",{type:"json",onload:function(bP6J){top.GUserAcc=NEJ.X(top.GUserAcc||{},{reward:bP6J.showIcon});MQ8I.NU9L()}});if(!cx6r.sharePermission){cx6r.sharePermission=GQ6K}v5A.be6Y("/api/event/user/permission",{type:"json",onload:function(d5i){if(d5i.code==200){cx6r.sharePermission=NEJ.EX(GQ6K,d5i)}}});this.rN1x(d5i,"urlchange")};b5g.buH6B=function(){n5s.pw1x.br6l();this.FT6N.NU9L()};b5g.buD6x=function(){if(!location.hash||location.hash=="#"){var cO7H=Eg6a.test(location.href)?RegExp.$1:"",d5i=location.parse(cO7H);this.rN1x(d5i,"urlchange");return}location.hash="#"};b5g.hK8C=function(d5i){if(this.xh4l){var bM6G=this.xh4l.contentWindow;try{if(bM6G.nej&&bM6G.nej.v){bM6G.nej.v.z5E?bM6G.nej.v.z5E(bM6G,"playchange",d5i):bM6G.nej.v.dispatchEventalias?bM6G.nej.v.dispatchEventalias(bM6G,"playchange",d5i):""}}catch(e){}}};b5g.cxn1x=function(d5i){if(!this.xh4l)return;var bM6G=this.xh4l.contentWindow;try{if(bM6G.nej&&bM6G.nej.v){bM6G.nej.v.z5E?bM6G.nej.v.z5E(bM6G,"playstatechange",d5i):bM6G.nej.v.dispatchEventalias?bM6G.nej.v.dispatchEventalias(bM6G,"playstatechange",d5i):""}}catch(e){}};b5g.hD8v=function(U6O,bm6g){if(U6O.indexOf("new|")==0){return this.kN9E.eQ7J(U6O.slice(4),bm6g)}switch(U6O){case"play":this.kN9E.ex7q(bm6g);break;case"search":this.kN9E.bXM4Q(bm6g);break;default:this.kN9E.eQ7J(U6O,bm6g)}};b5g.BA5F=function(){if(this.xh4l.contentWindow.share){this.xh4l.contentWindow.share.apply(this.xh4l.contentWindow,arguments)}};b5g.cxf1x=function(){var bsw6q=function(d5i){h5m.z5E(window,"share",d5i)};return function(db7U,u5z,Bt5y,Y6S,Kc8U,Ka8S){l5q.ly9p({rid:db7U,type:u5z,purl:Bt5y,name:Y6S,author:Kc8U,authors:Ka8S,onshare:bsw6q.f5k(this)})}}();b5g.bfK3x=function(bT6N,cyD1x){var bM6G=this.xh4l.contentWindow;if(bM6G.nm&&bM6G.nm.x){if(!bM6G.nm.x.nK0x){bM6G=top.window}if(cyD1x&&bM6G.nm.x.bXf4j){bM6G.nm.x.bXf4j({data:bT6N.program})}else if(bM6G.nm.x.nK0x){var k5p=j5o.ef7Y(bT6N)?bT6N:[bT6N];bM6G.nm.x.nK0x({tracks:k5p})}}};b5g.cxg1x=function(d5i){h5m.z5E(window,"iframeclick")};b5g.cxN1x=function(){v5A.be6Y("/api/copyright/pay_fee_message/config",{type:"json",onload:function(d5i){if(d5i.code==200){cx6r.feeMessage=d5i.config}}});cx6r.sharePermission=GQ6K;v5A.be6Y("/api/event/user/permission",{type:"json",onload:function(d5i){if(d5i.code==200){cx6r.sharePermission=NEJ.EX(GQ6K,d5i)}}});v5A.be6Y("/api/privilege/message/mv",{type:"json",onload:function(d5i){if(d5i.code===200){cx6r.mvFeeMessage=d5i.data}}})};b5g.cxR1x=function(){var cC7v={jst:"m-wgt-redeem-tip",clazz:"n-redeem"};cC7v.data={title:"成功送出",sub:"请你的好友去查看私信",ok:"知道了",type:"success"};cC7v.onaction=function(){location.dispatch2("/member")};l5q.jy9p(cC7v)};window.doMsgToServiceAction=b5g.cRo6i=function(){var bdv2x=null;return function(U6O){if(U6O=="kf"){bdv2x&&bdv2x.V6P();bdv2x=n5s.vH3x.B5G({title:"发新私信",draggable:true,clazz:"m-layer m-layer-w2",receiver:{userId:l5q.bVw4A()?117863002:253335632,nickname:l5q.bVw4A()?"测试库客服":"云音乐客服"}});bdv2x.I5N()}}}();H5M.fP8H.B5G({element:window,event:["playchange","iframeclick","playstatechange"]});a5f.cV7O("template-box");new N6H.bFP9G})()